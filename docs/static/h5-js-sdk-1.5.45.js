!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";window.__JSSDK_VERSION__={SDKVersion:"3.1.2",SDKCDNVersion:"1.5.45",SDKRefreshVersion:"1.5.45",CommitHash:""};var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function n(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}var r=t(n((function(e){function t(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}e.exports=function(e){return function(){var n=this,r=arguments;return new Promise((function(o,i){var a=e.apply(n,r);function s(e){t(a,o,i,s,c,"next",e)}function c(e){t(a,o,i,s,c,"throw",e)}s(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports}))),o=n((function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})),i=n((function(e){var t=o.default;function n(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
e.exports=n=function(){return r},e.exports.__esModule=!0,e.exports.default=e.exports;var r={},o=Object.prototype,i=o.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),a=new I(r||[]);return i._invoke=function(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return E()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=_(a,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=f(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(e,n,a),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}r.wrap=d;var h={};function p(){}function v(){}function g(){}var m={};l(m,s,(function(){return this}));var y=Object.getPrototypeOf,k=y&&y(y(M([])));k&&k!==o&&i.call(k,s)&&(m=k);var b=g.prototype=p.prototype=Object.create(m);function w(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,n){function r(o,a,s,c){var u=f(e[o],e,a);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==t(d)&&i.call(d,"__await")?n.resolve(d.__await).then((function(e){r("next",e,s,c)}),(function(e){r("throw",e,s,c)})):n.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,c)}))}c(u.arg)}var o;this._invoke=function(e,t){function i(){return new n((function(n,o){r(e,t,n,o)}))}return o=o?o.then(i,i):i()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=f(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,h;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function M(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:E}}function E(){return{value:void 0,done:!0}}return v.prototype=g,l(b,"constructor",g),l(g,"constructor",v),v.displayName=l(g,u,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},r.awrap=function(e){return{__await:e}},w(S.prototype),l(S.prototype,c,(function(){return this})),r.AsyncIterator=S,r.async=function(e,t,n,o,i){void 0===i&&(i=Promise);var a=new S(d(e,t,n,o),i);return r.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),l(b,u,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),r.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},r.values=M,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(A),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;A(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:M(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},r}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}))(),a=i;try{regeneratorRuntime=i}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=i:Function("r","regeneratorRuntime = r")(i)}var s,c,u,l=t(n((function(e){function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports}))),d=n((function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports})),f=n((function(e){e.exports=function(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports})),h=t(n((function(e){e.exports=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=f(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports}))),p=t(n((function(e){e.exports=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o},e.exports.__esModule=!0,e.exports.default=e.exports})));!function(e){e.userCaptureScreenObserved="userCaptureScreenObserved",e.onWatermarkChangeObserved="onWatermarkChange",e.onDownloadTaskStateChange="onDownloadTaskStateChange",e.nfcFoundDevice="nfcFoundDevice"}(s||(s={})),function(e){e.IOS="ios",e.ANDROID="android",e.MAC="mac",e.HARMONY="OpenHarmony",e.WINDOWS="windows"}(c||(c={})),function(e){e.CDN="cdn",e.NPM="npm",e.DEV="dev"}(u||(u={}));var v=function(e){var t;if(e.includes("Lark")||e.includes("Feishu"))return null==(t=e.match(/(lark|feishu|lark-staging|feishu-staging|lark-prerelease|feishu-prerelease|lark-oversea)\/([\d.]+)/i))?void 0:t[2]},g={versions:function(){var e,t,n=("undefined"!=typeof navigator?null==(e=navigator)?void 0:e.userAgent:"")||"",r=("undefined"!=typeof navigator?null==(t=navigator)?void 0:t.platform:"")||"",o=/(Android|Mobile|iPhone|iPad|iPod|iOS)/i.test(n),i=v(n),a=n.includes("Lark")||n.includes("Feishu"),s=i&&b(i,"3.46.0")<0,c=i&&b(i,"3.46.0")>=0&&n.includes("WebApp");return{trident:n.includes("Trident"),presto:n.includes("Presto"),webKit:n.includes("AppleWebKit"),gecko:n.includes("Gecko")&&!n.includes("KHTML"),mobile:!!n.match(/AppleWebKit.*Mobile.*/)||!!n.match(/AppleWebKit/),ios:!!n.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:n.includes("Android")||n.includes("Linux"),harmony:o&&n.toLowerCase().includes("openharmony"),iPhone:n.includes("iPhone")||n.includes("Mac"),iPad:n.includes("iPad"),webApp:!n.includes("Safari"),PCFeishu:!o&&a&&(s||c),mobileFeishu:o&&a,larkVersion:v(n),mac:r.includes("Mac"),win:r.includes("Win")}}()};function m(){return new Promise((function(e){var t=0;!function n(){var r,o;(null==(r=window.webkit)||null==(o=r.messageHandlers)?void 0:o.invoke)||window.WebViewJavascriptBridge||window.LarkWebViewJavaScriptBridge||t>100?e(0):(setTimeout(n,10+t),t++)}()}))}function y(e){return Object.prototype.toString.call(e).slice(8,-1)}function k(e,t){t?console.warn("【H5-JS-SDK】: "+e):console.error("【H5-JS-SDK】: "+e)}function b(e,t){for(var n=e.replace(/-\d*$/,"").split(".").map((function(e){return+e})),r=t.replace(/-\d*$/,"").split(".").map((function(e){return+e})),o=0;o<n.length;o++){if(n[o]>r[o])return 1;if(n[o]<r[o])return-1}return 0}var w=function(e){var t=e.versions,n=t.ios,r=t.android,o=t.mac,i=t.win,a=t.harmony;return n?c.IOS:r?c.ANDROID:o?c.MAC:i?c.WINDOWS:a?c.HARMONY:null},S=n((function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})),_=t(n((function(e){e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports}))),C="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",A=/^(?:[A-Za-z\d+/]{4})*?(?:[A-Za-z\d+/]{2}(?:==)?|[A-Za-z\d+/]{3}=?)?$/,I=window,M=I.btoa||function(e){for(var t,n,r,o,i="",a=0,s=(e=String(e)).length%3;a<e.length;){if((n=e.charCodeAt(a++))>255||(r=e.charCodeAt(a++))>255||(o=e.charCodeAt(a++))>255)throw new TypeError('Failed to execute "btoa" on "Window": The string '+e+" to be encoded contains characters outside of the Latin1 range.");i+=C.charAt((t=n<<16|r<<8|o)>>18&63)+C.charAt(t>>12&63)+C.charAt(t>>6&63)+C.charAt(63&t)}return s?i.slice(0,s-3)+"===".substring(s):i},E=I.atob||function(e){if(e=String(e).replace(/[\t\n\f\r ]+/g,""),!A.test(e))throw new TypeError('Failed to execute "atob" on "Window": The string '+e+" to be decoded is not correctly encoded.");var t;e+="==".slice(2-(3&e.length));for(var n,r,o="",i=0;i<e.length;)t=C.indexOf(e.charAt(i++))<<18|C.indexOf(e.charAt(i++))<<12|(n=C.indexOf(e.charAt(i++)))<<6|(r=C.indexOf(e.charAt(i++))),o+=64===n?String.fromCharCode(t>>16&255):64===r?String.fromCharCode(t>>16&255,t>>8&255):String.fromCharCode(t>>16&255,t>>8&255,255&t);return o};function x(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,o=0;o<r;o++)t+=String.fromCharCode(n[o]);return M(t)}function P(e,t,n){return void 0===n&&(n=!0),n?{key:e,value:t}:{key:e,base64:x(t)}}function T(e){if(null!=e){if("base64"in e)return function(e){for(var t=E(e),n=t.length,r=new Uint8Array(n),o=0;o<n;o++)r[o]=t.charCodeAt(o);return r.buffer}(e.base64);if("value"in e)return e.value}}function F(e){return function(t){return Object.prototype.toString.call(t).toLowerCase()===("[object "+e+"]").toLowerCase()}}var L=function(e,t){if(void 0===t&&(t=!0),!F("Object")(e))return e;var n=[];for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=e[r];void 0!==o&&o instanceof ArrayBuffer&&void 0!==o.byteLength&&n.push(P(r,o,t))}if(n.length>0){for(var i=0;i<n.length;i++){delete e[n[i].key]}e.__nativeBuffers__=n}return e},O=function(e){if(!F("Object")(e)||!e.__nativeBuffers__)return e;var t=e.__nativeBuffers__;delete e.__nativeBuffers__;for(var n,r=h(t);!(n=r()).done;){var o=n.value;if(o){var i=T(o);void 0!==i&&i instanceof ArrayBuffer&&(e[o.key]=i)}}return e},j=["info","warn","error","debug","log"],N=["error","warn"],D=["group","groupEnd"],B=new(function(){function e(){var e=this;this.prefix="[TMA]",this.type="",this.deprecated=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.warn.apply(e,["Deprecated:"].concat(n))},this.removeAt=function(t){for(var n,r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];(n=console).warn.apply(n,[e.prefix+"[WARN][DEV]","Deprecated(>= "+t.sdkVersion+" removed):"].concat(o))};for(var t,n=h(j);!(t=n()).done;){var r=t.value;this[r]=this.createLogMethod(r)}for(var o,i=h(D);!(o=i()).done;){var a=o.value;this[a]=this.createControlMethod(a)}}var t=e.prototype;return t.setPrefix=function(e){this.prefix=e},t.createLogMethod=function(e){var t=this;if(!N.includes(e))return function(){};var n=e.toUpperCase();return function(){for(var r,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];(r=console)[e].apply(r,[t.prefix+"["+n+"][RUNTIME]"].concat(i))}},t.createControlMethod=function(e){return function(){}},l(e)}()),R=new Function("return this;")();R.webkit;var W="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",z=/^(?:[A-Za-z\d+/]{4})*?(?:[A-Za-z\d+/]{2}(?:==)?|[A-Za-z\d+/]{3}=?)?$/,U=R.btoa||function(e){for(var t,n,r,o,i="",a=0,s=(e=String(e)).length%3;a<e.length;){if((n=e.charCodeAt(a++))>255||(r=e.charCodeAt(a++))>255||(o=e.charCodeAt(a++))>255)throw new TypeError('Failed to execute "btoa" on "Window": The string '+e+" to be encoded contains characters outside of the Latin1 range.");i+=W.charAt((t=n<<16|r<<8|o)>>18&63)+W.charAt(t>>12&63)+W.charAt(t>>6&63)+W.charAt(63&t)}return s?i.slice(0,s-3)+"===".substring(s):i},V=R.atob||function(e){if(e=String(e).replace(/[\t\n\f\r ]+/g,""),!z.test(e))throw new TypeError('Failed to execute "atob" on "Window": The string '+e+" to be decoded is not correctly encoded.");var t;e+="==".slice(2-(3&e.length));for(var n,r,o="",i=0;i<e.length;)t=W.indexOf(e.charAt(i++))<<18|W.indexOf(e.charAt(i++))<<12|(n=W.indexOf(e.charAt(i++)))<<6|(r=W.indexOf(e.charAt(i++))),o+=64===n?String.fromCharCode(t>>16&255):64===r?String.fromCharCode(t>>16&255,t>>8&255):String.fromCharCode(t>>16&255,t>>8&255,255&t);return o};function q(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,o=0;o<r;o++)t+=String.fromCharCode(n[o]);return U(t)}function H(e){for(var t=V(e),n=t.length,r=new Uint8Array(n),o=0;o<n;o++)r[o]=t.charCodeAt(o);return r.buffer}function J(e){return Object.prototype.toString.call(e).split(" ")[1].slice(0,-1)}function K(e,t){var n,r=null,o=void 0,i=function(){n&&clearTimeout(n),n=null,r&&(o=e.apply(void 0,r)),r=null},a=function(){n&&clearTimeout(n),n=null},s=function(){a();for(var e=arguments.length,s=new Array(e),c=0;c<e;c++)s[c]=arguments[c];return r=s,n=setTimeout(i,t),o};return s.cancel=a,s.flush=i,s}function G(e,t,n){var r,o=n.errMsg,i=void 0===o?"unknown":o,a=n.context,s=void 0===a?e:a,c=n.wrap,u=n.action,l=void 0===u?"report":u,d=n.reporter;try{r=e.apply(s,t)}catch(e){var f=e;if(c&&(f=c(e,i)),"throw"===l)throw f;"report"===l&&d?d(f,n):B.error(f)}return r}function Q(e){return[function(t,n,r){return G(t,n,Object.assign({},e,r))},function(t,n){var r=Object.assign({},e,n);return function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return G(t,n,r)}}]}var Z=t(n((function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports}))),Y=function(){function e(e){var t;void 0===e&&(e={}),this.events=new Map,this.callbackMap=new WeakMap,this.wrapper=void 0,this.wrapper=null!=(t=e.wrapper)?t:null}var t=e.prototype;return t.emit=function(e,t){var n=this.events.get(e);null==n||n.forEach((function(e){return e(t)}))},t.on=function(e,t){if("function"==typeof t){var n=this.events.get(e);n||(n=[],this.events.set(e,n));var r=t;if(this.wrapper){var o=this.callbackMap.get(t);o?r=o:(r=this.wrapper(t),this.callbackMap.set(t,r))}n.push(r)}},t.off=function(e,t){if(t){var n=this.wrapper?this.callbackMap.get(t):t,r=this.events.get(e);if("function"==typeof n&&r){var o=r.indexOf(n);-1!==o&&r.splice(o,1),0===r.length&&this.events.delete(e)}}else this.events.delete(e)},t.size=function(e,t){var n=this.events.get(e);if(!n)return 0;if(!t)return n.length;var r=this.wrapper?this.callbackMap.get(t):t;return"function"!=typeof r?0:n.filter((function(e){return e===r})).length},t.removeAllListeners=function(){this.events=new Map},l(e)}();function $(e,t,n){return void 0===n&&(n=!1),n?{key:e,value:t}:{key:e,base64:q(t)}}function X(e){if(null!=e){if("base64"in e)return H(e.base64);if("value"in e)return e.value}}function ee(e){return function(t){return Object.prototype.toString.call(t).toLowerCase()===("[object "+e+"]").toLowerCase()}}function te(e){if(!ee("Object")(e)||!e.__nativeBuffers__)return e;var t=e.__nativeBuffers__;delete e.__nativeBuffers__;for(var n,r=h(t);!(n=r()).done;){var o=n.value;if(o){var i=X(o);void 0!==i&&i instanceof ArrayBuffer&&(e[o.key]=i)}}return e}var ne,re,oe,ie,ae,se={pack:function(e,t){if(void 0===t&&(t=!1),!ee("Object")(e))return e;var n=[];for(var r in e){var o=e[r];void 0!==o&&o instanceof ArrayBuffer&&void 0!==o.byteLength&&n.push($(r,o,t))}if(n.length>0){for(var i=0;i<n.length;i++){delete e[n[i].key]}e.__nativeBuffers__=n}return e},unpack:te,unpack2:te};!function(e){e[e.trace=1]="trace",e[e.normal=2]="normal",e[e.warn=3]="warn",e[e.error=4]="error",e[e.fatal=5]="fatal"}(ne||(ne={})),function(e){e.traceId="trace_id",e.errorCode="error_code",e.errorMsg="error_msg",e.time="time",e.duration="duration",e.monitorLevel="monitor_level",e.monitorDomain="monitor_domain",e.monitorCode="monitor_code",e.monitorID="monitor_id",e.monitorMessage="monitor_message",e.monitorTags="monitor_tags",e.monitorFile="monitor_file",e.monitorFunction="monitor_function",e.monitorLine="monitor_line",e.monitorColumn="monitor_column",e.monitorStack="monitor_stack",e.resultType="result_type"}(re||(re={})),function(e){e.BATCH="BATCH"}(oe||(oe={})),function(e){e.success="success",e.fail="fail",e.cancel="cancel",e.timeout="timeout"}(ie||(ie={})),function(e){e[e.debug=1]="debug",e[e.info=2]="info",e[e.warn=3]="warn",e[e.error=4]="error",e[e.fatal=5]="fatal"}(ae||(ae={}));var ce,ue,le=",",de="op_monitor_event",fe="op_monitor",he="event_name";!function(e){e.warn="warn",e.error="error"}(ce||(ce={})),function(e){e.sampleRate="sample_rate",e.traceSampleRate="trace_sample_rate",e.normalSampleRate="normal_sample_rate",e.warnSampleRate="warn_sample_rate",e.errorSampleRate="error_sample_rate",e.fatalSampleRate="fatal_sample_rate",e.rules="rules",e.priority="priority",e.filters="filters",e.key="key",e.values="values"}(ue||(ue={}));var pe=function(){};function ve(e){return void 0===e}var ge,me,ye={string:function(e){return"string"==typeof e||"String"===function(e){return Object.prototype.toString.call(e).slice(8,-1)}(e)},undefined:ve,void:function(e){return ve(e)||null===e},object:function(e){return null!==e&&"object"==typeof e},number:function(e){return"number"==typeof e&&!Number.isNaN(e)},function:function(e){return"function"==typeof e}};function ke(e,t){return Object.entries(e).filter((function(e){var n=e[0],r=e[1];return!t(r,n)})).reduce((function(e,t){var n,r=t[0],o=t[1];return Object.assign(e,((n={})[r]=o,n))}),{})}function be(e,t,n){Object.defineProperty(e,t,{get:function(){return n},set:function(){}})}function we(){return ge||(ge=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}())}!function(e){e[e.NONE=0]="NONE",e[e.INITED=1]="INITED",e[e.DESTROYED=2]="DESTROYED"}(me||(me={}));var Se=function(){function e(){this._lifeState=me.NONE,this._setupHandlers=[],this._teardownHandlers=[]}var t=e.prototype;return t.setup=function(){var e=this;this._setupHandlers.forEach((function(t){var n=t();"function"==typeof n&&e._teardownHandlers.push(n)}))},t.teardown=function(){this._teardownHandlers.forEach((function(e){return e()}))},t.addSetupHandler=function(e){this._setupHandlers.push(e)},t.addTeardownHandler=function(e){this._teardownHandlers.push(e)},t._runSetup=function(){this._lifeState===me.NONE&&(this._lifeState=me.INITED,this.setup())},t._runTeardown=function(){this._lifeState===me.INITED&&(this._lifeState=me.DESTROYED,this.teardown())},l(e,[{key:"isReady",get:function(){return this._lifeState===me.INITED}},{key:"isDestroyed",get:function(){return this._lifeState===me.DESTROYED}}]),e}();function _e(e){e._runSetup()}var Ce=function(){function e(e){var t=e.priority,n=e.sampleRate,r=e.filters;this.priority=0,this.filters=[],this.priority=t,this.sampleRate=n,this.filters=r}return e.prototype.match=function(e){return this.filters.every((function(t){return t.match(e)}))},l(e)}(),Ae=function(){function e(e){var t=e.key,n=e.values;this.key="",this.values=[],this.key=t,this.values=n}return e.prototype.match=function(e){var t=""+e[this.key];return this.values.includes(t)},l(e)}(),Ie=function(){function e(){this._defaultSampleRate=1,this._traceSampleRate=0,this._normalSampleRate=1,this._warnSampleRate=1,this._errorSampleRate=1,this._fatalSampleRate=1,this._orderedRules=[]}var t=e.prototype;return t.buildConfig=function(e){void 0===e&&(e={});var t=e,n=t[ue.sampleRate],r=t[ue.traceSampleRate],o=t[ue.normalSampleRate],i=t[ue.warnSampleRate],a=t[ue.errorSampleRate],s=t[ue.fatalSampleRate],c=t[ue.rules];ye.number(n)&&(this._defaultSampleRate=n),ye.number(r)&&(this._traceSampleRate=r),ye.number(o)&&(this._normalSampleRate=o),ye.number(i)&&(this._warnSampleRate=i),ye.number(a)&&(this._errorSampleRate=a),ye.number(s)&&(this._fatalSampleRate=s);var u=this._parseRules(c);this._orderedRules=u.sort((function(e,t){return t.priority-e.priority}))},t.getSampleRate=function(e){var t=this._getMatchedRuleInOrderedRules(e),n=this._defaultSampleRate;switch(e[re.monitorLevel]){case ne.trace:n=this._traceSampleRate;break;case ne.normal:n=this._normalSampleRate;break;case ne.warn:n=this._warnSampleRate;break;case ne.error:n=this._errorSampleRate;break;case ne.fatal:n=this._fatalSampleRate}return t&&!ye.undefined(t.sampleRate)&&(n=t.sampleRate),n>=1?1:0},t._getMatchedRuleInOrderedRules=function(e){return this._orderedRules.find((function(t){return t.match(e)}))},t._parseRules=function(e){return Array.isArray(e)?e=e.map((function(e){if(ye.object(e)){var t=e[ue.priority],n=e[ue.sampleRate],r=e[ue.filters];return ye.number(t)||(t=0),ye.number(n)||(n=void 0),r=Array.isArray(r)?r.map((function(e){if(ye.object(e)){var t=e,n=t[ue.key],r=t[ue.values];return ye.string(n)&&Array.isArray(r)?e=new Ae({key:n,values:r}):void 0}})).filter((function(e){return e})):[],new Ce({priority:t,sampleRate:n,filters:r})}})).filter((function(e){return e})):[]},l(e)}(),Me=function(){function e(t){var n=this;if(this._domainToNameRegistry=new Map,this._domainToParamInjectorRegistry=new Map,this._domainToNameCache=new Map,t instanceof e)return t;var r=t||{},o=r.defaultName,i=void 0===o?de:o,a=r.log,s=r.report,c=void 0===s?pe:s,u=r.commonMetrics,l=void 0===u?{}:u,d=r.commonCategories,f=void 0===d?{}:d,h=r.commonTags,p=void 0===h?[]:h,v=r.defaultPlatform,g=void 0===v?"Slardar":v,m=r.domainToNameMap,y=r.domainToParamInjectorMap;this.defaultName=String(i),this.defaultPlatform=g,this._log=a,this._report=c,this.commonMetrics=l,this.commonCategories=f,this.commonTags=new Set(p),m&&Object.entries(m).forEach((function(e){var t=e[0],r=e[1];n.registerEvent(r,t)})),y&&Object.entries(y).forEach((function(e){var t=e[0],r=e[1];n.registerParamInjector(t,r)}))}var t=e.prototype;return t.setRemoteConfig=function(e){this._remoteConfig=e},t.getRemoteConfig=function(){return this._remoteConfig?this._remoteConfig:this.constructor.globalRemoteConfig},t.log=function(e){ye.function(this._log)&&this._log(e)},t.report=function(e){var t,n=this.getRemoteConfig(),r=e.name,o=e.metrics,i=e.categories,a=Object.assign(Object.assign(((t={})[he]=r,t),o),i);n.getSampleRate(a)<1||this._report(e)},t.registerEvent=function(e,t){if(this._domainToNameRegistry.get(t)!==e){this._domainToNameRegistry.set(t,e);for(var n,r=h(this._domainToNameCache.keys());!(n=r()).done;){var o=n.value;o.startsWith(t)&&this._domainToNameCache.delete(o)}}},t.getNameByDomain=function(e){return this._findName(e)||this.defaultName},t.registerParamInjector=function(e,t){this._domainToParamInjectorRegistry.set(e,t)},t.applyParamInjectorByDomain=function(e,t){for(var n=e.split("."),r=n.length,o=1;o<=r;o++){var i=n.slice(0,o).join("."),a=this._domainToParamInjectorRegistry.get(i);ye.function(a)&&a(t)}},t._findName=function(e){if(this._domainToNameCache.has(e))return this._domainToNameCache.get(e);for(var t,n=e.split("."),r=n.length,o=0;o<r;o++){var i=n.slice(0,r-o).join(".");if(t=this._domainToNameRegistry.get(i))return this._domainToNameCache.set(i,t),t}return this.defaultName},l(e)}();Me.globalRemoteConfig=new Ie;var Ee=function(){function e(t){if(this.cacheList=[],this.waitingForReport=!1,t instanceof e)return t;this._setConfig(t)}e.setup=function(e){this.default._setConfig(e)};var t=e.prototype;return t.getConfig=function(){return this.config},t.log=function(e){if(ye.function(this.config.log)){var t=ae.info;switch(e.getLevel()){case ne.trace:case ne.normal:t=ae.info;break;case ne.warn:t=ae.warn;break;case ne.error:t=ae.error;break;case ne.fatal:t=ae.fatal;break;default:t=ae.info}var n=fe,r=e.getValue(re.monitorFile),o=e.getValue(re.monitorFunction),i=e.getValue(re.monitorLine),a=e.getData(),s="monitor_event : "+e.getName()+" "+JSON.stringify(a);this.invokeLog(ke({level:t,tag:n,file:r,functionName:o,line:i,content:s},ve))}},t.reportTo=function(e){var t=e.getValue(re.monitorDomain);t&&this.config.applyParamInjectorByDomain(String(t),e);var n=this._getName(e),r=e.getMetrics(),o=e.getCategories(),i=e.getInternalData(),a=this._getPlatform(e);ye.function(this.config.report)&&this.invokeReport(ke({name:n,metrics:r,categories:o,internalData:i,platform:a},ve))},t.flush=function(e){var t=e.getInternalData(),n=t.logEnabled,r=void 0===n||n,o=t.reportEnabled,i=void 0===o||o,a=e.getValue(re.monitorDomain);a&&this.config.applyParamInjectorByDomain(String(a),e);var s=this._getName(e),c=e.getMetrics(),u=e.getCategories(),l=e.getInternalData(),d=this._getPlatform(e);i&&ye.function(this.config.report)&&this.invokeReport(ke({name:s,metrics:c,categories:u,internalData:l,platform:d},ve)),r&&this.log(e)},t.flushWithThrottle=function(e){var t=this,n=this.getConfig();if(ye.function(this.config.report)){var r=e.getValue(re.monitorDomain);r&&this.config.applyParamInjectorByDomain(String(r),e);var o,i=this._getPlatform(e),a=this._getName(e),s=function(){t.cacheList.forEach((function(e){return n.report(Object.assign(Object.assign({},e),{platform:i}))})),t.cacheList.length=0,t.waitingForReport=!1,we().clearTimeout(o)};this.cacheList.push({name:a,metrics:e.getMetrics(),categories:e.getCategories(),internalData:e.getInternalData()});var c=e.getValue(re.monitorLevel);this.cacheList.length>=20||c&&c>=ne.error?s():this.waitingForReport||(this.waitingForReport=!0,o=we().setTimeout((function(){s()}),2e3))}},t.invokeLog=function(e){ye.function(this.config.log)&&this.config.log(e)},t.invokeReport=function(e){ye.function(this.config.report)&&this.config.report(e)},t._setConfig=function(e){this.config=new Me(e)},t._getName=function(e){var t=e.getValue(re.monitorDomain);return e.getName()||t&&this.config.getNameByDomain(String(t))||this.config.defaultName},t._getPlatform=function(e){return e.platform||this.config.defaultPlatform},l(e)}();Ee.default=new Ee;var xe=function(){function e(t){if(t instanceof e)return t;var n=t||{},r=n.domain,o=n.code,i=n.level,a=n.message;be(this,"version",1),be(this,"domain",String(r)),be(this,"code",Number(o)),be(this,"ID",String(this.generateID())),be(this,"level",i),be(this,"message",String(a))}var t=e.prototype;return t.equals=function(t){return t instanceof e&&t.ID===this.ID},t.toJSON=function(){return{domain:this.domain,code:this.code,level:this.level,message:this.message}},t.generateID=function(){return this.version+"-"+this.domain+"-"+this.code},l(e)}(),Pe=function(){function e(e){this.metrics={},this.categories={},this.internalData={},this.tags=new Set,this._time=0,this._startTime=0,this._endTime=0,this._flushed=!1;var t=e||{},n=t.service,r=t.name,o=void 0===r?de:r,i=t.code,a=t.platform,s=t.metrics,c=t.categories,u=t.internalData;this.service=n?new Ee(n):Ee.default,this.name=o,this._platform=a,i&&(this.code=new xe(i)),this.categories=Object.assign(Object.assign({},this.service.getConfig().commonCategories),c),this.metrics=Object.assign(Object.assign({},this.service.getConfig().commonMetrics),s),this.tags=new Set(this.service.getConfig().commonTags),this.internalData=Object.assign({},u)}var t=e.prototype;return t.addMetricValue=function(e,t){return ye.undefined(t)||(this.metrics[e]=t),this},t.addCategoryValue=function(e,t){return ye.undefined(t)||(this.categories[e]=t),this},t.addTag=function(e){return ye.undefined(e)||this.tags.add(e),this},t.addMap=function(e){var t=this;return void 0===e&&(e={}),Object.entries(e).forEach((function(e){var n=e[0],r=e[1];ye.undefined(r)||(ye.number(r)?t.metrics[n]=r:t.categories[n]=r)})),this},t.tracing=function(e){return ye.undefined(e)||this.addCategoryValue(re.traceId,e),this},t.flush=function(e){if(!this._flushed){this._flushed=!0;var t=this.getInternalData(),n=t.logEnabled,r=void 0===n||n,o=t.reportEnabled,i=void 0===o||o,a=this.code||(this.hasErrorInfo()?this.codeIfError:void 0);ye.undefined(this.level)&&a&&a.level&&this.setLevel(a.level),a&&(this.addCategoryValue(re.monitorDomain,a.domain),this.addMetricValue(re.monitorCode,a.code),this.addCategoryValue(re.monitorMessage,a.message)),this.tags&&this.addCategoryValue(re.monitorTags,this.tagsInline()),this.time<=0&&this.setTime(Date.now()),i&&(e||this.service).reportTo(this),r&&this.service.log(this)}},t.flushWithThrottle=function(){this._flushed||(this._flushed=!0,this.service.flushWithThrottle(this))},t.setMonitorCode=function(e){return ye.undefined(e)||(this.code=new xe(e)),this},t.setMonitorCodeIfError=function(e){return ye.undefined(e)||(this.codeIfError=new xe(e)),this},t.setLevel=function(e){return ye.undefined(e)||(this.level=e,this.addMetricValue(re.monitorLevel,e)),this},t.setErrorCode=function(e){return ye.undefined(e)||this.addCategoryValue(re.errorCode,String(e)),this},t.setErrorMessage=function(e){return ye.undefined(e)||this.addCategoryValue(re.errorMsg,String(e)),this},t.setError=function(e){if(ye.undefined(e))return this;var t=e.message,n=e.fileName,r=e.lineNumber,o=e.columnNumber,i=e.stack,a=e.code,s=e.monitorCode;return ye.string(t)&&this.addCategoryValue(re.errorMsg,t),ye.string(n)&&this.addCategoryValue(re.monitorFile,n),ye.string(i)&&this.addCategoryValue(re.monitorStack,i),ye.number(a)&&this.addMetricValue(re.errorCode,a),ye.number(r)&&this.addMetricValue(re.monitorLine,r),ye.number(o)&&this.addMetricValue(re.monitorColumn,o),s&&this.setMonitorCode(s),this},t.setTime=function(e){return ye.undefined(e)||(this._time=e,this.addMetricValue(re.time,e)),this},t.setPlatform=function(e){return e&&(this._platform=e),this},t.timing=function(e){var t=Date.now();return this._startTime>0?(this._endTime=t,this.addMetricValue(e||re.duration,this._endTime-this._startTime)):this._startTime=t,this},t.setDuration=function(e){return ye.undefined(e)||this.addMetricValue(re.duration,e),this},t.getCode=function(){return this.code},t.getName=function(){return this.name},t.getMetrics=function(){return Object.assign({},this.metrics)},t.getCategories=function(){return Object.assign({},this.categories)},t.getInternalData=function(){return this.internalData},t.getData=function(){return Object.assign(Object.assign({},this.metrics),this.categories)},t.getValue=function(e){return this.metrics[e]||this.categories[e]},t.setResultType=function(e){return this.addCategoryValue(re.resultType,e),this},t.setResultTypeSuccess=function(){return this.setResultType(ie.success),this},t.setResultTypeFail=function(){return this.setResultType(ie.fail),this},t.setResultTypeCancel=function(){return this.setResultType(ie.cancel),this},t.setResultTypeTimeout=function(){return this.setResultType(ie.timeout),this},t.getLevel=function(){return this.level},t.getMonitorId=function(){return this.code&&this.code.ID},t.getMonitorDomain=function(){return this.code&&this.code.domain},t.toJSON=function(){return{name:this.name,categories:this.getCategories(),metrics:this.getMetrics()}},t.addInternalData=function(e){return Object.assign(this.internalData,e),this},t.hasErrorInfo=function(){return!ye.undefined(this.getValue(re.errorCode))||!ye.undefined(this.getValue(re.errorMsg))},t.tagsInline=function(){return 0===this.tags.size?"":Array.from(this.tags).reduce((function(e,t){return""+e+(t?le+t:"")}))},l(e,[{key:"time",get:function(){return this._time}},{key:"platform",get:function(){return this._platform}}]),e}(),Te=function(e,t,n,r){return{domain:e,code:t,level:n,message:r}},Fe=function(){return ne.error}(),Le=function(){return ne.warn}(),Oe=function(){return ne.normal}(),je=function(e,t,n){return Te(e,t,Le,n)},Ne=function(e,t,n){return Te(e,t,Oe,n)},De="js.open_platform.gadget",Be="op_js_network",Re="op_network_v1_bk_dev",We=De+".js_runtime_error",ze=Te(We,10001,Fe,"app_service_sdk_script_error"),Ue=je(We,10004,"third_script_error"),Ve=je(De,1e4,"undefined_default_code"),qe=De+".network",He=Ne(qe,1e4,"request_result"),Je=Ne(qe,10002,"upload_result"),Ke=Ne(qe,10003,"abort_upload"),Ge=Ne(qe,10004,"download_result"),Qe=Ne(qe,10005,"abort_download"),Ze=Ne(qe,10006,"request_enter_waiting_queue"),Ye=Ne(qe,10020,"op_network_v1_bk_dev");(function(){function e(e){var t,n,r=this;this.maxCacheCount=void 0,this.maxCacheTime=void 0,this.list=[],this.handler=null,this.config=(t=new Me({report:function(e){return r.report(e)},log:function(){}}),(n=new Ie).buildConfig({sample_rate:1,trace_sample_rate:1,normal_sample_rate:1,warn_sample_rate:1,error_sample_rate:1,fatal_sample_rate:1}),t.setRemoteConfig(n),t),this.maxCacheCount=e.maxCacheCount,this.maxCacheTime=e.maxCacheTime}e.init=function(t){var n,r,o=this.OPMonitor=new e({maxCacheCount:null!=(n=t.maxCacheCount)?n:10,maxCacheTime:null!=(r=t.maxCacheTime)?r:500});Ee.setup(o.config)},e.get=function(){return this.OPMonitor};var t=e.prototype;return t.report=function(e){var t=this,n=e.name,r=e.metrics,o=e.categories,i=void 0===o?{}:o,a=e.platform,s=i.monitor_level,c={name:n,metrics:r,categories:i};"Slardar"!==a&&(c.platform=a),this.list.push(c),this.list.length>=this.maxCacheCount||s&&s>=ne.error?this.flush():this.handler||(this.handler=setTimeout((function(){t.handler=null,t.flush()}),this.maxCacheTime))},t.flush=function(){if(this.list.length){var e={monitorEvents:this.list},t=(void 0).agent.isSupportNewBridge?e:JSON.stringify(e);(void 0).ttJSBridge.invoke("monitorReport",t),this.list=[],this.handler&&(clearTimeout(this.handler),this.handler=null)}},l(e)}()).OPMonitor=void 0;var $e,Xe=function(e){function t(){return e.apply(this,arguments)||this}return _(t,e),t.prototype.addMap=function(t){return e.prototype.addMap.call(this,t)},l(t)}(Pe),et=function(e,t){return new Xe(e?{name:e,code:new xe(t)}:{name:"undefined_default_code",code:new xe(Ve)})};new Function("return this;")(),function(e){e.MOBILE="mobile",e.PC="pc",e.PC_SIDEBAR="pc_sidebar",e.PC_WINDOW="pc_window",e.IDE="lark_ide"}($e||($e={}));var tt=n((function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})),nt=t(tt),rt=n((function(e){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")},e.exports.__esModule=!0,e.exports.default=e.exports})),ot=n((function(e){e.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.__esModule=!0,e.exports.default=e.exports})),it=n((function(e){function t(n,r,o){return ot()?(e.exports=t=Reflect.construct.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=t=function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&S(o,n.prototype),o},e.exports.__esModule=!0,e.exports.default=e.exports),t.apply(null,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}));var at,st,ct=function(e){function t(t,n){var r;return(r=e.call(this,t)||this).errno=void 0,r.errString=void 0,function(e,t){t&&"cause"in t&&Object.defineProperty(e,"cause",{writable:!0,configurable:!0,enumerable:!1,value:t.cause})}(Z(r),n),r}return _(t,e),t.is=function(e){return e instanceof t},l(t)}(t(n((function(e){function t(n){var r="function"==typeof Map?new Map:void 0;return e.exports=t=function(e){if(null===e||!rt(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return it(e,arguments,tt(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),S(t,e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})))(Error)),ut=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).name="ThirdScriptError",t}return _(t,e),t.is=function(e){return e instanceof Error&&"ThirdScriptError"===e.name},l(t,[{key:"monitorCode",get:function(){return Ue}}]),t}(ct),lt=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).name="ServiceError",t}return _(t,e),t.is=function(e){return e instanceof Error&&"ServiceError"===e.name},l(t,[{key:"monitorCode",get:function(){return ze}}]),t}(ct),dt=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).name="ArgumentError",t}return _(t,e),l(t,[{key:"monitorCode",get:function(){}}]),t}(ct),ft=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).name="InvokeError",t}return _(t,e),l(t,[{key:"monitorCode",get:function(){}}]),t}(ct);!function(e){e.NAVIGATE_TO="navigateTo",e.REDIRECT_TO="redirectTo",e.NAVIGATE_BACK="navigateBack",e.SWITCH_TAB="switchTab",e.APP_LAUNCH="appLaunch",e.RE_LAUNCH="reLaunch",e.AUTO_RELAUNCH="autoReLaunch",e.RESTORE_TO="restoreTo",e.APP_RESTORE_LAUNCH="appRestoreLaunch",e.APP_ROUTE_DESTROY="appRouteDestroy",e.REFRESH="refresh"}(at||(at={})),function(e){e.DEFAULT="default",e.CLONE="clone",e.ACTIVATE="activate"}(st||(st={}));var ht=Q({wrap:function(e,t){return new ut(t,{cause:e})},reporter:function(e,t){var n=t.data;null!=n&&n.dispatchUnhandledError?n.dispatchUnhandledError(e):B.error(e)}})[1],pt=["success","fail","complete","cancel"];function vt(e){return Object.prototype.toString.call(e).slice(8,-1)}function gt(e){return"Function"===vt(e)}function mt(e){return"Number"===vt(e)}var yt=function(){return"Internal error"},kt=function(e){return"Parameter error. Invalid value for "+e},bt=function(e){return"Parameter error. "+e+" is of wrong type"},wt=function(e){return"Parameter error. "+e+" cannot be empty"},St=function(){return"Parameter error. Some values exist in both choosenIds and disableChosenIds."},_t=function(){return"Parameter error. openId and openChatId cannot be both empty."},Ct=function(){return"Unable to load image"},At=function(){return"Unable to load video"},It=function(){return"Path not be supported"},Mt=function(){return"Total count of chosenOpenIds and chosenOpenChatIds exceeds limit, max 10 allowed."},Et=function(){return"Network failure"},xt=function(){return"API not available"};function Pt(e,t){for(var n in t){var r=t[n];if(r.required&&!e.hasOwnProperty(n))return n+" should not be undefined";if(e.hasOwnProperty(n)){var o=vt(e[n]),i=r.type;if(o!==i)return n+" should pass "+i+", not "+o}}return!1}function Tt(e,t,n){void 0===n&&(n="param");var r=vt(e),o=vt(t);if(r!==o)return n+" should pass "+o+", not "+r;var i="";switch(o){case"Object":for(var a in t)i+=Tt(e[a],t[a],n+"."+a);break;case"Array":if(e.length<t.length)return n+" should have more than "+t.length+" items, not "+e.length+" items";for(var s=0;s<t.length;++s)i+=Tt(e[s],t[s],n+"["+s+"]")}return i}var Ft=102,Lt=103,Ot=104,jt=305,Nt=1002012,Dt=1002014,Bt=1003001,Rt=1300007,Wt=1306001,zt=1306002,Ut=function(e,t){return e.errno=Ot,e.errString=kt(t),e},Vt=function(e,t){return e.errno=Ot,e.errString=bt(t),e};function qt(e,t){var n=vt(e),r=vt(t);if(n===r&&"Object"===r)for(var o in t){if(vt(e[o])!==vt(t[o]))return bt(o)}return""}function Ht(e,t,n,r){void 0===t&&(t={}),void 0===n&&(n=""),void 0===r&&(r={});var o=e+":fail "+n,i=Object.assign({errMsg:o},r);gt(t.fail)&&Xt(t.fail,"at "+e+" fail callback")(i),gt(t.complete)&&Xt(t.complete,"at "+e+" complete callback")(i)}function Jt(e,t,n){void 0===t&&(t={}),void 0===n&&(n={});var r=e+":ok",o=Object.assign({errMsg:r},n);gt(t.success)&&Xt(t.success,"at "+e+" success callback")(o),gt(t.complete)&&Xt(t.complete,"at "+e+" complete callback")(o)}function Kt(e,t){if(void 0===t&&(t=!1),void 0===e||"object"!=typeof e)return e;var n=[];for(var r in e)if(e.hasOwnProperty(r))if(t)try{n.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]))}catch(t){n.push(r+"="+e[r])}else n.push(r+"="+e[r]);return n.join("&")}function Gt(e,t){if("string"==typeof e&&"object"==typeof t&&null!==t&&Object.keys(t).length>0){var n=function(e){if("string"==typeof e){var t=e.split("?");return{urlQueryObj:(t[1]||"").split("&").reduce((function(e,t){if("string"==typeof t&&t.length>0){var n=t.split("=");e[n[0]]=n[1]}return e}),{}),prefix:t[0]}}return{}}(e),r=n.urlQueryObj,o=void 0===r?{}:r,i=n.prefix;return(void 0===i?"":i)+"?"+Kt(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){for(var n in t)e[n]=t[n];return e}),{})}(o,Object.keys(t).reduce((function(e,n){return"object"==typeof t[n]?e[encodeURIComponent(n)]=encodeURIComponent(JSON.stringify(t[n])):e[encodeURIComponent(n)]=encodeURIComponent(t[n]),e}),{})))}return e}function Qt(e,t){return void 0===t&&(t="http"),"http"===t?/^(http|https):\/\/.*/i.test(e):"websocket"===t?/^(ws|wss):\/\/.*/i.test(e):void 0}function Zt(e){return Object.keys(e).reduce((function(t,n){return"string"==typeof e[n]?t[n]=e[n]:"number"==typeof e[n]||"boolean"==typeof e[n]?t[n]=""+e[n]:t[n]=Object.prototype.toString.apply(e[n]),t}),{})}var Yt=Q({wrap:function(e,t){return ct.is(e)?e:new lt(t,{cause:e})},action:"throw"})[1];function $t(e,t){return Yt(e,{errMsg:t,context:e})}function Xt(e,t){return ht(e,{errMsg:t,context:e})}var en=$t((function(e){var t=Object.prototype.toString.call(e).split(" ")[1].split("]")[0];return{data:e="Array"===t||"Object"===t?JSON.stringify(e):"String"===t||"Number"===t||"Boolean"===t?e.toString():"Date"===t?e.getTime().toString():"Undefined"===t?"undefined":"Null"===t?"null":"",dataType:t}}),"anyTypeToString");var tn=$t((function(e,t){switch(t){case"String":return e;case"Array":case"Object":return JSON.parse(e);case"Number":return parseFloat(e);case"Boolean":return"true"===e;case"Date":return new Date(parseInt(e));case"Undefined":return;case"Null":return null;default:return""}}),"stringToAnyType"),nn="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function rn(e){void 0===e&&(e=20);for(var t="",n=0;n<e;n++){var r=Math.floor(Math.random()*nn.length);t+=nn[r]}return t}var on=0;function an(){return"02"+String(Date.now()).slice(-13)+rn(32)+(on++%2176782336).toString(32).padStart(6,"0")}var sn;function cn(e){return e.success,e.fail,e.complete,e.cancel,p(e,pt)}function un(e){if(e.length<8)return"*".repeat(e.length);var t=e.slice(0,4),n=e.slice(-4);return""+t+"*".repeat(e.length-8)+n}function ln(e){var t=e.split("?")[0];try{var n=new URL(t),r=n.pathname.split("/"),o=r[r.length-1];if(o){var i=function(e){var t=e.lastIndexOf(".");if(t>-1){var n=e.slice(0,t),r=e.slice(t+1);return un(n)+"."+r}return un(e)}(o),a=r.slice(0,r.length-1).join("/")+"/"+i;return n.pathname=a,n.toString()}return t}catch(e){return t}}!function(e){e[e.unknown=0]="unknown",e[e.android=1]="android",e[e.iOS=2]="iOS"}(sn||(sn={}));var dn=0;var fn,hn,pn=["success","fail","cancel","complete","progress","eventName","isListener"],vn=function(e){function t(){return e.apply(this,arguments)||this}return _(t,e),t.prototype.invoke=function(t,n,r){var o=n.params,i=void 0===o?{}:o;if(n.__v2__){var a=i.success,s=i.fail,c=i.cancel,u=i.complete,l=i.progress,d=i.eventName,f=i.isListener,h=void 0!==f&&f,v=p(i,pn),g={method:t,params:Object.assign({},v,{__v2__:!0}),callbackConfig:{onSuccess:a,onFail:s,onProgress:l,onCancel:c,onComplete:u},eventName:d,isListener:h,isTT:!0};e.prototype.invokeNative.call(this,g)}else{var m=r.eventName,y=r.keep,k=void 0!==y&&y,b=r.onProgress,w=r.origialCallback;b&&(r.onProgress=function(e){e&&b(e.data)});var S={method:t,params:n,callbackConfig:r,eventName:m||t,isListener:k,isTT:!1,origialCallback:w};e.prototype.invokeNative.call(this,S)}},l(t)}(function(){function e(){var e=this;this.callbackMapObj={},this.callbackMap=new WeakMap,this._invokeQueue=[],this.randomId=rn(8),this._onBridgeReady=function(){var t=e.callbackMapObj;window.LarkWebViewJavaScriptBridge={nativeCallBack:function(e){var n;null==(n=t[e.callbackID])||n[0](e)}},e._invokeQueue.forEach((function(e){e()}))},this._invokeNative=function(t){var n=t.method,r=t.params,o=t.callbackConfig,i=t.eventName,a=t.isListener,s=t.isTT,c=t.origialCallback,u=o.onSuccess,l=o.onFail,d=o.onProgress,f=o.onCancel,h=o.onComplete,p=a?i:""+dn++,v=function(t){var n=t.callbackType,r=t.data;if(r&&"string"==typeof r)try{r=JSON.parse(r)}catch(e){}r=O(r),"cancel"===n?(null==f||f(r),null==h||h(r)):"failure"===n?(null==l||l(r),null==h||h(r)):"continued"===n?null==d||d(r):(null==u||u(r),null==h||h(r)),a||"continued"===n||delete e.callbackMapObj[p]};if(a&&e.callbackMapObj[p]?e.callbackMapObj[p].push(v):e.callbackMapObj[p]=[v],a&&(d||c)){var g=c||d;e.callbackMap.set(g,e.callbackMapObj[p])}var m={apiName:n,data:L(r,!1),callbackID:p,extra:{callerID:e.randomId}};if(!a||!s){var y=e._getSystemType();if(y===sn.android)try{window.Lark_Bridge.invokeNative(JSON.stringify(m)||"")}catch(e){}if(y===sn.iOS&&window.webkit.messageHandlers.invokeNative.postMessage(m),y===sn.unknown){var k,b,w,S;if(null!=(k=window)&&null!=(b=k.webkit)&&null!=(w=b.messageHandlers)&&w.invokeNative)return void window.webkit.messageHandlers.invokeNative.postMessage(m);if(null!=(S=window)&&S.Lark_Bridge)try{window.Lark_Bridge.invokeNative(JSON.stringify(m)||"")}catch(e){}}}},window.addEventListener("WebViewJSBridgeReady",this._onBridgeReady.bind(this),!1)}var t=e.prototype;return t._getSystemType=function(){var e=navigator.userAgent;return/android/i.test(e)?sn.android:/iPad|iPhone|iPod/.test(e)?sn.iOS:sn.unknown},t._stashTask=function(e){this._invokeQueue.push(e)},t.invokeNative=function(e){var t=this;this._isNativeReady()?this._invokeNative(e):this._stashTask((function(){return t._invokeNative(e)}))},t.removeListener=function(e,t){var n=this.callbackMapObj[e];if(n&&Array.isArray(n)&&!(n.length<=0))if(t)for(var r=this.callbackMap.get(t),o=0;o<r.length;o++){var i=r[o],a=n.indexOf(i);if(!~a)return;n.splice(a,1),0===n.length&&delete this.callbackMapObj[e]}else delete this.callbackMapObj[e]},t._isNativeReady=function(){var e,t,n,r,o,i,a,s,c,u,l,d,f=this._getSystemType(),h=!1;f===sn.android&&(h=!(null==(e=window)||null==(t=e.Lark_Bridge)||!t.invokeNative));f===sn.iOS&&(h=!(null==(n=window)||null==(r=n.webkit)||null==(o=r.messageHandlers)||null==(i=o.invokeNative)||!i.postMessage));f===sn.unknown&&(h=!(null==(a=window)||null==(s=a.Lark_Bridge)||!s.invokeNative)||!(null==(c=window)||null==(u=c.webkit)||null==(l=u.messageHandlers)||null==(d=l.invokeNative)||!d.postMessage));return h},l(e)}());!function(e){e.sdkEnter="h5jssdk_enter",e.sdkReady="h5jssdk_ready",e.getSdkConfigTimeout="h5jssdk_get_sdk_config_timeout",e.getSdkConfigError="h5jssdk_get_sdk_config_error",e.authenticationFailure="h5jssdk_authentication_failure"}(fn||(fn={})),function(e){e.success="success",e.fail="fail",e.cancel="cancel",e.timeout="timeout"}(hn||(hn={}));var gn,mn,yn,kn,bn,wn,Sn,_n="js.open_platform.web",Cn=((gn={})[fn.getSdkConfigTimeout]={domain:_n+".op_web_js_script_error",code:10001,level:ne.error,message:"h5jssdk_get_sdk_config_timeout"},gn[fn.getSdkConfigError]={domain:_n+".op_web_js_script_error",code:10002,level:ne.error,message:"h5jssdk_get_sdk_config_error"},gn[fn.authenticationFailure]={domain:_n+".op_web_js_script_error",code:10003,level:ne.error,message:"h5jssdk_authentication_failure"},gn[hn.success]={domain:_n+".api",code:1e4,level:ne.normal,message:"api_success"},gn[hn.fail]={domain:_n+".api",code:10002,level:ne.error,message:"api_fail"},gn[hn.cancel]={domain:_n+".api",code:10001,level:ne.warn,message:"api_cancel"},gn[hn.timeout]={domain:_n+".api",code:10003,level:ne.error,message:"api_timeout"},gn[fn.sdkEnter]={domain:_n+".op_h5sdk_common",code:1e4,level:ne.normal,message:"h5jssdk_enter"},gn[fn.sdkReady]={domain:_n+".op_h5sdk_common",code:10001,level:ne.normal,message:"h5jssdk_ready"},gn.DEFAULT={domain:_n,code:1e4,level:ne.warn,message:"undefined_default_code"},gn),An="op_web_api_invoke_result",In=[],Mn=function(e,t){return void 0===e&&(e=""),void 0===t&&(t=Cn.DEFAULT),new Pe(e?{name:e,code:new xe(t)}:{name:"undefined_default_code",code:new xe(Cn.DEFAULT)})},En=n((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this._configReady=!0,this._configEvent="LarkConfigReady",this._invokeQueue=[],window.addEventListener(this._configEvent,this._onBridgeReady.bind(this),!1)}return e.prototype._fireEvent=function(e,t){var n=new CustomEvent(e,t);window.dispatchEvent(n)},e.prototype._submitTask=function(e){this._invokeQueue.push(e)},e.prototype._onBridgeReady=function(){this._invokeQueue.forEach((function(e){e()}))},e.prototype.register=function(e,t){},e.prototype.connectLkWebViewJavascriptBridge=function(e){},e.prototype.invoke=function(e,t,n){},e.prototype.config=function(e,t,n){var r=this;this.invoke(e,t,{onSuccess:function(){r._configReady=!0,n.onSuccess&&n.onSuccess(),r._fireEvent(r._configEvent,{})},onFail:function(e){r._configReady=!0,n.onFail&&n.onFail(e),r._fireEvent(r._configEvent,{})}}),this._configReady=!1},e}();t.BaseBridgeImpl=n})),xn=n((function(t,n){var r,o=e&&e.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=e&&e.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(n,"__esModule",{value:!0});var a=function(e){function t(){var t=e.call(this)||this;return window.addEventListener("WebViewJavascriptBridgeReady",t._onBridgeReady.bind(t),!1),t}return o(t,e),t.prototype.invoke=function(e,t,n){var r=i({},t);n&&(r.onSuccess=this._wrapCallback(n.onSuccess,n.keep),r.onFailed=this._wrapCallback(n.onFail,n.keep),n.onProgress&&(r.onProgress=this._wrapProgress(n.onProgress)),r.callback=r.onSuccess),this._invokeiOS(e,r)},t.prototype._invokeiOS=function(e,t){window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.invoke?window.webkit.messageHandlers.invoke.postMessage({method:e,args:t}):this._iOSReady((function(){window.WebViewJavascriptBridge.invoke({method:e,args:t})}))},t.prototype._iOSReady=function(e){window.WebViewJavascriptBridge&&this._configReady?e():this._submitTask(e)},t.prototype._wrapCallback=function(e,t){void 0===t&&(t=!1);var n="func_"+Date.now()+"_"+Math.floor(1e4*Math.random());return window[n]=function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];"function"==typeof e&&e.apply(void 0,r),t||(window[n]=null)},n},t.prototype._wrapProgress=function(e){var t="func_progress"+Date.now()+"_"+Math.floor(1e4*Math.random());return window[t]=function(n){"function"==typeof e&&n&&(e(n.data),0==+n.state&&(window[t]=null))},t},t}(En.BaseBridgeImpl);n.iOSBridgeImpl=a})),Pn=n((function(t,n){var r,o=e&&e.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(e){function t(){var t=e.call(this)||this;return document.addEventListener("LkWebViewJavascriptBridgeReady",t._onBridgeReady.bind(t),!1),t}return o(t,e),t.prototype.register=function(e,t){this._androidReady((function(){window.LkWebViewJavascriptBridge.registerHandler(e,t)}))},t.prototype.connectLkWebViewJavascriptBridge=function(e){var t=this;window.LkWebViewJavascriptBridge?(e(window.LkWebViewJavascriptBridge),this.register("fireEvent",(function(e,n){t._fireEvent(e.name,e.data)}))):(this._submitTask((function(){e(window.LkWebViewJavascriptBridge)})),this.register("fireEvent",(function(e,n){t._fireEvent(e.name,e.data)})))},t.prototype.invoke=function(e,t,n){this._androidReady((function(){n?window.LkWebViewJavascriptBridge.callHandler(e,t,n.onSuccess,n.keep,{onSuccess:n.onSuccess,onFailed:n.onFail,onProgress:n.onProgress}):window.LkWebViewJavascriptBridge.callHandler(e,t)}))},t.prototype._androidReady=function(e){if(!window.LkWebViewJavascriptBridge||!window.LkWebViewJavascriptBridge.callHandler||!window.LkWebViewJavascriptBridge.registerHandler)return this._configReady?console.log("add LkWebViewJavascriptBridgeReady listener"):console.log("add _configEvent listener Bridge is not ready"),void this._submitTask(e);this._configReady?e():(console.log("add _configEvent listener Bridge is ready"),this._submitTask(e))},t}(En.BaseBridgeImpl);n.AndroidBridegeImpl=i})),Tn=n((function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.unknown=0]="unknown",e[e.android=1]="android",e[e.iOS=2]="iOS"}(n=t.OperatingSystemType||(t.OperatingSystemType={})),t.getOperatingSystemType=function(){var e=navigator.userAgent;return/android/i.test(e)?n.android:/iPad|iPhone|iPod/.test(e)?n.iOS:n.unknown}})),Fn=n((function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.bridge=n,t.getBridge=function(){return n||(t.bridge=n=function(e){switch(e){case Tn.OperatingSystemType.android:return new Pn.AndroidBridegeImpl;case Tn.OperatingSystemType.iOS:return new xn.iOSBridgeImpl;default:throw"Cannot init bridge with Operator System Type: unkonwn"}}(Tn.getOperatingSystemType()),n.connectLkWebViewJavascriptBridge((function(e){e._messageHandler||e.init((function(e,t){t({init:"success!"})}))})),window._LarkJsBridge=n),n}})),Ln=["success","fail","cancel","complete"],On={invoke:function(){},config:function(){}};g.versions.mobileFeishu?g.versions.larkVersion&&b(g.versions.larkVersion,"3.46.0")>=0&&(null!=(kn=window)&&kn.Lark_Bridge||null!=(bn=window)&&null!=(wn=bn.webkit)&&null!=(Sn=wn.messageHandlers)&&Sn.invokeNative)?(window.isNewBridge=!0,On=new vn):On=Fn.getBridge():null!=(mn=window)&&null!=(yn=mn.__LarkPCSDK__)&&yn.bridge?On=window.__LarkPCSDK__.bridge:(k("cannot find pc bridge"),On={invoke:function(){},config:function(){}});var jn={__v2__:!0},Nn=0,Dn=function(e,t){return function(){return e(t.apply(void 0,arguments))}},Bn=function(){};var Rn={},Wn={},zn=function(e,t,n,r){var o,i={api_name:e};return t===hn.success?In.includes(e)&&"monitorReport"!==e&&Mn(An,Cn[hn.success]).addMap(i).setResultType(hn.success).flush():t===hn.fail?"monitorReport"!==e&&Mn(An,Cn[hn.fail]).addMap(i).setError((o=r,{name:(o=o||{}).name,code:void 0!==o.code?o.code:o.errorCode,message:o.message||o.errorMessage||o.errorMsg,fileName:o.fileName,stack:o.stack,lineNumber:o.lineNumber,columnNumber:o.columnNumber})).setResultType(hn.fail).flush():"monitorReport"!==e&&Mn(An,Cn[t]).addMap(i).setResultType(t).flush(),r};On.on=function(e,t,n){if("function"==typeof n)if(Wn[e]=Wn[e]||[],0===Wn[e].length){var r={keep:!0,onSuccess:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Wn[e].forEach((function(e){return"function"==typeof e&&e.apply(void 0,n)}))},origialCallback:n};window.isNewBridge&&Object.assign(r,{eventName:e}),Wn[e].push(n),On.invoke(t,{},r)}else Wn[e].push(n)},On.off=function(e,t,n){window.isNewBridge&&On.removeListener(e,n),n?(Wn[e]=Wn[e]||[],Wn[e]=Wn[e].filter((function(e){return e!==n}))):delete Wn[e],Wn[e]&&0!==Wn[e].length||On.invoke(t,{},{})};var Un=On.invoke;On.invoke=r(a.mark((function e(){var t,n,r,o=arguments;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=o.length,n=new Array(t),r=0;r<t;r++)n[r]=o[r];if("function"==typeof n[3]&&(Rn[n[1].callbackId]=n[3]),+new Date,!g.versions.ios||window.isNewBridge){e.next=6;break}return e.next=6,m();case 6:"config"!==n[0]&&"getSDKConfig"!==n[0]&&"monitorReport"!==n[0]&&(n[2]=n[2]||{},n[2].onSuccess=Dn(n[2].onSuccess||Bn,(function(e){return zn(n[0],hn.success,0,e)})),n[2].onFail=Dn(n[2].onFail||Bn,(function(e){return zn(n[0],hn.fail,0,e)}))),Un.apply(On,n);case 8:case"end":return e.stop()}}),e)})));var Vn=On,qn={invoke:function(e,t,n){var r=t.success,o=void 0===r?function(){}:r,i=t.fail,a=void 0===i?function(){}:i,s=t.cancel,c=void 0===s?function(){}:s;t.complete;var u=p(t,Ln),l=L(u,!1),d=Nn++,f=+new Date;Rn[d]=[e,o,a,c,f];var h=Object.assign({},l,{params:window.isNewBridge?t:l},jn,{callbackId:d});Vn.invoke(e,h,{},n)},invokeHandler:function(e,t){t=O(t);var n=Rn[e];if(n){var r=n[0],o=n[1],i=n[2],a=n[3];n[4];delete Rn[e];var s=t.errMsg,c=s.startsWith(r+":ok"),u=s.startsWith(r+":fail"),l=s.startsWith(r+":cancel");c?("function"==typeof o&&o(t),zn(r,hn.success,0,t)):u?("function"==typeof i&&i(t),zn(r,hn.fail,0,t)):("function"==typeof a&&a(t),zn(r,l?hn.cancel:hn.timeout,0,t))}},subscribe:function(e,t,n){if(Wn[e]&&Wn[e].length>0?Wn[e].push(n):Wn[e]=[n],window.isNewBridge){var r={success:n};Object.assign(r,{isListener:!0,eventName:e,progress:n}),qn.invoke(t,r)}},unsubscribe:function(e,t,n){var r=Wn[e]||[];Wn[e]=r.filter((function(e){return e!==n})),0===Wn[e].length&&delete Rn[e],window.isNewBridge&&Vn.removeListener(e,n)},subscribeHandler:function(e,t){var n=Wn[e]||[];t=O(t),n.length&&n.forEach((function(e){"function"==typeof e&&e(t)}))}},Hn=16e4;function Jn(e){if("string"==typeof e){if(e.length<814)throw new Error("非法的base64String");return~~((e.length-814)/1.37)}return 0}var Kn,Gn={navigation:new(function(){function e(){}var t=e.prototype;return t.setTitle=function(e){Vn.invoke("biz.navigation.setTitle",e)},t.setLeft=function(e){Vn.invoke("biz.navigation.setLeft",{control:e.control,text:e.text,isShowIcon:e.isShowIcon},{onSuccess:e.onSuccess,keep:!0})},t.setRight=function(e){Vn.invoke("biz.navigation.setRight",e)},t.setMenu=function(e){(function(e){for(var t,n=h(e);!(t=n()).done;){var r=t.value;if(r.imageBase64&&Jn(r.imageBase64)>Hn)throw new Error("imageSize超过160000");if(r.imageBase64&&r.text)throw new Error("text和imageBase64只能传一个")}return!0})(e.items)&&(Vn.off("biz.navigation.setMenu"),Vn.invoke("biz.navigation.setMenu",{items:e.items},{onSuccess:e.onSuccess,keep:!0}))},t.goBack=function(e){Vn.invoke("biz.navigation.goBack",{},{onSuccess:e.onSuccess})},t.close=function(e){Vn.invoke("biz.navigation.close",{},{onSuccess:e.onSuccess})},l(e)}()),util:new(function(){function e(){}var t=e.prototype;return t.uploadImage=function(e){Vn.invoke("biz.util.uploadImage",{multiple:e.multiple,max:e.max},{onSuccess:e.onSuccess})},t.copyText=function(e){Vn.invoke("biz.util.copyText",e)},t.share=function(e){var t=e.url,n=e.title,r=e.content,o=e.image,i=e.onSuccess;Vn.invoke("biz.util.share",{url:t,title:n,content:r,image:o},{onSuccess:i})},t.getCookies=function(e){Vn.invoke("biz.util.getCookies",{},{onSuccess:e.onSuccess})},t.scan=function(e){void 0===e&&(e={});var t={};e.type&&(t.type="string"==typeof e.type?[e.type]:e.type),void 0!==e.barCodeInput&&(t.barCodeInput=e.barCodeInput),Vn.invoke("biz.util.scan",t,{onSuccess:e.onSuccess})},t.datePicker=function(e){Vn.invoke("biz.util.datePicker",{format:e.format,value:e.value},{onSuccess:e.onSuccess})},t.timePicker=function(e){Vn.invoke("biz.util.timePicker",{format:e.format,value:e.value},{onSuccess:e.onSuccess})},t.dateTimePicker=function(e){Vn.invoke("biz.util.dateTimePicker",{format:e.format,value:e.value},{onSuccess:e.onSuccess})},t.chosen=function(e){Vn.invoke("biz.util.chosen",{source:e.source,selectedKey:e.selectedKey},{onSuccess:e.onSuccess})},t.multiSelect=function(e){Vn.invoke("biz.util.multiSelect",{options:e.options,selectOption:e.selectOption},{onSuccess:e.onSuccess})},t.getAppLanguage=function(e){Vn.invoke("biz.util.getAppLanguage",{},{onSuccess:e.onSuccess})},t.setAuthenticationInfo=function(e){Vn.invoke("biz.util.setAuthenticationInfo",JSON.parse(JSON.stringify(e)),{onSuccess:e.onSuccess,onFail:e.onFail})},t.startBiometrics=function(e){Vn.invoke("biz.util.startBiometrics",JSON.parse(JSON.stringify(e)),{onSuccess:e.onSuccess,onFail:e.onFail})},t.savePageSnapshot=function(e){Vn.invoke("biz.util.savePageSnapshot",{},{onSuccess:e.onSuccess,onFail:e.onFail})},t.sharePageSnapshot=function(e){Vn.invoke("biz.util.sharePageSnapshot",{},{onSuccess:e.onSuccess,onFail:e.onFail})},t.downloadFile=function(e){var t="downloadFile"+Date.now()+"_"+Math.floor(1e4*Math.random());return Vn.invoke("biz.util.downloadFile",{url:e.url,taskId:t},{onSuccess:e.onSuccess,onFail:e.onFail,onProgress:e.onProgress}),{abort:function(){Vn.invoke("biz.util.cancelDownloadFile",{taskId:t})}}},l(e)}()),reporter:new(function(){function e(){}return e.prototype.sendEvent=function(e,t,n){Vn.invoke("biz.reporter.sendEvent",{category:e,action:t,params:n})},l(e)}()),chat:new(function(){function e(){}var t=e.prototype;return t.openSingleChat=function(e){Vn.invoke("biz.chat.openSingleChat",{chatterId:e.chatterId},{onSuccess:e.onSuccess})},t.toConversation=function(e){Vn.invoke("biz.chat.toConversation",{chatId:e.chatId},{onSuccess:e.onSuccess})},l(e)}()),contact:new(function(){function e(){}return e.prototype.choose=function(e){Vn.invoke("biz.contact.choose",JSON.parse(JSON.stringify(e)),{onSuccess:e.onSuccess})},l(e)}())},Qn=new(function(){function e(){}var t=e.prototype;return t.showPreloader=function(e){Vn.invoke("device.notification.showPreloader",e)},t.hidePreloader=function(){Vn.invoke("device.notification.hidePreloader",{})},t.confirm=function(e){Vn.invoke("device.notification.confirm",{message:e.message,title:e.title,buttonLabels:e.buttonLabels},{onSuccess:e.onSuccess})},t.alert=function(e){Vn.invoke("device.notification.alert",e)},t.toast=function(e){Vn.invoke("device.notification.toast",Object.assign({},e,{duration:2}))},t.prompt=function(e){Vn.invoke("device.notification.prompt",{message:e.message,title:e.title,buttonLabels:e.buttonLabels},{onSuccess:e.onSuccess})},t.vibrate=function(e){Vn.invoke("device.notification.vibrate",{duration:e.duration},{onSuccess:e.onSuccess})},t.actionSheet=function(e){Vn.invoke("device.notification.actionSheet",{title:e.title,cancelButton:e.cancelButton,otherButtons:e.otherButtons},{onSuccess:e.onSuccess})},l(e)}());!function(e){e.wifi="wifi",e.lbs="lbs",e.gps="gps"}(Kn||(Kn={}));var Zn,Yn=new(function(){function e(){}var t=e.prototype;return t.get=function(e){Vn.invoke("device.geolocation.get",{useCache:e.useCache},{onSuccess:e.onSuccess,onFail:e.onFail})},t.start=function(e){var t=e.useCache,n=e.interval,r=e.sceneId,o=e.onSuccess,i=e.onFail;Vn.invoke("device.geolocation.start",{useCache:t,interval:n,sceneId:r},{onSuccess:o,onFail:i,keep:!0})},t.stop=function(e){Vn.invoke("device.geolocation.stop",{sceneId:e.sceneId},{onSuccess:e.onSuccess,onFail:e.onFail})},l(e)}()),$n=new(function(){function e(){}var t=e.prototype;return t.getNetworkType=function(e){Vn.invoke("device.connection.getNetworkType",{},{onSuccess:e.onSuccess,onFail:e.onFail})},t.scanBluetoothDevice=function(e){Vn.invoke("device.connection.scanBluetoothDevice",{scanTimeout:e.scanTimeout},{onSuccess:e.onSuccess})},t.getBluetoothDeviceState=function(e){Vn.invoke("device.connection.getBluetoothDeviceState",{},{onSuccess:e.onSuccess})},t.connectBluetoothDevice=function(e){Vn.invoke("device.connection.connectBluetoothDevice",{id:e.id,uuid:e.uuid},{onSuccess:e.onSuccess})},l(e)}());!function(e){e.captureScreen="event.user.captureScreen",e.networkStatusChange="event.connection.networkStatusChange"}(Zn||(Zn={}));var Xn={notification:Qn,geolocation:Yn,connection:$n,base:new(function(){function e(){}var t=e.prototype;return t.getInterface=function(e){Vn.invoke("device.base.getInterface",{},{onSuccess:e.onSuccess})},t.getWifiStatus=function(e){Vn.invoke("device.base.getWifiStatus",{},{onSuccess:e.onSuccess})},t.getWifiList=function(e){Vn.invoke("device.base.getWifiList",{},{onSuccess:e.onSuccess})},t.getDeviceInfo=function(e){Vn.invoke("device.base.getDeviceInfo",{},{onSuccess:e.onSuccess})},t.onUserCaptureScreen=function(e){Vn.on(Zn.captureScreen,"device.base.onUserCaptureScreen",e)},t.offUserCaptureScreen=function(e){Vn.off(Zn.captureScreen,"device.base.offUserCaptureScreen",e)},l(e)}()),screen:new(function(){function e(){}var t=e.prototype;return t.lockViewOrientation=function(e){Vn.invoke("device.screen.lockViewOrientation",{toHorizontal:e.toHorizontal,clockwise:e.clockwise},{onSuccess:e.onSuccess,onFail:e.onFail})},t.unlockViewOrientation=function(e){Vn.invoke("device.screen.unlockViewOrientation",{},{onSuccess:e.onSuccess,onFail:e.onFail})},l(e)}())};var er,tr=Object.freeze({__proto__:null,getRecentApplications:function(e){Vn.invoke("appCenter.getAppList",{},{onSuccess:e.onSuccess,keep:!0})},putRecentApplication:function(e){var t=e.appId,n=e.appType;Vn.invoke("appCenter.putAppRecent",{appId:t,appType:n},{onSuccess:e.onSuccess,keep:!0})}}),nr=document.createElement("iframe");nr.style.display="none",null==(er=document.body)||er.appendChild(nr);var rr,or=function(e,t){return new Promise((function(n,r){var o=setTimeout((function(){r(new Error("h5jssdk_getSDKConfig_timeout"))}),3e3);Vn.invoke("getSDKConfig",{param:JSON.stringify({build:t})},{onSuccess:function(t){o&&clearTimeout(o);try{"android"!==e&&"OpenHarmony"!==e||!t.apiInfoList?0===t.code?n(t.data.apiInfoList.map((function(e){return e.name}))):n(!0):n(t.apiInfoList.map((function(e){return e.name})))}catch(e){r(e)}},onFail:function(e){o&&clearTimeout(o),r(e)}})}))},ir=function(){var e=r(a.mark((function e(t,n,r){var o,i,s,c,u,l,d;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={},e.prev=1,e.next=4,or(t,r);case 4:(i=e.sent)&&(o={openList:i,byteList:[]}),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:if(c=(s=o).openList,u=void 0===c?[]:c,l=s.byteList,d=void 0===l?[]:l,"cdn"!==r){e.next=13;break}return e.abrupt("return",u);case 13:return e.abrupt("return",u.concat(d));case 14:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n,r){return e.apply(this,arguments)}}(),ar=function(e){var t=e.api,n=e.browser,r=e.SDK,o=e.build;return rr=rr||new Promise((function(e,i){if(n.versions.mobileFeishu||n.versions.PCFeishu){var a=w(n),s=n.versions.larkVersion;if(!a||!s)return i(new Error("please use h5-js-sdk in Feishu or Lark APP"));ir(a,s,o).then((function(n){void 0===n&&(n=[]),n.length?function(e,t,n){e.map((function(e){return e.split(".")})).forEach((function(e){e.reduce((function(t,n,r){if(null===t)return t;var o=t.feishu,i=t.api;return void 0===i[n]?null:e.length===r+1?(o[n]=i[n],null):(void 0===o[n]&&(o[n]={}),{feishu:o[n],api:i[n]})}),{feishu:t,api:n})}))}(n,r,t):Object.keys(t).forEach((function(e){r[e]=t[e]})),e()})).catch((function(e){Object.keys(t).forEach((function(e){r[e]=t[e]})),i(e)}))}else i(new Error("please use h5-js-sdk in Feishu or Lark APP"))}))},sr={onSuccess:{type:"Function"},onFail:{type:"Function"}},cr=[{name:"device.base.getSystemInfo",args:sr},{name:"biz.util.getClipboardInfo",args:sr},{name:"biz.util.openDocument",args:Object.assign({url:{type:"String",required:!0},method:{type:"String"},fileType:{type:"String"},header:{type:"Object"},body:{type:"String"},onProgress:{type:"Function"}},sr)},{name:"biz.contact.open",args:Object.assign({mode:{type:"String",default:"look",required:!0}},sr)},{name:"biz.user.getUserInfo",args:sr},{name:"biz.user.openDetail",args:Object.assign({openId:{type:"String",required:!0},position:{type:"Object"}},sr)},{name:"biz.user.getUserInfoEx",args:sr},{name:"device.health.getStepCount",args:sr},{name:"device.connection.getConnectedWifi",args:sr},{name:"device.connection.getGatewayIP",args:sr},{name:"biz.util.previewImage",args:Object.assign({urls:{type:"Array"},current:{type:"String"},requests:{type:"Array"}},sr)},{name:"biz.util.openLink",args:Object.assign({url:{type:"String",required:!0},title:{type:"String"},newTab:{type:"Boolean"}},sr)}];function ur(e,t){return t.forEach((function(t){var n=t.name,r=t.service,o=t.eventName,i=void 0===o?"":o,a=n.split("."),s=e;a.forEach((function(e,o){if(o===a.length-1){if(s[e])return k("the API ["+n+"] has exist, please check and modify");var c=e.match(/^(on|off)[A-Z]/),u=c?Vn[c[1]]:Vn.invoke,l=[null!=r?r:n];c&&l.unshift(i),s[e]=function(e){if(!t.args||(r=e,o=t.args,i=n,a=!0,s="",d=y(r),f=o.type||y(o),"Undefined"===d?"Object"===f?r={}:o.required&&(s="【"+i+"】：the argument expect a "+f+" but received a "+d,a=!1):d!==f&&(s="【"+i+"】：the argument expect a "+f+" but received a "+d,a=!1),a&&"Object"===f&&Object.keys(o).forEach((function(e){var t=o[e];t.default&&void 0===r[e]&&(r[e]=t.default),t.alias&&(r[t.alias]=r[e]);var n=y(r[e]);"Undefined"===n?t.required&&(s="【"+i+"】：the param ["+e+"] is required and must be "+t.type,a=!1):t.type!==n&&(s="【"+i+"】：the param ["+e+"] expect "+t.type+" but received "+n,a=!1)})),a||(r&&"function"==typeof r.onFail?r.onFail({errorCode:1015,errorMessage:s}):k(s)),a)){var r,o,i,a,s,d,f;if(c)return u.call.apply(u,[Vn].concat(l,[e]));var h=function(e){var t={},n={};return Object.keys(e).forEach((function(r){"function"==typeof e[r]?n[r]=e[r]:t[r]=e[r]})),{normal:t,callbacks:n}}(e||{}),p=h.normal,v=h.callbacks;return u.call.apply(u,[Vn].concat(l,[p,v]))}}}else s=s[e]||(s[e]={})}))})),e}var lr={};var dr=n((function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports})),fr=n((function(e){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports})),hr=n((function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports})),pr=n((function(e){e.exports=function(e){return dr(e)||fr(e)||f(e)||hr()},e.exports.__esModule=!0,e.exports.default=e.exports})),vr=n((function(e){var t=o.default;e.exports=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,n||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports})),gr=n((function(e){var t=o.default;e.exports=function(e){var n=vr(e,"string");return"symbol"===t(n)?n:String(n)},e.exports.__esModule=!0,e.exports.default=e.exports})),mr=t(n((function(e){function t(){t=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){["method","field"].forEach((function(n){t.forEach((function(t){t.kind===n&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var n=e.prototype;["method","field"].forEach((function(r){t.forEach((function(t){var o=t.placement;if(t.kind===r&&("static"===o||"prototype"===o)){var i="static"===o?e:n;this.defineClassElement(i,t)}}),this)}),this)},defineClassElement:function(e,t){var n=t.descriptor;if("field"===t.kind){var r=t.initializer;n={enumerable:n.enumerable,writable:n.writable,configurable:n.configurable,value:void 0===r?void 0:r.call(e)}}Object.defineProperty(e,t.key,n)},decorateClass:function(e,t){var n=[],r=[],i={static:[],prototype:[],own:[]};if(e.forEach((function(e){this.addElementPlacement(e,i)}),this),e.forEach((function(e){if(!o(e))return n.push(e);var t=this.decorateElement(e,i);n.push(t.element),n.push.apply(n,t.extras),r.push.apply(r,t.finishers)}),this),!t)return{elements:n,finishers:r};var a=this.decorateConstructor(n,t);return r.push.apply(r,a.finishers),a.finishers=r,a},addElementPlacement:function(e,t,n){var r=t[e.placement];if(!n&&-1!==r.indexOf(e.key))throw new TypeError("Duplicated element ("+e.key+")");r.push(e.key)},decorateElement:function(e,t){for(var n=[],r=[],o=e.decorators,i=o.length-1;i>=0;i--){var a=t[e.placement];a.splice(a.indexOf(e.key),1);var s=this.fromElementDescriptor(e),c=this.toElementFinisherExtras((0,o[i])(s)||s);e=c.element,this.addElementPlacement(e,t),c.finisher&&r.push(c.finisher);var u=c.extras;if(u){for(var l=0;l<u.length;l++)this.addElementPlacement(u[l],t);n.push.apply(n,u)}}return{element:e,finishers:r,extras:n}},decorateConstructor:function(e,t){for(var n=[],r=t.length-1;r>=0;r--){var o=this.fromClassDescriptor(e),i=this.toClassDescriptor((0,t[r])(o)||o);if(void 0!==i.finisher&&n.push(i.finisher),void 0!==i.elements){e=i.elements;for(var a=0;a<e.length-1;a++)for(var s=a+1;s<e.length;s++)if(e[a].key===e[s].key&&e[a].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[a].key+")")}}return{elements:e,finishers:n}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return Object.defineProperty(t,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){if(void 0!==e)return pr(e).map((function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var n=gr(e.key),r=String(e.placement);if("static"!==r&&"prototype"!==r&&"own"!==r)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+r+'"');var o=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var i={kind:t,key:n,placement:r,descriptor:Object.assign({},o)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(o,"get","The property descriptor of a field descriptor"),this.disallowProperty(o,"set","The property descriptor of a field descriptor"),this.disallowProperty(o,"value","The property descriptor of a field descriptor"),i.initializer=e.initializer),i},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:a(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:e.map(this.fromElementDescriptor,this)};return Object.defineProperty(t,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var n=a(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:n}},runClassFinishers:function(e,t){for(var n=0;n<t.length;n++){var r=(0,t[n])(e);if(void 0!==r){if("function"!=typeof r)throw new TypeError("Finishers must return a constructor.");e=r}}return e},disallowProperty:function(e,t,n){if(void 0!==e[t])throw new TypeError(n+" can't have a ."+t+" property.")}};return e}function n(e){var t,n=gr(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var r={kind:"field"===e.kind?"field":"method",key:n,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(r.decorators=e.decorators),"field"===e.kind&&(r.initializer=e.value),r}function r(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function o(e){return e.decorators&&e.decorators.length}function i(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function a(e,t){var n=e[t];if(void 0!==n&&"function"!=typeof n)throw new TypeError("Expected '"+t+"' to be a function");return n}e.exports=function(e,a,s,c){var u=t();if(c)for(var l=0;l<c.length;l++)u=c[l](u);var d=a((function(e){u.initializeInstanceElements(e,f.elements)}),s),f=u.decorateClass(function(e){for(var t=[],n=function(e){return"method"===e.kind&&e.key===c.key&&e.placement===c.placement},a=0;a<e.length;a++){var s,c=e[a];if("method"===c.kind&&(s=t.find(n)))if(i(c.descriptor)||i(s.descriptor)){if(o(c)||o(s))throw new ReferenceError("Duplicated methods ("+c.key+") can't be decorated.");s.descriptor=c.descriptor}else{if(o(c)){if(o(s))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+c.key+").");s.decorators=c.decorators}r(c,s)}else t.push(c)}return t}(d.d.map(n)),e);return u.initializeClassElements(d.F,f.elements),u.runClassFinishers(d.F,f.finishers)},e.exports.__esModule=!0,e.exports.default=e.exports}))),yr=["success","fail","cancel","complete"];function kr(e,t,n){qn.invoke(e,t,n)}function br(e,t){qn.subscribe(e,e,t)}function wr(e,t,n){void 0===t&&(t={});var r=t,o=r.success,i=r.fail,a=r.cancel,s=r.complete,c=p(r,yr),u=Object.assign({},c),l=function(e){null==s||s(e),null==n||null==n.afterAll||n.afterAll(e)};u.success=function(e){null==n||null==n.beforeAll||n.beforeAll(e),null==n||null==n.beforeSuccess||n.beforeSuccess(e),null==o||o(e),null==n||null==n.afterSuccess||n.afterSuccess(e),l(e)},u.fail=function(e){null==n||null==n.beforeAll||n.beforeAll(e),null==n||null==n.beforeFail||n.beforeFail(e),null==i||i(e),null==n||null==n.afterFail||n.afterFail(e),l(e)},u.cancel=function(e){null==n||null==n.beforeAll||n.beforeAll(e),null==i||i(e),null==n||null==n.beforeCancel||n.beforeCancel(e),null==a||a(e),null==n||null==n.afterCancel||n.afterCancel(e),null==s||s(e),l(e)},kr(e,u)}function Sr(e,t){br(e,t)}function _r(){}function Cr(e){return Object.prototype.toString.call(e).slice(8,-1)}var Ar=function e(t,n,r){void 0===r&&(r="param");var o=Cr(t),i=Cr(n);if(o!==i)return r+" should pass "+i+", not "+o;var a="";switch(i){case"Object":for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(a+=e(t[s],n[s],r+"."+s));break;case"Array":if(t.length<n.length)return r+" should have more than "+n.length+" items, not "+t.length+" items";for(var c=0;c<n.length;++c)a+=e(t[c],n[c],r+"["+c+"]")}return a},Ir=function(e,t,n,r){var o=Ar(t,n);if(o){var i={};if(r){var a=qt(t,n);a&&(i={errString:a,errno:Ot})}return Mr(e,t,o,i),!1}return!0},Mr=function(e,t,n,r){void 0===t&&(t={}),void 0===n&&(n=""),void 0===r&&(r={});var o={errMsg:e+":fail "+n};Object.assign(o,r),Xt(t.fail||_r,o.errMsg)(o),Xt(t.complete||_r,o.errMsg)(o)},Er=Object.freeze({__proto__:null,addHostListener:function(){},publish:function(){},subscribe:function(){},_mockInvokeHandler:function(e){},_unmockInvokeHandler:function(){},invoke:kr,on:br,invokeMethod:wr,onMethod:Sr,noop:_r,beforeInvoke:Ir,beforeInvokeFail:Mr}),xr=["addStandardError","customCheckParams","checkParams","checkExtendParams","beforeInvokeHook","paramsTransformer","defaults","frequencyStrategy","frequencyTime","frequencyReportTimeout","frequencyReporter"],Pr=["firstUseErrString"],Tr=function(){},Fr=function(e){return e};function Lr(e,t){void 0===t&&(t={});var n,r=t,o=r.addStandardError,i=r.customCheckParams,a=r.checkParams,s=r.checkExtendParams,c=r.beforeInvokeHook,u=r.paramsTransformer,l=r.defaults,d=r.frequencyStrategy,f=r.frequencyTime,h=void 0===f?0:f,v=r.frequencyReportTimeout,g=r.frequencyReporter,m=p(r,xr),y=function(n){void 0===n&&(n={});var r,d=new Map;l&&(n=Object.assign({},"function"==typeof l?l():l,n));var f={};if(a){if(r=Tt(n,a),o){var h=qt(n,a);h&&(f={errString:h,errno:Ot})}}else if(s)if(o){var p=function(e,t){for(var n in t){var r=t[n];if(!e.hasOwnProperty(n)){if(r.required)return{errMsg:n+" should not be undefined",errString:wt(n)};r.hasOwnProperty("defaultValue")&&(e[n]=r.defaultValue)}if(e.hasOwnProperty(n)){var o=vt(e[n]),i=r.type;if(o!==i)return{errMsg:n+" should pass "+i+", not "+o,errString:bt(n)}}}return{errMsg:"",errString:""}}(n,s),v=p.errMsg,g=p.errString;v&&(r=v,f={errString:g,errno:Ot})}else r=Pt(n,s);if(!r&&i){var y=i(n);y&&(r=y.message,o&&y.key&&(f={errString:kt(y.key),errno:Ot}))}if(r)Ht(e,n,r,f);else{var k=null==c?void 0:c(n,d);if(void 0!==k){var b=t,w=b.beforeAll,S=b.beforeSuccess,_=b.afterSuccess,C=b.afterAll,A=n.success;null==w||w(k,d),null==S||S(k,d),"function"==typeof A&&A(k),null==_||_(k,d),null==C||C(k,d)}else{var I;u&&(n=null!=(I=u(n,d))?I:n),wr(e,n,m)}}};if("queue"===d){var k=[],b=!1,w=function e(){b=!0;var t,r=k.shift();(null==n||n(),r)?y(Object.assign({},r,{complete:function(t){null==r||null==r.complete||r.complete(t),setTimeout((function(){e()}),h)}})):0===k.length?(b=!1,null==(t=n)||t.cancel()):e()};return g&&v&&(n=K((function(){g({apiName:e,timeout:v,waitingLength:k.length})}),v)),function(e){void 0===e&&(e={}),null==n||n(),k.push(e),b||w()}}if("throttle"===d){var S,_,C=[],A=0,I=!1,M=function(){var t;for(null==(t=n)||t.cancel();C.length;){var r=C.shift();"fail"===_?Ht(e,r,"",S):Jt(e,r,S)}};return g&&v&&(n=K((function(){g({apiName:e,timeout:v,waitingLength:C.length})}),v)),function(e){void 0===e&&(e={});var t=Date.now();C.push(e),!A||t-A>h?(A=t,I=!1,null==n||n(),y(Object.assign({},e,{success:function(e){S=e,_="success",I=!0,M()},fail:function(e){S=e,_="fail",I=!0,M()}}))):I&&M()}}return y}function Or(e,t,n,r){void 0===r&&(r={});var o,i=r,a=i.firstUseErrString,s=p(i,Pr);return o="function"==typeof n?n:"string"==typeof n?function(e){return e[n]}:!0===n?Fr:Tr,function(){var n,r,i=!1;if(wr(e,Object.assign({},t.apply(void 0,arguments),s,{success:function(e){n=e,i=!0},fail:function(e){r=e,i=!0}})),r){var c=a&&r.errString||r.errMsg;if(c){var u=new Error(c);throw r.errString,u.errString=r.errString,r.errno,u.errno=r.errno,u}throw new Error(e+":fail unknown")}if(!i)throw new Error(e+":fail empty result");return o(n)}}function jr(e,t,n){void 0===n&&(n={});var r=n,o=r.wrapper,i=r.whenListenerExisted,a=r.whenListenerEmptied,s=r.whenListenerAdd,c=r.whenListenerRemove,u=r.onPolicy,l=r.offPolicy,d=new WeakMap,f="emptied";function h(){"existed"===f?e.size(t)||(f="emptied",null==a||a()):e.size(t)&&(f="existed",null==i||i())}return{on:function(n){if("function"==typeof n){var r=d.get(n);if(r||(o?(r=o(n),d.set(n,r)):r=n),"latest"===u)e.off(t),null==c||c();else if("unique"===u&&e.size(t,r)>0)return;e.on(t,r),null==s||s(),h()}},off:function(n){if(void 0===n||"clearAll"===l)e.off(t),null==c||c();else if("function"==typeof n){var r,o=null!=(r=d.get(n))?r:n;o&&e.off(t,o),null==c||c()}h()}}}function Nr(e){return void 0===e&&(e={}),function(t,n){var r=t.key;t.finisher=function(t){t.exportApi(r,e)}}}function Dr(e){return function(t,n){var r=t.key;t.finisher=function(t){t.injectDep(r,e)}}}var Br=function(e){_(n,e),n.exportApi=function(e,t){this.hasOwnProperty("exports")||Object.defineProperty(this,"exports",{enumerable:!1,writable:!0,configurable:!0,value:this.exports?this.exports.slice():[]}),this.exports.push({name:e,options:t})},n.injectDep=function(e,t){this.hasOwnProperty("deps")||Object.defineProperty(this,"deps",{enumerable:!1,writable:!0,configurable:!0,value:this.deps?this.deps.slice():[]}),this.deps.push({name:e,type:t})};var t=n.prototype;function n(t){var n;return(n=e.call(this)||this).container=t,n.beforeInvoke=Ir,n.beforeInvokeFail=Mr,n.createInvokeMethodApi=Lr,n.createInvokeMethodSyncApi=Or,n._eventEmitter=void 0,n}return t.createEventApi=function(e,t){return jr(this.emitter,e,t)},t.createNativeEventApi=function(e,t){var n=this,r="__internal_"+e+"__";return this.addSetupHandler((function(){n.onMethod(e,(function(e){var o,i=null!=(o=null==t||null==t.transformData?void 0:t.transformData(e))?o:e;null==t||null==t.whenEventEmit||t.whenEventEmit(i),n.emitter.emit(r,e),null==t||null==t.whenEventEmitted||t.whenEventEmitted(i)}))})),jr(this.emitter,r,t)},l(n,[{key:"invokeMethod",get:function(){return this.container.bridge.invokeMethod}},{key:"subscribe",get:function(){return this.container.bridge.subscribe}},{key:"onMethod",get:function(){return this.container.bridge.onMethod}},{key:"publish",get:function(){return this.container.bridge.publish}},{key:"emitter",get:function(){var e=this;return this._eventEmitter||(this._eventEmitter=new Y({wrapper:function(t){return ht(t,{context:null,errMsg:"at tt event api",data:e.container})}})),this._eventEmitter}}]),n}(Se);function Rr(e,t){var n=e+"() { [native code] }";Object.defineProperty(t,"toString",{configurable:!0,writable:!0,enumerable:!1,value:function(){return n}})}Br.exports=void 0,Br.deps=void 0;var Wr=function(e){function t(t,n){var r;return(r=e.call(this)||this).container=t,r.exports=void 0,r.instance=new Map,r.apis=void 0,r.apis=Array.from(new Set(n)),r}_(t,e),t.getExports=function(e,n){var r=new t(e,n);return _e(r),r.exports};var n=t.prototype;return n.setup=function(){this.createApis(),this.setupApis(),this.exports=this.composeApis()},n.teardown=function(){for(var e,t=h(this.apis);!(e=t()).done;){var n=e.value;this.instance.get(n)._runTeardown()}},n.createApis=function(){for(var e,t=h(this.apis);!(e=t()).done;){var n=e.value;this.instance.set(n,new n(this.container))}for(var r,o=h(this.apis);!(r=o()).done;){var i=r.value,a=this.instance.get(i),s=i.deps;if(null!=s&&s.length)for(var c,u=h(s);!(c=u()).done;){var l=c.value,d=l.name,f=(0,l.type)();if(!f)throw new Error("Cannot found dep class in "+d+" of "+i.name);var p=this.instance.get(f);if(!p)throw new Error("Cannot found dep in "+d+" with type "+f.name+" in "+i.name);a[d]=p}}},n.setupApis=function(){for(var e,t=h(this.apis);!(e=t()).done;){var n=e.value;_e(this.instance.get(n))}},n.composeApis=function(){for(var e,t={},n=h(this.apis);!(e=n()).done;){var r=e.value,o=this.instance.get(r),i=o.constructor.exports;if(i)for(var a,s=h(i);!(a=s()).done;){var c=a.value.name,u=o[c];if("function"==typeof u){var l=$t(u.bind(o),"at tt."+c);Rr(c,l),t[c]=l}else if(null!=u)if(u.on){var d=u,f=d.on,p=d.off,v=c[0].toUpperCase()+c.slice(1),g="on"+v;if(t[g]=f,Rr(g,f),p){var m="off"+v;t[m]=p,Rr(m,p)}}else t[c]=u}}return t},l(t)}(Se),zr=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"authorize",value:function(){return this.createInvokeMethodApi("authorize",{checkParams:{scope:""}})}}]}}),Br),Ur=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"getSystemInfo",value:function(){var e=this;return this.createInvokeMethodApi("getSystemInfo",{beforeSuccess:function(t){var n,r=e.container.getJSSDKVersion();t.SDKVersion=r.SDKVersion,t.SDKUpdateVersion=r.SDKUpdateVersion,t.platform=null==(n=t.platform)?void 0:n.toLocaleLowerCase(),t.devicePixelRatio=t.pixelRatio}})}},{kind:"field",decorators:[Nr()],key:"getSystemInfoSync",value:function(){var e=this;return function(){var t={};return e.invokeMethod("getSystemInfoSync",{},{beforeSuccess:function(n){var r;void 0===n&&(n={});var o=e.container.getJSSDKVersion();n.platform=null==(r=n.platform)?void 0:r.toLocaleLowerCase(),n.SDKVersion=o.SDKVersion,n.SDKUpdateVersion=o.SDKUpdateVersion,n.devicePixelRatio=n.pixelRatio,t=n}}),t}}}]}}),Br),Vr=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"openSchema",value:function(){return this.createInvokeMethodApi("openSchema")}}]}}),Br),qr=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"getPadDisplayScaleMode",value:function(){return this.createInvokeMethodApi("getPadDisplayScaleMode")}},{kind:"field",decorators:[Nr()],key:"togglePadFullScreen",value:function(){return this.createInvokeMethodApi("togglePadFullScreen")}}]}}),Br),Hr=n((function(e){e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=tt(e)););return e},e.exports.__esModule=!0,e.exports.default=e.exports})),Jr=t(n((function(e){function t(){return"undefined"!=typeof Reflect&&Reflect.get?(e.exports=t=Reflect.get.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=t=function(e,t,n){var r=Hr(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},e.exports.__esModule=!0,e.exports.default=e.exports),t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}))),Kr="mainNavItemClick",Gr="navBarClick",Qr="leftNavBarClick",Zr="rightNavBarClick",Yr=mr(null,(function(e,t){var n=function(t){function n(n){var r;r=t.call(this,n)||this,e(Z(r));var o=r.createEventApi(Kr);r.onMainNavRightItemClick=o.on,r.offMainNavRightItemClick=o.off;var i=r.createEventApi(Gr,{onPolicy:"latest"});r.onNavigationBarClick=i.on,r.offNavigationBarClick=i.off;var a=r.createEventApi(Qr,{onPolicy:"latest"});r.onLeftNavigationBarClick=a.on,r.offLeftNavigationBarClick=a.off;var s=r.createEventApi(Zr,{onPolicy:"latest"});return r.onRightNavigationBarClick=s.on,r.offRightNavigationBarClick=s.off,r}return _(n,t),l(n)}(t);return{F:n,d:[{kind:"field",key:"_titleConfig",value:function(){return{}}},{kind:"field",decorators:[Nr()],key:"setNavigationBarTitle",value:function(){return this.createInvokeMethodApi("setNavigationBarTitle",{checkParams:{title:"String"}})}},{kind:"field",decorators:[Nr()],key:"setNavigationBarColor",value:function(){return this.createInvokeMethodApi("setNavigationBarColor",{checkParams:{frontColor:"String",backgroundColor:"String"}})}},{kind:"field",decorators:[Nr()],key:"setMainNavRightItems",value:function(){return this.createInvokeMethodApi("setMainNavRightItems")}},{kind:"field",decorators:[Nr()],key:"onMainNavRightItemClick",value:function(){}},{kind:"field",decorators:[Nr()],key:"offMainNavRightItemClick",value:function(){}},{kind:"field",decorators:[Nr()],key:"showNavigationBarLoading",value:function(){return this.createInvokeMethodApi("showNavigationBarLoading")}},{kind:"field",decorators:[Nr()],key:"hideNavigationBarLoading",value:function(){return this.createInvokeMethodApi("hideNavigationBarLoading")}},{kind:"field",decorators:[Nr()],key:"hideHomeButton",value:function(){return this.createInvokeMethodApi("hideHomeButton")}},{kind:"field",decorators:[Nr()],key:"setNavigationBar",value:function(){var e=this;return this.createInvokeMethodApi("setNavigationBar",{paramsTransformer:function(t){var n;return t.iosRightItemsFlipped&&/iPad|iPhone|iPod|iOS/i.test(navigator.userAgent)&&null!=(n=t.right)&&n.items.length&&t.right.items.reverse(),e._titleConfig=cn(t),t}})}},{kind:"field",decorators:[Nr()],key:"onNavigationBarClick",value:void 0},{kind:"field",decorators:[Nr()],key:"offNavigationBarClick",value:void 0},{kind:"field",decorators:[Nr()],key:"onLeftNavigationBarClick",value:void 0},{kind:"field",decorators:[Nr()],key:"offLeftNavigationBarClick",value:void 0},{kind:"field",decorators:[Nr()],key:"onRightNavigationBarClick",value:void 0},{kind:"field",decorators:[Nr()],key:"offRightNavigationBarClick",value:void 0},{kind:"method",key:"setup",value:function(){var e=this;Jr(nt(n.prototype),"setup",this).call(this),this.onMethod("onMainNavRightItemClick",(function(t){e.emitter.emit(Kr,t)})),this.onMethod("onNavigationBarClick",(function(t){e.emitter.emit(Gr,t)})),this.onMethod("onLeftNavigationBarClick",(function(t){e.emitter.emit(Qr,t)})),this.onMethod("onRightNavigationBarClick",(function(t){e.emitter.emit(Zr,t)})),this.onMethod("resolveNavigationBarConfig",(function(){e.invokeMethod("resolveNavigationBarConfig",{navigationBarConfig:e._titleConfig})}))}},{kind:"method",key:"composeSafariCache",value:function(){return{navigationBarConfig:this._titleConfig}}}]}}),Br),$r=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"getUserInfo",value:function(){return this.createInvokeMethodApi("getUserInfo")}},{kind:"field",decorators:[Nr()],key:"getUserCustomAttr",value:function(){return this.createInvokeMethodApi("getUserCustomAttr")}}]}}),Br),Xr=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"method",decorators:[Nr()],key:"showModal",value:function(e){void 0===e&&(e={});e=Object.assign({},{title:"",content:"",confirmText:"",cancelText:"",showCancel:!0,confirmColor:"#3CC51F",cancelColor:"#000000"},e),this.beforeInvoke("showModal",e,{title:"String",content:"String",confirmText:"String",cancelText:"String",confirmColor:"String",cancelColor:"String"},!0)&&this.invokeMethod("showModal",e)}}]}}),Br),eo=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"enterBot",value:function(){return this.createInvokeMethodApi("enterBot")}}]}}),Br),to=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"enterChat",value:function(){return this.createInvokeMethodApi("enterChat")}},{kind:"field",decorators:[Nr()],key:"toggleChat",value:function(){return this.createInvokeMethodApi("toggleChat",{checkParams:{openChatId:""}})}}]}}),eo),no=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"method",decorators:[Nr()],key:"enterChat",value:function(e){void 0===e&&(e={});var t=e,n=t.openid,r=t.openChatId;n||r?(((null==void 0?void 0:undefined.agent)||{}).isEnterChatStandardizeEnabled||n&&r&&delete e.openChatId,void 0===e.needBadge&&(e.needBadge=!0),this.invokeMethod("enterChat",e)):this.beforeInvokeFail("enterChat",e,"no valid id",{errno:Nt,errString:_t()})}}]}}),eo),ro=function(e){function t(){return e.apply(this,arguments)||this}return _(t,e),l(t)}(Br),oo=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"enterProfile",value:function(){return this.createInvokeMethodApi("enterProfile",{checkParams:{openid:""}})}}]}}),ro),io=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"method",decorators:[Nr()],key:"enterProfile",value:function(e){void 0===e&&(e={}),void 0===e.left&&(e.left=0),void 0===e.top&&(e.top=0);this.beforeInvoke("enterProfile",e,{openid:"String",left:0,top:0})&&this.invokeMethod("enterProfile",e)}}]}}),ro),ao=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"startPasswordVerify",value:function(){return this.createInvokeMethodApi("startPasswordVerify")}}]}}),Br),so=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"method",decorators:[Nr()],key:"chooseContact",value:function(e){void 0===e&&(e={}),void 0===e.externalContact&&(e.externalContact=!0),void 0===e.multi&&(e.multi=!0),void 0===e.ignore&&(e.ignore=!1),e.multi=Boolean(e.multi),!1===e.multi&&(e.choosenIds=null);var t=!1;null!==e.choosenIds&&null!==e.disableChosenIds&&e.choosenIds instanceof Array&&e.disableChosenIds instanceof Array&&e.choosenIds.forEach((function(n){-1!==e.disableChosenIds.indexOf(n)&&(t=!0)})),!1===t?this.invokeMethod("chooseContact",e):Mr("chooseContact",e,"choosenIds and disableIds intersect",{errno:Bt,errString:St()})}},{kind:"method",decorators:[Nr()],key:"chooseChat",value:function(e){void 0===e&&(e={}),void 0===e.externalChat&&(e.externalChat=!0),void 0===e.allowCreateGroup&&(e.allowCreateGroup=!0),void 0===e.ignoreSelf&&(e.ignoreSelf=!1),void 0===e.ignoreBot&&(e.ignoreBot=!1),void 0===e.multiSelect&&(e.multiSelect=!1),void 0===e.selectType&&(e.selectType=0);var t=function(e){var t,n,r=e.chosenOpenIds,o=e.chosenOpenChatIds,i=co(r),a=co(o);return(i&&null!=(t=null==r?void 0:r.length)?t:0)+(a&&null!=(n=null==o?void 0:o.length)?n:0)}(e);t>0&&(e.multiSelect=!0),t>10?Mr("chooseChat",e,"Total count of chosenOpenIds and chosenOpenChatIds exceeds limit, max 10 allowed.",{errno:Dt,errString:Mt()}):this.invokeMethod("chooseChat",e)}}]}}),Br);function co(e){return Array.isArray(e)&&e.length>0}var uo,lo=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"filePicker",value:function(){return this.createInvokeMethodApi("filePicker")}},{kind:"field",decorators:[Nr()],key:"openDocument",value:function(){return this.createInvokeMethodApi("openDocument",{addStandardError:!0,checkParams:{filePath:"String"}})}},{kind:"method",decorators:[Nr()],key:"docsPicker",value:function(e){var t=e.maxNum;void 0===t||t>0?this.invokeMethod("docsPicker",e):Ht("docsPicker",e,"no valid maxNum",{errString:kt("maxNum"),errno:Ot})}}]}}),Br),fo=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"saveFileAs",value:function(){return this.createInvokeMethodApi("saveFileAs",{checkParams:{filePath:"String"}})}}]}}),Br),ho=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"getHostLaunchQuery",value:function(){return this.createInvokeMethodApi("getHostLaunchQuery")}},{kind:"field",decorators:[Nr({sync:!0})],key:"getHostLaunchQuerySync",value:function(){return null}}]}}),Br),po=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"getSecurityInfo",value:function(){return this.createInvokeMethodApi("getSecurityInfo")}},{kind:"field",decorators:[Nr()],key:"getSecurityEnv",value:function(){return this.createInvokeMethodApi("getSecurityEnv")}}]}}),Br),vo=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",key:"_leaveConfirmConfig",value:function(){return{}}},{kind:"method",decorators:[Nr()],key:"enableLeaveConfirm",value:function(e){var t=this;void 0===e&&(e={});e=Object.assign({},{effect:["back","close"],title:"",content:"",confirmText:"",cancelText:"",confirmColor:"#3CC51F",cancelColor:"#000000"},e);var n=function(n,r){return e[n].replace(/[^\u0000-\u00ff]/g,"aa").length>r&&(t.beforeInvokeFail("enableLeaveConfirm",e,"invalid parameter: "+n+" length can not exceed "+r+" characters"),!0)};this.beforeInvoke("enableLeaveConfirm",e,{effect:[],title:"String",content:"String",confirmText:"String",cancelText:"String",confirmColor:"String",cancelColor:"String"})&&(0===e.effect.length?this.beforeInvokeFail("enableLeaveConfirm",e,"invalid parameter: effect length can not be empty"):e.title||e.content?n("title",16)||n("content",80)||n("confirmText",8)||n("cancelText",8)||this.invokeMethod("enableLeaveConfirm",e,{beforeSuccess:function(){t._leaveConfirmConfig=cn(e)}}):this.beforeInvokeFail("enableLeaveConfirm",e,"invalid parameter: title and content can not be empty at the same time"))}},{kind:"field",decorators:[Nr()],key:"disableLeaveConfirm",value:function(){var e=this;return this.createInvokeMethodApi("disableLeaveConfirm",{beforeSuccess:function(){e._leaveConfirmConfig={}}})}},{kind:"field",decorators:[Nr()],key:"LeaveConfirmCancel",value:function(){return this.createNativeEventApi("onLeaveConfirmCancel")}},{kind:"field",key:"composeSafariCache",value:function(){var e=this;return function(){return{leaveConfirmConfig:e._leaveConfirmConfig}}}}]}}),Br),go=function(){function e(){}var t=e.prototype;return t._reportUndefinedDefaultCode=function(){var e={domain:"js.open_platform.gadget",code:1e4,level:ne.warn,message:"undefined_default_code"};return new Pe({name:"undefined_default_code",code:e})},t._buildParams=function(e,t){var n;return void 0===t&&(t={}),(n={}).biz_event_name=e,n.biz_data=t,n.common_data={},n},t.report=function(e,t,n,r){void 0===n&&(n={}),e||this._reportUndefinedDefaultCode();var o=new Pe({name:"op_biz_event",code:new xe(t)});null!=r&&r.traceId&&o.tracing(r.traceId);var i=this._buildParams(e,n);return o.addMap(i).flush()},l(e)}(),mo=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",key:"ins",value:void 0},{kind:"field",decorators:[Nr()],key:"opmonitor",value:function(){var e=this;return function(){return e.ins||(e.ins=new go),e.ins}}}]}}),Br),yo=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"closeWindow",value:function(){return this.createInvokeMethodApi("closeWindow")}}]}}),Br),ko=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",key:"metaConfig",value:void 0},{kind:"field",decorators:[Nr()],key:"updateMeta",value:function(){var e=this;return function(){var t=document.querySelectorAll("meta[lk-config]"),n=new Map;t.forEach((function(e){var t,r,o=e.getAttribute("name"),i=null!=(t=e.getAttribute("content"))?t:"",a=null!=(r=e.getAttribute("lk-config"))?r:"";if(o){var s={name:o,content:i,"lk-config":a};n.set(o,s)}}));var r=Array.from(n.values());e.metaConfig=r,e._updateMeta({metas:r})}}},{kind:"field",key:"_updateMeta",value:function(){return this.createInvokeMethodApi("updateMeta")}},{kind:"field",key:"composeSafariCache",value:function(){var e=this;return function(){return{meta:e.metaConfig}}}}]}}),Br),bo=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"setAPIConfig",value:function(){return this.createInvokeMethodApi("setAPIConfig")}}]}}),Br),wo=mr(null,(function(e,t){var n=function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t);return{F:n,d:[{kind:"field",key:"eventMap",value:function(){return{}}},{kind:"field",decorators:[Nr()],key:"invokeCustomAPI",value:function(){return this.createInvokeMethodApi("invokeCustomAPI")}},{kind:"method",decorators:[Nr({})],key:"addCustomEventListener",value:function(e,t){this.eventMap[e]||(this.eventMap[e]=this.createEventApi(e)),this.eventMap[e].on(t)}},{kind:"method",decorators:[Nr({})],key:"removeCustomEventListener",value:function(e,t){var n;null==(n=this.eventMap[e])||null==n.off||n.off(t)}},{kind:"method",key:"setup",value:function(){var e=this;Jr(nt(n.prototype),"setup",this).call(this),this.onMethod("fireCustomEvent",(function(t){var n=t.eventName,r=t.data;e.emitter.emit(n,r)}))}}]}}),Br),So=n((function(e,t){!function(t){var n=Object.hasOwnProperty,r=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},o="object"==typeof process&&"function"==typeof process.nextTick,i="function"==typeof Symbol,a="object"==typeof Reflect,s="function"==typeof setImmediate?setImmediate:setTimeout,c=i?a&&"function"==typeof Reflect.ownKeys?Reflect.ownKeys:function(e){var t=Object.getOwnPropertyNames(e);return t.push.apply(t,Object.getOwnPropertySymbols(e)),t}:Object.keys;function u(){this._events={},this._conf&&l.call(this,this._conf)}function l(e){e&&(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),e.maxListeners!==t&&(this._maxListeners=e.maxListeners),e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this._newListener=e.newListener),e.removeListener&&(this._removeListener=e.removeListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),e.ignoreErrors&&(this.ignoreErrors=e.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function d(e,t){var n="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(n+=" Event name: "+t+"."),"undefined"!=typeof process&&process.emitWarning){var r=new Error(n);r.name="MaxListenersExceededWarning",r.emitter=this,r.count=e,process.emitWarning(r)}else console.error(n),console.trace&&console.trace()}var f=function(e,t,n){var r=arguments.length;switch(r){case 0:return[];case 1:return[e];case 2:return[e,t];case 3:return[e,t,n];default:for(var o=new Array(r);r--;)o[r]=arguments[r];return o}};function h(e,n){for(var r={},o=e.length,i=n?value.length:0,a=0;a<o;a++)r[e[a]]=a<i?n[a]:t;return r}function p(e,t,n){var r,o;if(this._emitter=e,this._target=t,this._listeners={},this._listenersCount=0,(n.on||n.off)&&(r=n.on,o=n.off),t.addEventListener?(r=t.addEventListener,o=t.removeEventListener):t.addListener?(r=t.addListener,o=t.removeListener):t.on&&(r=t.on,o=t.off),!r&&!o)throw Error("target does not implement any known event API");if("function"!=typeof r)throw TypeError("on method must be a function");if("function"!=typeof o)throw TypeError("off method must be a function");this._on=r,this._off=o;var i=e._observers;i?i.push(this):e._observers=[this]}function v(e,r,o,i){var a=Object.assign({},r);if(!e)return a;if("object"!=typeof e)throw TypeError("options must be an object");var s,c,u,l=Object.keys(e),d=l.length;function f(e){throw Error('Invalid "'+s+'" option value'+(e?". Reason: "+e:""))}for(var h=0;h<d;h++){if(s=l[h],!i&&!n.call(r,s))throw Error('Unknown "'+s+'" option');(c=e[s])!==t&&(u=o[s],a[s]=u?u(c,f):c)}return a}function g(e,t){return"function"==typeof e&&e.hasOwnProperty("prototype")||t("value must be a constructor"),e}function m(e){var t="value must be type of "+e.join("|"),n=e.length,r=e[0],o=e[1];return 1===n?function(e,n){if(typeof e===r)return e;n(t)}:2===n?function(e,n){var i=typeof e;if(i===r||i===o)return e;n(t)}:function(r,o){for(var i=typeof r,a=n;a-- >0;)if(i===e[a])return r;o(t)}}Object.assign(p.prototype,{subscribe:function(e,t,n){var r=this,o=this._target,i=this._emitter,a=this._listeners,s=function(){var r=f.apply(null,arguments),a={data:r,name:t,original:e};if(n){var s=n.call(o,a);!1!==s&&i.emit.apply(i,[a.name].concat(r))}else i.emit.apply(i,[t].concat(r))};if(a[e])throw Error("Event '"+e+"' is already listening");this._listenersCount++,i._newListener&&i._removeListener&&!r._onNewListener?(this._onNewListener=function(n){n===t&&null===a[e]&&(a[e]=s,r._on.call(o,e,s))},i.on("newListener",this._onNewListener),this._onRemoveListener=function(n){n===t&&!i.hasListeners(n)&&a[e]&&(a[e]=null,r._off.call(o,e,s))},a[e]=null,i.on("removeListener",this._onRemoveListener)):(a[e]=s,r._on.call(o,e,s))},unsubscribe:function(e){var t,n,r,o=this,i=this._listeners,a=this._emitter,s=this._off,u=this._target;if(e&&"string"!=typeof e)throw TypeError("event must be a string");function l(){o._onNewListener&&(a.off("newListener",o._onNewListener),a.off("removeListener",o._onRemoveListener),o._onNewListener=null,o._onRemoveListener=null);var e=w.call(a,o);a._observers.splice(e,1)}if(e){if(!(t=i[e]))return;s.call(u,e,t),delete i[e],--this._listenersCount||l()}else{for(r=(n=c(i)).length;r-- >0;)e=n[r],s.call(u,e,i[e]);this._listeners={},this._listenersCount=0,l()}}});var y=m(["function"]),k=m(["object","function"]);function b(e,t,n){var r,o,i,a=0,s=new e((function(c,u,l){function d(){o&&(o=null),a&&(clearTimeout(a),a=0)}n=v(n,{timeout:0,overload:!1},{timeout:function(e,t){return("number"!=typeof(e*=1)||e<0||!Number.isFinite(e))&&t("timeout must be a positive number"),e}}),r=!n.overload&&"function"==typeof e.prototype.cancel&&"function"==typeof l;var f=function(e){d(),c(e)},h=function(e){d(),u(e)};r?t(f,h,l):(o=[function(e){h(e||Error("canceled"))}],t(f,h,(function(e){if(i)throw Error("Unable to subscribe on cancel event asynchronously");if("function"!=typeof e)throw TypeError("onCancel callback must be a function");o.push(e)})),i=!0),n.timeout>0&&(a=setTimeout((function(){var e=Error("timeout");e.code="ETIMEDOUT",a=0,s.cancel(e),u(e)}),n.timeout))}));return r||(s.cancel=function(e){if(o){for(var t=o.length,n=1;n<t;n++)o[n](e);o[0](e),o=null}}),s}function w(e){var t=this._observers;if(!t)return-1;for(var n=t.length,r=0;r<n;r++)if(t[r]._target===e)return r;return-1}function S(e,t,n,r,o){if(!n)return null;if(0===r){var i=typeof t;if("string"===i){var a,s,u=0,l=0,d=this.delimiter,f=d.length;if(-1!==(s=t.indexOf(d))){a=new Array(5);do{a[u++]=t.slice(l,s),l=s+f}while(-1!==(s=t.indexOf(d,l)));a[u++]=t.slice(l),t=a,o=u}else t=[t],o=1}else"object"===i?o=t.length:(t=[t],o=1)}var h,p,v,g,m,y,k,b=null,w=t[r],_=t[r+1];if(r===o&&n._listeners)return"function"==typeof n._listeners?(e&&e.push(n._listeners),[n]):(e&&e.push.apply(e,n._listeners),[n]);if("*"===w){for(s=(y=c(n)).length;s-- >0;)"_listeners"!==(h=y[s])&&(k=S(e,t,n[h],r+1,o))&&(b?b.push.apply(b,k):b=k);return b}if("**"===w){for((m=r+1===o||r+2===o&&"*"===_)&&n._listeners&&(b=S(e,t,n,o,o)),s=(y=c(n)).length;s-- >0;)"_listeners"!==(h=y[s])&&("*"===h||"**"===h?(n[h]._listeners&&!m&&(k=S(e,t,n[h],o,o))&&(b?b.push.apply(b,k):b=k),k=S(e,t,n[h],r,o)):k=S(e,t,n[h],h===_?r+2:r,o),k&&(b?b.push.apply(b,k):b=k));return b}if(n[w]&&(b=S(e,t,n[w],r+1,o)),(p=n["*"])&&S(e,t,p,r+1,o),v=n["**"])if(r<o)for(v._listeners&&S(e,t,v,o,o),s=(y=c(v)).length;s-- >0;)"_listeners"!==(h=y[s])&&(h===_?S(e,t,v[h],r+2,o):h===w?S(e,t,v[h],r+1,o):((g={})[h]=v[h],S(e,t,{"**":g},r+1,o)));else v._listeners?S(e,t,v,o,o):v["*"]&&v["*"]._listeners&&S(e,t,v["*"],o,o);return b}function _(e,t,n){var r,o,i=0,a=0,s=this.delimiter,c=s.length;if("string"==typeof e)if(-1!==(r=e.indexOf(s))){o=new Array(5);do{o[i++]=e.slice(a,r),a=r+c}while(-1!==(r=e.indexOf(s,a)));o[i++]=e.slice(a)}else o=[e],i=1;else o=e,i=e.length;if(i>1)for(r=0;r+1<i;r++)if("**"===o[r]&&"**"===o[r+1])return;var u,l=this.listenerTree;for(r=0;r<i;r++)if(l=l[u=o[r]]||(l[u]={}),r===i-1)return l._listeners?("function"==typeof l._listeners&&(l._listeners=[l._listeners]),n?l._listeners.unshift(t):l._listeners.push(t),!l._listeners.warned&&this._maxListeners>0&&l._listeners.length>this._maxListeners&&(l._listeners.warned=!0,d.call(this,l._listeners.length,u))):l._listeners=t,!0;return!0}function C(e,t,n,r){for(var o,i,a,s,u=c(e),l=u.length,d=e._listeners;l-- >0;)o=e[i=u[l]],a="_listeners"===i?n:n?n.concat(i):[i],s=r||"symbol"==typeof i,d&&t.push(s?a:a.join(this.delimiter)),"object"==typeof o&&C.call(this,o,t,a,s);return t}function A(e){for(var t,n,r,o=c(e),i=o.length;i-- >0;)(t=e[n=o[i]])&&(r=!0,"_listeners"===n||A(t)||delete e[n]);return r}function I(e,t,n){this.emitter=e,this.event=t,this.listener=n}function M(e,n,r){if(!0===r)a=!0;else if(!1===r)i=!0;else{if(!r||"object"!=typeof r)throw TypeError("options should be an object or true");var i=r.async,a=r.promisify,c=r.nextTick,u=r.objectify}if(i||c||a){var l=n,d=n._origin||n;if(c&&!o)throw Error("process.nextTick is not supported");a===t&&(a="AsyncFunction"===n.constructor.name),(n=function(){var e=arguments,t=this,n=this.event;return a?c?Promise.resolve():new Promise((function(e){s(e)})).then((function(){return t.event=n,l.apply(t,e)})):(c?process.nextTick:s)((function(){t.event=n,l.apply(t,e)}))})._async=!0,n._origin=d}return[n,u?new I(this,e,n):this]}function E(e){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,l.call(this,e)}I.prototype.off=function(){return this.emitter.off(this.event,this.listener),this},E.EventEmitter2=E,E.prototype.listenTo=function(e,n,o){if("object"!=typeof e)throw TypeError("target musts be an object");var i=this;function a(t){if("object"!=typeof t)throw TypeError("events must be an object");var n,r=o.reducers,a=w.call(i,e);n=-1===a?new p(i,e,o):i._observers[a];for(var s,u=c(t),l=u.length,d="function"==typeof r,f=0;f<l;f++)s=u[f],n.subscribe(s,t[s]||s,d?r:r&&r[s])}return o=v(o,{on:t,off:t,reducers:t},{on:y,off:y,reducers:k}),r(n)?a(h(n)):a("string"==typeof n?h(n.split(/\s+/)):n),this},E.prototype.stopListeningTo=function(e,t){var n=this._observers;if(!n)return!1;var r,o=n.length,i=!1;if(e&&"object"!=typeof e)throw TypeError("target should be an object");for(;o-- >0;)r=n[o],e&&r._target!==e||(r.unsubscribe(t),i=!0);return i},E.prototype.delimiter=".",E.prototype.setMaxListeners=function(e){e!==t&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},E.prototype.getMaxListeners=function(){return this._maxListeners},E.prototype.event="",E.prototype.once=function(e,t,n){return this._once(e,t,!1,n)},E.prototype.prependOnceListener=function(e,t,n){return this._once(e,t,!0,n)},E.prototype._once=function(e,t,n,r){return this._many(e,1,t,n,r)},E.prototype.many=function(e,t,n,r){return this._many(e,t,n,!1,r)},E.prototype.prependMany=function(e,t,n,r){return this._many(e,t,n,!0,r)},E.prototype._many=function(e,t,n,r,o){var i=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");function a(){return 0==--t&&i.off(e,a),n.apply(this,arguments)}return a._origin=n,this._on(e,a,r,o)},E.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||u.call(this);var e,t,n,r,o,a,s=arguments[0],c=this.wildcard;if("newListener"===s&&!this._newListener&&!this._events.newListener)return!1;if(c&&(e=s,"newListener"!==s&&"removeListener"!==s&&"object"==typeof s)){if(n=s.length,i)for(r=0;r<n;r++)if("symbol"==typeof s[r]){a=!0;break}a||(s=s.join(this.delimiter))}var l,d=arguments.length;if(this._all&&this._all.length)for(r=0,n=(l=this._all.slice()).length;r<n;r++)switch(this.event=s,d){case 1:l[r].call(this,s);break;case 2:l[r].call(this,s,arguments[1]);break;case 3:l[r].call(this,s,arguments[1],arguments[2]);break;default:l[r].apply(this,arguments)}if(c)l=[],S.call(this,l,e,this.listenerTree,0,n);else{if("function"==typeof(l=this._events[s])){switch(this.event=s,d){case 1:l.call(this);break;case 2:l.call(this,arguments[1]);break;case 3:l.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(d-1),o=1;o<d;o++)t[o-1]=arguments[o];l.apply(this,t)}return!0}l&&(l=l.slice())}if(l&&l.length){if(d>3)for(t=new Array(d-1),o=1;o<d;o++)t[o-1]=arguments[o];for(r=0,n=l.length;r<n;r++)switch(this.event=s,d){case 1:l[r].call(this);break;case 2:l[r].call(this,arguments[1]);break;case 3:l[r].call(this,arguments[1],arguments[2]);break;default:l[r].apply(this,t)}return!0}if(!this.ignoreErrors&&!this._all&&"error"===s)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},E.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||u.call(this);var e,t,n,r,o,a,s=arguments[0],c=this.wildcard;if("newListener"===s&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(c&&(e=s,"newListener"!==s&&"removeListener"!==s&&"object"==typeof s)){if(r=s.length,i)for(o=0;o<r;o++)if("symbol"==typeof s[o]){t=!0;break}t||(s=s.join(this.delimiter))}var l,d=[],f=arguments.length;if(this._all)for(o=0,r=this._all.length;o<r;o++)switch(this.event=s,f){case 1:d.push(this._all[o].call(this,s));break;case 2:d.push(this._all[o].call(this,s,arguments[1]));break;case 3:d.push(this._all[o].call(this,s,arguments[1],arguments[2]));break;default:d.push(this._all[o].apply(this,arguments))}if(c?(l=[],S.call(this,l,e,this.listenerTree,0)):l=this._events[s],"function"==typeof l)switch(this.event=s,f){case 1:d.push(l.call(this));break;case 2:d.push(l.call(this,arguments[1]));break;case 3:d.push(l.call(this,arguments[1],arguments[2]));break;default:for(n=new Array(f-1),a=1;a<f;a++)n[a-1]=arguments[a];d.push(l.apply(this,n))}else if(l&&l.length){if(l=l.slice(),f>3)for(n=new Array(f-1),a=1;a<f;a++)n[a-1]=arguments[a];for(o=0,r=l.length;o<r;o++)switch(this.event=s,f){case 1:d.push(l[o].call(this));break;case 2:d.push(l[o].call(this,arguments[1]));break;case 3:d.push(l[o].call(this,arguments[1],arguments[2]));break;default:d.push(l[o].apply(this,n))}}else if(!this.ignoreErrors&&!this._all&&"error"===s)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(d)},E.prototype.on=function(e,t,n){return this._on(e,t,!1,n)},E.prototype.prependListener=function(e,t,n){return this._on(e,t,!0,n)},E.prototype.onAny=function(e){return this._onAny(e,!1)},E.prototype.prependAny=function(e){return this._onAny(e,!0)},E.prototype.addListener=E.prototype.on,E.prototype._onAny=function(e,t){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},E.prototype._on=function(e,n,r,o){if("function"==typeof e)return this._onAny(e,n),this;if("function"!=typeof n)throw new Error("on only accepts instances of Function");this._events||u.call(this);var i,a=this;return o!==t&&(n=(i=M.call(this,e,n,o))[0],a=i[1]),this._newListener&&this.emit("newListener",e,n),this.wildcard?(_.call(this,e,n,r),a):(this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),r?this._events[e].unshift(n):this._events[e].push(n),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,d.call(this,this._events[e].length,e))):this._events[e]=n,a)},E.prototype.off=function(e,t){if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");var n,o=[];if(this.wildcard){var i="string"==typeof e?e.split(this.delimiter):e.slice();if(!(o=S.call(this,null,i,this.listenerTree,0)))return this}else{if(!this._events[e])return this;n=this._events[e],o.push({_listeners:n})}for(var a=0;a<o.length;a++){var s=o[a];if(n=s._listeners,r(n)){for(var c=-1,u=0,l=n.length;u<l;u++)if(n[u]===t||n[u].listener&&n[u].listener===t||n[u]._origin&&n[u]._origin===t){c=u;break}if(c<0)continue;return this.wildcard?s._listeners.splice(c,1):this._events[e].splice(c,1),0===n.length&&(this.wildcard?delete s._listeners:delete this._events[e]),this._removeListener&&this.emit("removeListener",e,t),this}(n===t||n.listener&&n.listener===t||n._origin&&n._origin===t)&&(this.wildcard?delete s._listeners:delete this._events[e],this._removeListener&&this.emit("removeListener",e,t))}return this.listenerTree&&A(this.listenerTree),this},E.prototype.offAny=function(e){var t,n=0,r=0;if(e&&this._all&&this._all.length>0){for(n=0,r=(t=this._all).length;n<r;n++)if(e===t[n])return t.splice(n,1),this._removeListener&&this.emit("removeListenerAny",e),this}else{if(t=this._all,this._removeListener)for(n=0,r=t.length;n<r;n++)this.emit("removeListenerAny",t[n]);this._all=[]}return this},E.prototype.removeListener=E.prototype.off,E.prototype.removeAllListeners=function(e){if(e===t)return!this._events||u.call(this),this;if(this.wildcard){var n,r=S.call(this,null,e,this.listenerTree,0);if(!r)return this;for(n=0;n<r.length;n++)r[n]._listeners=null;this.listenerTree&&A(this.listenerTree)}else this._events&&(this._events[e]=null);return this},E.prototype.listeners=function(e){var n,r,o,i,a,s=this._events;if(e===t){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!s)return[];for(i=(n=c(s)).length,o=[];i-- >0;)"function"==typeof(r=s[n[i]])?o.push(r):o.push.apply(o,r);return o}if(this.wildcard){if(!(a=this.listenerTree))return[];var u=[],l="string"==typeof e?e.split(this.delimiter):e.slice();return S.call(this,u,l,a,0),u}return s&&(r=s[e])?"function"==typeof r?[r]:r:[]},E.prototype.eventNames=function(e){var t=this._events;return this.wildcard?C.call(this,this.listenerTree,[],null,e):t?c(t):[]},E.prototype.listenerCount=function(e){return this.listeners(e).length},E.prototype.hasListeners=function(e){if(this.wildcard){var n=[],r="string"==typeof e?e.split(this.delimiter):e.slice();return S.call(this,n,r,this.listenerTree,0),n.length>0}var o=this._events,i=this._all;return!!(i&&i.length||o&&(e===t?c(o).length:o[e]))},E.prototype.listenersAny=function(){return this._all?this._all:[]},E.prototype.waitFor=function(e,n){var r=this,o=typeof n;return"number"===o?n={timeout:n}:"function"===o&&(n={filter:n}),b((n=v(n,{timeout:0,filter:t,handleError:!1,Promise:Promise,overload:!1},{filter:y,Promise:g})).Promise,(function(t,o,i){function a(){var i=n.filter;if(!i||i.apply(r,arguments))if(r.off(e,a),n.handleError){var s=arguments[0];s?o(s):t(f.apply(null,arguments).slice(1))}else t(f.apply(null,arguments))}i((function(){r.off(e,a)})),r._on(e,a,!1)}),{timeout:n.timeout,overload:n.overload})};var x=E.prototype;Object.defineProperties(E,{defaultMaxListeners:{get:function(){return x._maxListeners},set:function(e){if("number"!=typeof e||e<0||Number.isNaN(e))throw TypeError("n must be a non-negative number");x._maxListeners=e},enumerable:!0},once:{value:function(e,t,n){return b((n=v(n,{Promise:Promise,timeout:0,overload:!1},{Promise:g})).Promise,(function(n,r,o){var i;if("function"==typeof e.addEventListener)return i=function(){n(f.apply(null,arguments))},o((function(){e.removeEventListener(t,i)})),void e.addEventListener(t,i,{once:!0});var a,s=function(){a&&e.removeListener("error",a),n(f.apply(null,arguments))};"error"!==t&&(a=function(n){e.removeListener(t,s),r(n)},e.once("error",a)),o((function(){a&&e.removeListener("error",a),e.removeListener(t,s)})),e.once(t,s)}),{timeout:n.timeout,overload:n.overload})},writable:!0,configurable:!0}}),Object.defineProperties(x,{_maxListeners:{value:10,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),e.exports=E}()}));!function(e){e[e.Cancelled=1000001]="Cancelled",e[e.InvalidParam=104]="InvalidParam",e[e.InternalError=102]="InternalError"}(uo||(uo={}));
/*!
	 * content-disposition
	 * Copyright(c) 2014-2017 Douglas Christopher Wilson
	 * MIT Licensed
	 */
var _o=/^([!#$%&'*+.0-9A-Z^_`a-z|~-]+)[\x09\x20]*(?:$|;)/,Co=/;[\x09\x20]*([!#$%&'*+.0-9A-Z^_`a-z|~-]+)[\x09\x20]*=[\x09\x20]*("(?:[\x20!\x23-\x5b\x5d-\x7e\x80-\xff]|\\[\x20-\x7e])*"|[!#$%&'*+.0-9A-Z^_`a-z|~-]+)[\x09\x20]*/g;var Ao=/^([A-Za-z0-9!#$%&+\-^_`{}~]+)'(?:[A-Za-z]{2,3}(?:-[A-Za-z]{3}){0,3}|[A-Za-z]{4,8}|)'((?:%[0-9A-Fa-f]{2}|[A-Za-z0-9!#$&+.^_`|~-])+)$/,Io=/%([0-9A-Fa-f]{2})/g;function Mo(e){var t=Ao.exec(e);if(!t)throw new TypeError("invalid extended field value");var n,r=t[1].toLowerCase(),o=t[2].replace(Io,Eo);switch(r){case"iso-8859-1":n=String(o).replace(xo,"?");break;case"utf-8":n=new TextDecoder("utf-8").decode((new TextEncoder).encode(o));break;default:throw new TypeError("unsupported charset in extended field")}return n}function Eo(e,t){return String.fromCharCode(parseInt(t,16))}var xo=/[^\x20-\x7e\xa0-\xff]/g;function Po(){return""+(new Date).getTime()+function(e){void 0===e&&(e=6);for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="",r=t.length,o=0;o<e;o++)n+=t.charAt(Math.floor(Math.random()*r));return n}()}function To(e){var t,n,r=null==(t=new URL(e).pathname)?void 0:t.split("/");return r&&r.length>0&&null!=(n=r.pop())?n:null}function Fo(e,t){var n,r=t.get("content-disposition");if(r)try{var o=function(e){if(!e||"string"!=typeof e)throw new TypeError("argument string is required");var t=_o.exec(e);if(!t)throw new TypeError("invalid type format");var n,r,o=t[0].length,i=t[1].toLowerCase(),a=[],s={};for(o=Co.lastIndex=";"===t[0].substr(-1)?o-1:o;t=Co.exec(e);){if(t.index!==o)throw new TypeError("invalid parameter format");if(o+=t[0].length,n=t[1].toLowerCase(),r=t[2],-1!==a.indexOf(n))throw new TypeError("invalid duplicate parameter");a.push(n),n.indexOf("*")+1!==n.length?"string"!=typeof s[n]&&('"'===r[0]&&(r=r.substr(1,r.length-2).replace(/\\([\u0000-\u007f])/g,"$1")),s[n]=r):(n=n.slice(0,-1),r=Mo(r),s[n]=r)}if(-1!==o&&o!==e.length)throw new TypeError("invalid parameter format");return{type:i,params:s}}(r).params.fileName;if(o)return o}catch(e){B.error("parseContentDisposition error:",e)}var i=t.get("content-type");if(i){var a=function(e){return e.includes("image/jpeg")?"jpg":e.includes("text/html")?"html":e.includes("text/plain")?"txt":e.includes("text/xml")||e.includes("application/xml")?"xml":e.includes("image/jpx")?"jpx":e.includes("video/mpeg")?"mpeg":null}(i);if(a)return Po()+"."+a}return null!=(n=To(e))?n:Po()}function Lo(e){switch(e.toLowerCase()){case"txt":return"text/plain";case"html":return"text/html";case"css":return"text/css";case"js":return"application/javascript";case"json":return"application/json";case"xml":return"application/xml";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"gif":return"image/gif";case"pdf":return"application/pdf";default:return"application/octet-stream"}}var Oo=function(){function e(t,n,r,o,i){var a=this;if(void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===o&&(o="downloadFile"),void 0===i&&(i={}),this.requestVersion="v2",this.requestId=void 0,this.taskId=an(),this.bizInvokeTime=(new Date).valueOf(),this.illegal=!1,this.abortController=void 0,this.useFetchImpl=void 0,this.abort=function(){a.illegal||(a.useFetchImpl?a.abortController?a.abortController.abort():B.error("abortController is undefined"):wr("downloadFileAbort",{payload:JSON.stringify({downloadTaskId:a.taskId})}))},this.onProgressUpdate=function(t){a.illegal||"function"!=typeof t||e.eventNexus.on(a.taskId,(function(e){Xt(t,"at downloadTask.onProgressUpdate callback function")(e)}))},this.requestId=this.taskId,this.useFetchImpl=r&&void 0!==fetch,n)this.illegal=!0;else{var s=Object.assign({},t,{taskId:this.taskId});this.useFetchImpl?this.fetchInH5Context(s):wr(o,Object.assign({payload:JSON.stringify(Object.assign({},t,{downloadTaskId:this.taskId}))},i,{fail:e.callBackWrapper(s,this.bizInvokeTime,"fail"),success:e.callBackWrapper(s,this.bizInvokeTime,"success")}))}}return e.reportResult=function(e,t){void 0===t&&(t="downloadFile");var n=e.errCode===uo.Cancelled||e.errMsg.toLocaleLowerCase().startsWith(t+":fail canceled"),r=n?Qe:Ge,o=n?"cancel":e.resultType,i=Date.now()-e.bizInvokeTime,a={request_version:"v2",request_trace:e.taskId,request_url:"string"==typeof e.url?ln(e.url):J(e.url),request_biz_invoke_time:e.bizInvokeTime,error_code:e.errCode?e.errCode:0,error_msg:e.errMsg||"",errno:e.errno,err_string:e.errString,duration:i,result_type:o,api_name:t};et(Be,r).setPlatform("TeaSlardar").addMap(a).flush()},e.prototype.fetchInH5Context=function(){var t=r(a.mark((function t(n){var r,o,i,s,c,u=this;return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.abortController=new AbortController,t.prev=1,t.next=4,fetch(n.url,{method:n.method,headers:n.header,signal:this.abortController.signal});case 4:return o=t.sent,t.next=7,(a=o.headers.get("content-type"))&&(a.includes("text/plain")||a.includes("text/html")||a.includes("text/css")||a.includes("text/javascript")||a.includes("application/json")||a.includes("application/xml")||a.includes("text/xml")||a.includes("application/xhtml+xml")||a.includes("text/csv")||a.includes("text/markdown"))?o.text():o.arrayBuffer();case 7:i=t.sent,s=o.headers.get("content-length"),wr("writeFile",{filePath:c=null!=(r=n.filePath)?r:"ttfile://temp/"+Fo(n.url,o.headers),data:i,internalSupportTemp:!0,success:function(t){e.eventNexus.emit(u.taskId,{progress:100,totalBytesWritten:s,totalBytesExpectedToWrite:s}),t.payload=JSON.stringify({tempFilePath:c,statusCode:o.status}),e.callBackWrapper(n,u.bizInvokeTime,"success")(t)},fail:e.callBackWrapper(n,this.bizInvokeTime,"fail")}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),Mr("downloadFile",n,Et(),{errno:jt,errString:JSON.stringify(t.t0)});case 16:case"end":return t.stop()}var a}),t,this,[[1,13]])})));return function(e){return t.apply(this,arguments)}}(),e.callBackWrapper=function(t,n,r){return function(o){var i=t.taskId,a=t.success,s=t.fail,c=t.complete,u=o.payload,l=o.errCode,d=o.errno,f=o.errString,h=null,p=o.errMsg;if("string"==typeof u)try{h=JSON.parse(u)}catch(e){p="downloadFile:fail sdk parse payload error",B.error("[js-sdk-downloadFile] biz callback payload json parse error")}var v=h?Object.assign({},h,{trace:i,errMsg:p}):{errMsg:p,trace:i};if(void 0!==d&&(v.errno=d),void 0!==f&&(v.errString=f),"success"===r&&"function"==typeof a)a(v);else if("function"==typeof s){s(void 0===l?v:Object.assign({},v,{errCode:l}))}"function"==typeof c&&c(v),e.eventNexus.off(t.taskId),e.reportResult({resultType:r,errMsg:p,bizInvokeTime:n,errCode:l,errno:d,errString:f,taskId:t.taskId,url:t.url})}},l(e)}();function jo(e,t,n,r){void 0===e&&(e={url:""}),void 0===t&&(t=!1),void 0===n&&(n="downloadFile"),void 0===r&&(r={});var o={resultType:"fail",errMsg:n+":fail",bizInvokeTime:Date.now(),taskId:"",url:e.url};if(!Ir(n,e,{url:""},!0))return o.errMsg=n+":fail invalid param.url type",o.errno=Ot,o.errString=bt("url"),void Oo.reportResult(o);if(function(e,t,n){var r="",o="";Qt(e.url)||(r='invalid url "'+e.url+'"',o=kt("url"));!r&&("string"!=typeof e.method&&e.method||0===e.method)&&(r="param.method should pass string, not "+typeof e.method,o=bt("method"));if(r)return t.errMsg=n+":fail "+r,t.errno=Ot,t.errString=o,Oo.reportResult(t),Mr(n,e,r,{errno:Ot,errString:o}),!1;return!0}(e,o,n)){var i=!1,a=e.filePath;if(null==a||""===a?delete e.filePath:"string"!=typeof a&&(o.errMsg=n+":fail invalid param.filePath type",o.errno=Ot,o.errString=bt("filePath"),Oo.reportResult(o),Mr(n,e,"filePath could only be string or null/undefined",{errno:Ot,errString:bt("filePath")}),i=!0),i)return new Oo(e,!0);var s=function(e,t){"object"==typeof e.header&&null!==e.header||(B.warn(t+": header must be an object"),e.header={});e.header=Zt(e.header),["success","fail","complete"].forEach((function(n){var r=e[n];"function"==typeof r&&(e[n]=Xt(r,"at api "+t+" "+n+" callback function"))})),e.method||(e.method="GET");if("string"==typeof e.method&&(e.method=e.method.toUpperCase()),"GET"===e.method)e.url=Gt(e.url,e.data),e.data&&delete e.data;else{var n=function(e){var t,n,r=void 0;void 0===e.data||(r="string"==typeof e.data||e.data instanceof ArrayBuffer?e.data:e.header&&(null==(t=e.header["content-type"])?void 0:t.includes("application/x-www-form-urlencoded"))?Kt(e.data,!0):e.header&&(null==(n=e.header["content-type"])?void 0:n.includes("application/json"))||"object"==typeof e.data?JSON.stringify(e.data):e.data.toString());return r}(e);e.data=n}return["success","fail","complete"].forEach((function(n){var r=e[n];"function"==typeof r&&(e[n]=Xt(r,"at api "+t+" "+n+" callback function"))})),e}(Object.assign({},e),n),c=se.pack(s);try{return new Oo(c,!1,t,n,r)}catch(t){var u;o.errMsg=n+":fail create downloadFile instant catch error",Oo.reportResult(o),Mr(n,e,null!=(u=null==t?void 0:t.message)?u:"create "+n+" instant catch error",{errno:Ft,errString:yt()})}}}Oo.eventNexus=new Y,Oo.progressCacheMap=new Map,Sr("onDownloadFileProgress",(function(e){var t;if(void 0===e&&(e={}),"string"==typeof e)try{e=JSON.parse(e)}catch(e){return}var n=e,r=n.progress,o=n.downloadTaskId,i=n.totalBytesExpectedToWrite,a=n.totalBytesWritten;o&&!isNaN(r)&&(Number(r)<(null!=(t=Oo.progressCacheMap.get(o))?t:0)||(Oo.progressCacheMap.set(o,Number(r)),Oo.eventNexus.emit(o,{progress:r,totalBytesWritten:a,totalBytesExpectedToWrite:i})))}));var No="waiting",Do="sending",Bo="done",Ro="aborted",Wo="created",zo="in_queue",Uo=0,Vo=0;function qo(){var e=Zo.get(this);Qo.set(this,Do),ni.set(this,Date.now());var t,n=this,r=(new Date).valueOf()%1e6;Vo===r?Uo++:(Vo=r,Uo=0);var o=+(""+r+(Uo<10?"0"+Uo:Uo));Uo>=99&&(Uo=0),Go.set(n,o||r),wr("createDownloadTask",{url:e.url,header:e.header,data:e.data,method:e.method,filePath:e.filePath,taskId:o,success:function(e){$o.set(n,e.trace),Go.set(n,e.downloadTaskId),oi+=1,ai[e.downloadTaskId]=n},fail:function(e){$o.set(n,e.trace),t=e.errMsg,ci(n,"fail",t)},complete:function(){Qo.set(n,Bo)}}),t?setTimeout((function(){var n={errMsg:t.replace("createDownloadTask","downloadFile")};"function"==typeof e.fail&&e.fail(n),"function"==typeof e.complete&&e.complete(n)}),0):(B.log("taskID",this,Go.get(this)),si.on(Go.get(this)+"success",(function(t){t.errMsg="downloadFile:ok",t.statusCode=parseInt(t.statusCode,10),-1===[200,304].indexOf(t.statusCode)&&delete t.tempPath,delete t.timeInterval,"function"==typeof e.success&&e.success(t),"function"==typeof e.complete&&e.complete(t)})),si.on(Go.get(this)+"fail",(function(t){t.errMsg="downloadFile:fail "+t.errMsg,"function"==typeof e.fail&&e.fail(t),"function"==typeof e.complete&&e.complete(t)})))}var Ho=0,Jo=new WeakMap,Ko=new WeakMap,Go=new WeakMap,Qo=new WeakMap,Zo=new WeakMap,Yo=new WeakMap,$o=new WeakMap,Xo=new WeakMap,ei=new WeakMap,ti=new WeakMap,ni=new WeakMap,ri=new WeakMap,oi=0,ii=[],ai={},si=new So.EventEmitter2;function ci(e,t,n){var r=ri.get(e),o=Qo.get(e)===Ro,i=o?Qe:Ge,a=o?"cancel":t,s=Zo.get(e),c=Yo.get(e),u=Date.now()-c,l={request_version:"v1",request_trace:$o.get(e)||"",request_url:ln(s.url),request_method:s.method||"GET",request_biz_invoke_time:Yo.get(e),request_push_queue_time:Xo.get(e)||0,request_shift_queue_time:ti.get(e)||0,request_queue_length:ei.get(e)||0,request_abort_type:r||"",error_msg:n||"",duration:u,result_type:a,api_name:"downloadFile"};et(Be,i).setPlatform("TeaSlardar").addMap(l).flush()}Sr("onDownloadTaskStateChange",(function(e){void 0===e&&(e={}),"string"==typeof e&&(e=JSON.parse(e));var t=e.state,n=e.downloadTaskId;if(delete e.state,delete e.downloadTaskId,si.emit(""+n+t,e),"success"===t||"fail"===t){if(oi=Math.max(oi-1,0),ii.length>0){var r=ii.shift();ti.set(r.item,Date.now()),qo.call(r.item)}var o=ai[n];if(o){try{ci(o,t,e.errMsg)}catch(e){}delete ai[n],si.removeAllListeners(n+"success"),si.removeAllListeners(n+"fail"),si.removeAllListeners(n+"progressUpdate")}}}));var ui=l((function(e){var t=this;this.requestVersion="v1",this.abort=function(){var e=Qo.get(t),n=Zo.get(t);if(Qo.set(t,Ro),e===No){var r=ii.findIndex((function(e){return e.id===Jo.get(t)}));r>-1&&ii.splice(r,1),ri.set(t,zo),setTimeout((function(){var e="downloadFile:fail abort";"function"==typeof n.fail&&n.fail({errMsg:e}),ci(t,"cancel",e),"function"==typeof n.complete&&n.complete({errMsg:e})}),0)}else e!==Ro&&(ri.set(t,Wo),wr("operateDownloadTask",{downloadTaskId:Go.get(t),operationType:"abort"}))},this.onProgressUpdate=function(e){si.on(Go.get(t)+"progressUpdate",(function(t){"function"==typeof e&&Xt(e,"at DownloadTask.onProgressUpdate callback function")(t)}))},Yo.set(this,Date.now());var n,r,o,i=Ho++;Ko.set(this,i),Jo.set(this,i),Qo.set(this,No),["success","fail","complete"].forEach((function(t){var n=e[t];"function"==typeof n&&(e[t]=Xt(n,"at api downloadFile "+t+" callback function"))})),Zo.set(this,e),oi>=5?(Xo.set(this,Date.now()),ei.set(this,ii.length),ii.push({id:i,item:this}),n=this,r=Zo.get(n),o={request_trace:$o.get(n)||"",request_url:ln(r.url),request_method:r.method||"GET",request_queue_length:5+ii.length,request_type:"downloadFile"},et(Be,Ze).setPlatform("TeaSlardar").addMap(o).flush()):qo.call(this)}));function li(e,t,n){var r=He,o={request_url:"string"==typeof e?ln(e):J(e),request_method:"string"==typeof t?t:J(t),error_msg:n,result_type:"fail",request_version:"v1",api_name:"downloadFile"};et(Be,r).setPlatform("TeaSlardar").addMap(o).flush()}var di=mr(null,(function(e,t){var n=function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t);return{F:n,d:[{kind:"field",key:"fgWebDownloadH5",value:function(){return!1}},{kind:"field",key:"fgWebDownloadV2",value:function(){return!1}},{kind:"method",key:"setup",value:function(){var e=this;Jr(nt(n.prototype),"setup",this).call(this),setTimeout((function(){var t;null!=(t=window.h5sdk)&&t.addReadySuccessCallback&&window.h5sdk.addReadySuccessCallback((function(){e.getFilterFeatureGating("calculated_fg_web_download_h5").then((function(t){e.fgWebDownloadH5=t})),w(g)===c.HARMONY?e.fgWebDownloadV2=!0:e.getFilterFeatureGating("openplatform_api_web_download_native_v2").then((function(t){e.fgWebDownloadV2=t}))}))}),0)}},{kind:"method",decorators:[Nr()],key:"downloadFile",value:function(e){if(void 0===e&&(e={}),this.fgWebDownloadH5)return jo(e,!0);if(this.fgWebDownloadV2)return jo(e,!1);if(this.beforeInvoke("downloadFile",e,{url:""})){var t,n="string"==typeof e.url?e.url.split("?")[0]:J(e.url),r="string"==typeof e.method?e.method.toUpperCase():e.method,o={};Qt(e.url)||(t="uncertain",o.url=n),r&&"GET"!==r||!e.data||(t="uncertain",o.data="method is GET"),"string"!=typeof r||""!==r&&!["HEAD","PUT","DELETE","CONNECT","OPTIONS","TRACE","PATCH"].includes(r.toUpperCase())||(t="certain",o.method=e.method),t&&et(Re,Ye).setPlatform("TeaSlardar").addMap({url:n,bk_type:t,api_name:"downloadFile",params:o}).flush();try{return new ui(e)}catch(t){li(e.url,e.method,"downloadFile:fail create downloadFile instant catch error "),this.beforeInvokeFail("downloadFile",e,t.message)}}else li(e.url,e.method,"downloadFile:fail invalid param.url type")}},{kind:"method",key:"getFilterFeatureGating",value:function(e){var t=this;return new Promise((function(n,r){t.invokeMethod("getFilterFeatureGating",{fg_name:e,success:function(e){var t=e.fg_value;n(t)},fail:function(e){n(!1)}})}))}}]}}),Br),fi=["openDocumentParams"],hi=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"method",decorators:[Nr()],key:"openOnlineDocument",value:function(e){void 0===e&&(e={});var t=e,n=t.openDocumentParams;return jo(p(t,fi),!1,"openOnlineDocument",{openDocumentParams:null!=n?n:{}})}}]}}),Br);function pi(e){var t=this;this.beforeInvoke("getImageInfo",e,{src:""},!0)&&(/^(http|https):\/\//.test(e.src)?this.downloadFileAPI.downloadFile({url:e.src,success:function(n){e.src=n.tempFilePath,t.invokeMethod("getImageInfo",e,{beforeSuccess:function(t){t.path=e.src}})},fail:function(n){var r={errno:Rt,errString:Ct()};t.beforeInvokeFail("getImageInfo",e,"download image fail",r)}}):(/^(tt)?file:\/\//.test(e.src)||(e.src=this.getRealRoute(e.src)),this.invokeMethod("getImageInfo",e,{beforeSuccess:function(t){t.path=e.src}})))}var vi=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Dr((function(){return di}))],key:"downloadFileAPI",value:void 0},{kind:"field",decorators:[Nr()],key:"chooseImage",value:function(){return this.createInvokeMethodApi("chooseImage",{defaults:{count:9,sizeType:["original","compressed"],sourceType:["album","camera"]},beforeSuccess:function(e){e.tempFileSizes&&(e.tempFiles=e.tempFilePaths.map((function(t,n){return{path:t,size:e.tempFileSizes[n]}}))),delete e.tempFileSizes}})}},{kind:"field",decorators:[Nr()],key:"previewImage",value:function(){return this.createInvokeMethodApi("previewImage")}},{kind:"field",decorators:[Nr()],key:"getImageInfo",value:function(){return pi.bind(this)}},{kind:"field",decorators:[Nr()],key:"saveImageToPhotosAlbum",value:function(){return this.createInvokeMethodApi("saveImageToPhotosAlbum")}},{kind:"field",decorators:[Nr()],key:"compressImage",value:function(){var e=this;return this.createInvokeMethodApi("compressImage",{addStandardError:!0,checkParams:{src:""},paramsTransformer:function(t){return/^(tt)?file:\/\//.test(t.src)||/^(http|https):\/\//.test(t.src)?t:Object.assign({},t,{src:e.getRealRoute(t.src)})}})}},{kind:"method",key:"getRealRoute",value:function(e){return e}}]}}),Br),gi=["success","loading","none","info","error","warning"],mi=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"method",decorators:[Nr()],key:"showToast",value:function(e){void 0===e&&(e={}),(e=Object.assign({duration:1500,title:"",icon:"success"},e)).icon&&-1!==gi.indexOf(e.icon)?"none"===e.icon&&(e.icon=""):e.icon="success",this.beforeInvoke("showToast",e,{duration:1,title:"String",icon:"String"},!0)&&this.invokeMethod("showToast",e)}},{kind:"field",decorators:[Nr()],key:"hideToast",value:function(){return this.createInvokeMethodApi("hideToast")}}]}}),Br),yi=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"method",decorators:[Nr()],key:"showActionSheet",value:function(e){void 0===e&&(e={});this.beforeInvoke("showActionSheet",e,{itemList:["String"]})&&(e.itemList.length<1&&this.beforeInvokeFail("showActionSheet",e,"param.itemList should has at least 1 item"),e.itemList.length>6?this.beforeInvokeFail("showActionSheet",e,"param.itemList should has at most 6 items"):this.invokeMethod("showActionSheet",e))}}]}}),Br),ki=function(e){return"string"==typeof e?e.replace(/[^\u0000-\u00ff]/g,"aa").length:0},bi=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"showPrompt",value:function(){var e=this;return function(t){void 0===t&&(t={}),ki(t.title)>30?e.beforeInvokeFail("showPrompt",t,"title length should not larger than 15 Chinese characters"):ki(t.confirmText)>8?e.beforeInvokeFail("showPrompt",t,"confirmText length should not larger than 4 Chinese characters"):ki(t.cancelText)>8?e.beforeInvokeFail("showPrompt",t,"cancelText length should not larger than 4 Chinese characters"):(t.maxLength=function(e){return"number"!=typeof e||isNaN(e)?140:e>=-1?e:140}(t.maxLength),e.invokeMethod("showPrompt",t))}}}]}}),Br),wi=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"setAuthenticationInfo",value:function(){return this.createInvokeMethodApi("setAuthenticationInfo",{checkParams:{mobile:"String",identifyCode:"String",identifyName:"String"}})}},{kind:"field",decorators:[Nr()],key:"startFaceIdentify",value:function(){return this.createInvokeMethodApi("startFaceIdentify")}},{kind:"field",decorators:[Nr()],key:"startFaceVerify",value:function(){return this.createInvokeMethodApi("startFaceVerify",{checkParams:{userId:"String"},addStandardError:!0})}}]}}),Br),Si=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"getClipboardData",value:function(){return this.createInvokeMethodApi("getClipboardData")}},{kind:"field",decorators:[Nr()],key:"setClipboardData",value:function(){return this.createInvokeMethodApi("setClipboardData",{addStandardError:!0,checkParams:{data:"String"}})}}]}}),Br),_i=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",key:"enabled",value:function(){return!1}},{kind:"method",decorators:[Nr()],key:"startCompass",value:function(e){void 0===e&&(e={}),this.invokeMethod("startCompass",e),this.enabled=!0}},{kind:"method",decorators:[Nr()],key:"stopCompass",value:function(e){void 0===e&&(e={}),this.invokeMethod("stopCompass",e),this.enabled=!1}},{kind:"field",decorators:[Nr()],key:"CompassChange",value:function(){var e=this;return this.createNativeEventApi("onCompassChange",{whenListenerAdd:function(){e.enabled||e.startCompass()}})}}]}}),Br),Ci=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",key:"enabled",value:function(){return!1}},{kind:"method",decorators:[Nr()],key:"startAccelerometer",value:function(e){void 0===e&&(e={}),this.invokeMethod("enableAccelerometer",Object.assign({},e,{enable:!0}),{beforeAll:function(e){e.errMsg=e.errMsg.replace("enableAccelerometer","startAccelerometer")}}),this.enabled=!0}},{kind:"method",decorators:[Nr()],key:"stopAccelerometer",value:function(e){void 0===e&&(e={}),this.invokeMethod("enableAccelerometer",Object.assign({},e,{enable:!1}),{beforeAll:function(e){e.errMsg=e.errMsg.replace("enableAccelerometer","stopAccelerometer")}}),this.enabled=!0}},{kind:"field",decorators:[Nr()],key:"AccelerometerChange",value:function(){var e=this;return this.createNativeEventApi("onAccelerometerChange",{whenListenerAdd:function(){e.enabled||e.startAccelerometer()}})}}]}}),Br);function Ai(e){return(e.devices||[]).forEach((function(e){var t=e.advertisData;t?e.advertisData=H(t):delete e.advertisData;var n=e.serviceData,r=void 0===n?{}:n;for(var o in r)if(r.hasOwnProperty(o)){var i=r[o];i?r[o]=H(i):delete r[o]}})),e}var Ii=new WeakMap,Mi=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"openBluetoothAdapter",value:function(){return this.createInvokeMethodApi("openBluetoothAdapter")}},{kind:"field",decorators:[Nr()],key:"closeBluetoothAdapter",value:function(){return this.createInvokeMethodApi("closeBluetoothAdapter")}},{kind:"field",decorators:[Nr()],key:"getBluetoothAdapterState",value:function(){return this.createInvokeMethodApi("getBluetoothAdapterState")}},{kind:"field",decorators:[Nr()],key:"startBluetoothDevicesDiscovery",value:function(){return this.createInvokeMethodApi("startBluetoothDevicesDiscovery",{addStandardError:!0,checkExtendParams:{services:{type:"Array",required:!1},allowDuplicatesKey:{type:"Boolean",required:!1},interval:{type:"Number",required:!1}}})}},{kind:"field",decorators:[Nr()],key:"stopBluetoothDevicesDiscovery",value:function(){return this.createInvokeMethodApi("stopBluetoothDevicesDiscovery")}},{kind:"field",decorators:[Nr()],key:"getConnectedBluetoothDevices",value:function(){return this.createInvokeMethodApi("getConnectedBluetoothDevices",{addStandardError:!0,checkExtendParams:{services:{type:"Array",required:!0}}})}},{kind:"field",decorators:[Nr()],key:"getBluetoothDevices",value:function(){return this.createInvokeMethodApi("getBluetoothDevices",{paramsTransformer:function(e){var t=e.success;return t&&(e.success=function(e){var n=Ai(e);t(n)}),e}})}},{kind:"field",decorators:[Nr()],key:"BluetoothAdapterStateChange",value:function(){return this.createNativeEventApi("bluetoothAdapterStateChange")}},{kind:"field",decorators:[Nr()],key:"BluetoothDeviceFound",value:function(){return this.createNativeEventApi("bluetoothDeviceFound",{wrapper:function(e){return function(t){var n=Ii.get(t)||Ai(t);Ii.set(t,n),e(n)}}})}}]}}),Br),Ei=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"connectBLEDevice",value:function(){return this.createInvokeMethodApi("connectBLEDevice",{addStandardError:!0,checkExtendParams:{deviceId:{type:"String",required:!0}}})}},{kind:"field",decorators:[Nr()],key:"disconnectBLEDevice",value:function(){return this.createInvokeMethodApi("disconnectBLEDevice",{addStandardError:!0,checkExtendParams:{deviceId:{type:"String",required:!0}}})}},{kind:"field",decorators:[Nr()],key:"getBLEDeviceCharacteristics",value:function(){return this.createInvokeMethodApi("getBLEDeviceCharacteristics",{addStandardError:!0,checkExtendParams:{deviceId:{type:"String",required:!0},serviceId:{type:"String",required:!0}}})}},{kind:"field",decorators:[Nr()],key:"getBLEDeviceServices",value:function(){return this.createInvokeMethodApi("getBLEDeviceServices",{addStandardError:!0,checkExtendParams:{deviceId:{type:"String",required:!0}}})}},{kind:"field",decorators:[Nr()],key:"notifyBLECharacteristicValueChange",value:function(){return this.createInvokeMethodApi("notifyBLECharacteristicValueChange",{addStandardError:!0,checkExtendParams:{deviceId:{type:"String",required:!0},serviceId:{type:"String",required:!0},characteristicId:{type:"String",required:!0},descriptorId:{type:"String",required:!1},state:{type:"Boolean",required:!1},type:{type:"String",required:!1}}})}},{kind:"field",decorators:[Nr()],key:"readBLECharacteristicValue",value:function(){return this.createInvokeMethodApi("readBLECharacteristicValue",{addStandardError:!0,checkExtendParams:{deviceId:{type:"String",required:!0},serviceId:{type:"String",required:!0},characteristicId:{type:"String",required:!0}}})}},{kind:"field",decorators:[Nr()],key:"writeBLECharacteristicValue",value:function(){return this.createInvokeMethodApi("writeBLECharacteristicValue",{addStandardError:!0,checkExtendParams:{deviceId:{type:"String",required:!0},serviceId:{type:"String",required:!0},characteristicId:{type:"String",required:!0},value:{type:"String",required:!0}}})}},{kind:"method",decorators:[Nr()],key:"setBLEMTU",value:function(e){void 0===e&&(e={}),this._setBLEMTU(e)}},{kind:"field",decorators:[Nr()],key:"BLECharacteristicValueChange",value:function(){return this.createNativeEventApi("BLECharacteristicValueChange")}},{kind:"field",decorators:[Nr()],key:"BLEConnectionStateChange",value:function(){return this.createNativeEventApi("BLEConnectionStateChange")}},{kind:"field",key:"_setBLEMTU",value:function(){return this.createInvokeMethodApi("setBLEMTU",{addStandardError:!0,checkExtendParams:{deviceId:{type:"String",required:!0},mtu:{type:"Number",required:!0}}})}}]}}),Br),xi=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"reverseGeocode",value:function(){return this.createInvokeMethodApi("reverseGeocode")}}]}}),Br),Pi=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"getKAInfo",value:function(){return this.createInvokeMethodApi("getKAInfo")}}]}}),Br),Ti=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"getEnvVariable",value:function(){return this.createInvokeMethodApi("getEnvVariable")}}]}}),Br),Fi="onChatBadgeChange",Li="offChatBadgeChange",Oi="getChatInfo",ji=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"method",decorators:[Nr()],key:"onChatBadgeChange",value:function(e){if(this.beforeInvoke(Fi,e,{openChatId:"",onChange:function(){}},!0)){var t=this.emitter,n=e.openChatId,r=e.onChange;t.size(n,r)||(t.size(n)||(delete e.onChange,this.invokeMethod(Fi,e)),r&&t.on(n,r)),Jt(Fi,e)}}},{kind:"method",decorators:[Nr()],key:"offChatBadgeChange",value:function(e){if(this.beforeInvoke(Li,e,{openChatId:""},!0)){var t=e.openChatId,n=e.onChange,r=this.emitter,o=r.size(t,n);r.off(t,n),o&&!r.size(t)&&this.invokeMethod(Li,e),Jt(Li,e)}}},{kind:"method",decorators:[Nr()],key:"getChatInfo",value:function(e){if(((null==void 0?void 0:undefined.agent)||{}).isGetChatInfoStandardizeEnabled)this.beforeInvoke(Oi,e,{openChatId:""},!0)&&this.invokeMethod(Oi,e);else if(this.beforeInvoke(Oi,e,{openChatId:"",chatType:0})){var t=e.chatType;[0,1].includes(t)?0!==t||[0,1].includes(e.userType)?this.invokeMethod(Oi,e):Ht(Oi,e,"must set userType when chatType is 0"):this.beforeInvokeFail(Oi,e,"chatType can only be 0 or 1")}}},{kind:"method",key:"setup",value:function(){var e=this;this.onMethod("chatBadgeChangeObserved",(function(t){void 0===t&&(t={}),t.openChatId&&e.emitter.emit(t.openChatId,{badge:t.badge})}))}}]}}),Br),Ni=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"getLocation",value:function(){return this.createInvokeMethodApi("getLocation")}},{kind:"field",decorators:[Nr()],key:"openLocation",value:function(){return this.createInvokeMethodApi("openLocation",{addStandardError:!0,checkParams:{latitude:0,longitude:0}})}},{kind:"field",decorators:[Nr()],key:"chooseLocation",value:function(){return this.createInvokeMethodApi("chooseLocation")}},{kind:"field",decorators:[Nr()],key:"getLocationStatus",value:function(){return this.createInvokeMethodApi("getLocationStatus")}},{kind:"field",decorators:[Nr()],key:"startLocationUpdate",value:function(){return this.createInvokeMethodApi("startLocationUpdate")}},{kind:"field",decorators:[Nr()],key:"stopLocationUpdate",value:function(){return this.createInvokeMethodApi("stopLocationUpdate")}},{kind:"field",decorators:[Nr()],key:"LocationChange",value:function(){return this.createNativeEventApi("onLocationChange")}},{kind:"field",decorators:[Nr()],key:"LocationChangeError",value:function(){return this.createNativeEventApi("onLocationChangeError")}}]}}),Br),Di=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"shareWebContent",value:function(){return this.createInvokeMethodApi("shareWebContent")}}]}}),Br),Bi=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"getNetworkEnv",value:function(){return this.createInvokeMethodApi("getNetworkEnv")}}]}}),Br),Ri=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"share",value:function(){return this.createInvokeMethodApi("share")}}]}}),Br),Wi=function(){function e(){var t=this;this.onDownloadComplete=function(n){return e.onDownloadComplete(t,n)}}return e.createInstance=function(t){var n=new e,r=an();this.taskIDMap.set(n,r);var o=Object.assign({},t,{taskID:r});return Lr(this.apiName)(o),n},e.onDownloadComplete=function(e,t){var n=this,r=this.taskIDMap.get(e);r&&qi.on(r,(function(e){"function"==typeof t&&Xt(t,"at "+n.apiName+".onDownloadComplete callback function")(e)}))},l(e)}();Wi.apiName="openFileFromCloud",Wi.taskIDMap=new WeakMap;var zi=function(){function e(){}return e.createInstance=function(e){var t=this,n=new this,r=an();this.taskIDMap.set(n,r);var o=Object.assign({},e,{taskID:r});return Lr(this.apiName,{beforeAll:function(){t.finishMap.set(n,!0)}})(o),n},e.onProgressUpdate=function(e,t){var n=this,r=this.taskIDMap.get(e);r&&!e.finish&&qi.on(r,(function(e){"function"==typeof t&&Xt(t,"at "+n.apiName+".onProgressUpdate callback function")(e)}))},e.abortWith=function(e,t){var n=this,r=this.taskIDMap.get(e);if(r&&!e.finish){Lr(this.abortName,{afterSuccess:function(){n.finishMap.set(e,!0)}})(Object.assign({taskID:r},t))}else{Ht(this.apiName+".abort",t,void 0,{errString:"Task completed",errno:2500004})}},e.isFinishWith=function(e){return!!this.finishMap.get(e)},l(e,[{key:"finish",get:function(){return!1}}]),e}();zi.apiName=void 0,zi.abortName=void 0,zi.taskIDMap=void 0,zi.finishMap=void 0;var Ui=function(e){function t(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=e.call.apply(e,[this].concat(o))||this).onProgressUpdate=function(e){return t.onProgressUpdate(Z(n),e)},n.abort=function(e){return t.abortWith(Z(n),e)},n}return _(t,e),l(t,[{key:"finish",get:function(){return t.isFinishWith(this)}}]),t}(zi);Ui.apiName="uploadFileToCloud",Ui.abortName="uploadFileToCloudAbort",Ui.taskIDMap=new WeakMap,Ui.finishMap=new WeakMap;var Vi=function(e){function t(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=e.call.apply(e,[this].concat(o))||this).onProgressUpdate=function(e){return t.onProgressUpdate(Z(n),e)},n.abort=function(e){return t.abortWith(Z(n),e)},n}return _(t,e),l(t,[{key:"finish",get:function(){return t.isFinishWith(this)}}]),t}(zi);Vi.apiName="downloadFileFromCloud",Vi.abortName="downloadFileFromCloudAbort",Vi.taskIDMap=new WeakMap,Vi.finishMap=new WeakMap;var qi=new So.EventEmitter2,Hi=new Map;["onUploadFileToCloudUpdate","onDownloadFileFromCloudUpdate"].forEach((function(e){Sr(e,(function(e){var t=e.taskID,n=e.progress;if(t&&n&&mt(n)){var r=Hi.get(t);if((r||0===r)&&n<r)return;Hi.set(t,n),qi.emit(t,{progress:n})}}))})),["onOpenFileFromCloudDownloadComplete"].forEach((function(e){Sr(e,(function(e){var t=e.taskID;t&&(delete e.taskID,qi.emit(t,e))}))}));var Ji=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"uploadFileToCloud",value:function(){return function(e){return Ui.createInstance(e)}}},{kind:"field",decorators:[Nr()],key:"downloadFileFromCloud",value:function(){return function(e){return Vi.createInstance(e)}}},{kind:"field",decorators:[Nr()],key:"openFileFromCloud",value:function(){return function(e){return Wi.createInstance(e)}}}]}}),Br),Ki=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"UserCaptureScreen",value:function(){var e=this;return this.createNativeEventApi("userCaptureScreenObserved",{whenListenerExisted:function(){e.invokeMethod("onUserCaptureScreen")},whenListenerEmptied:function(){e.invokeMethod("offUserCaptureScreen")}})}}]}}),Br),Gi=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"getNetworkType",value:function(){return this.createInvokeMethodApi("getNetworkType")}},{kind:"field",decorators:[Nr()],key:"NetworkStatusChange",value:function(){var e=this;return this.createNativeEventApi("onNetworkStatusChange",{whenListenerExisted:function(){e.invokeMethod("onNetworkStatusChange")},whenListenerEmptied:function(){e.invokeMethod("offNetworkStatusChange")}})}}]}}),Br),Qi=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"getNetworkQualityType",value:function(){return this.createInvokeMethodApi("getNetworkQualityType")}},{kind:"field",decorators:[Nr()],key:"NetworkQualityChange",value:function(){var e=this;return this.createNativeEventApi("onNetworkQualityChange",{whenListenerExisted:function(){e.invokeMethod("onNetworkQualityChange")},whenListenerEmptied:function(){e.invokeMethod("offNetworkQualityChange")}})}}]}}),Br),Zi=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"getConnectedWifi",value:function(){return this.createInvokeMethodApi("getConnectedWifi")}},{kind:"field",decorators:[Nr()],key:"getWifiStatus",value:function(){return this.createInvokeMethodApi("getWifiStatus")}},{kind:"field",decorators:[Nr({sync:!0})],key:"getWifiStatusSync",value:function(){return null}},{kind:"field",decorators:[Nr()],key:"getWifiList",value:function(){return this.createInvokeMethodApi("getWifiList")}},{kind:"field",decorators:[Nr()],key:"GetWifiList",value:function(){var e=this;return this.createNativeEventApi("onGetWifiList",{whenListenerExisted:function(){e.invokeMethod("onGetWifiList")},whenListenerEmptied:function(){e.invokeMethod("offGetWifiList")}})}}]}}),Br),Yi="_onWatermarkChange";function $i(e){var t,n,r;return"function"==typeof e?t=e:"object"==typeof e&&("function"==typeof e.callback&&(t=e.callback),"function"==typeof e.success&&(n=e.success),"function"==typeof e.fail&&(r=e.fail)),{callback:t,success:n,fail:r}}var Xi=mr(null,(function(e,t){var n=function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t);return{F:n,d:[{kind:"field",decorators:[Nr()],key:"checkWatermark",value:function(){return this.createInvokeMethodApi("checkWatermark")}},{kind:"field",decorators:[Nr()],key:"hasWatermark",value:function(){return null}},{kind:"method",decorators:[Nr()],key:"onWatermarkChange",value:function(e){if(e){var t=$i(e),n=t.callback,r=t.success,o=t.fail;if(n){var i=this.emitter;if(0===i.size(Yi)){this.invokeMethod("onWatermarkChange",{success:function(e){i.on(Yi,n),r&&r(e)},fail:o})}else i.on(Yi,n),r&&r()}else o&&o("have no callback")}}},{kind:"method",decorators:[Nr()],key:"offWatermarkChange",value:function(e){if(e){var t=$i(e),n=t.callback,r=t.success,o=t.fail;if(n){r&&r();var i=this.emitter,a=i.size(Yi);i.off(Yi,n),1===a&&0===i.size(Yi)&&this.invokeMethod("offWatermarkChange",{})}else o&&o("have no callback")}}},{kind:"method",key:"setup",value:function(){var e=this;Jr(nt(n.prototype),"setup",this).call(this),this.onMethod("onWatermarkChange",(function(t){void 0===t&&(t={}),e.emitter.emit(Yi,t)}))}}]}}),Br),ea=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"checkLocalFaceVerify",value:function(){return this.createInvokeMethodApi("checkLocalFaceVerify",{addStandardError:!0,checkExtendParams:{checkUpdate:{type:"Boolean",required:!1,defaultValue:!0}}})}},{kind:"field",decorators:[Nr()],key:"prepareLocalFaceVerify",value:function(){return this.createInvokeMethodApi("prepareLocalFaceVerify",{addStandardError:!0,checkExtendParams:{timeout:{type:"Number",required:!1,defaultValue:60}}})}},{kind:"field",decorators:[Nr()],key:"startLocalFaceVerify",value:function(){return this.createInvokeMethodApi("startLocalFaceVerify",{addStandardError:!0,checkExtendParams:{path:{type:"String",required:!0}}})}}]}}),Br),ta=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"acquireFaceImage",value:function(){return this.createInvokeMethodApi("acquireFaceImage")}}]}}),Br),na=["ascii","base64","binary","hex","ucs2","ucs-2","utf16le","utf-16le","utf-8","utf8","latin1"];function ra(e,t){if(!e||"string"!=typeof e)throw Vt(new TypeError(t+" must be a string"),t)}var oa=function(){function e(e){var t=e.mode,n=void 0===t?0:t,r=e.size,o=void 0===r?0:r,i=e.lastAccessedTime,a=void 0===i?"":i,s=e.lastModifiedTime,c=void 0===s?"":s;this.mode=void 0,this.size=void 0,this.lastAccessedTime=void 0,this.lastModifiedTime=void 0,this.mode=n,this.size=o,this.lastAccessedTime=a,this.lastModifiedTime=c}var t=e.prototype;return t._checkModeProperty=function(e){return(61440&this.mode)===e},t.isFile=function(){return this._checkModeProperty(32768)},t.isDirectory=function(){return this._checkModeProperty(16384)},l(e)}();function ia(){var e=this.createInvokeMethodApi,t=this.createInvokeMethodSyncApi;return{getFileInfo:e("getFileInfo",{addStandardError:!0,checkParams:{filePath:""}}),getSavedFileList:e("getSavedFileList",{addStandardError:!0}),removeSavedFile:e("removeSavedFile",{addStandardError:!0,checkParams:{filePath:""}}),getSavedFileInfo:e("getSavedFileInfo",{addStandardError:!0,checkParams:{filePath:""}}),saveFile:e("saveFile",{addStandardError:!0,checkParams:{tempFilePath:""}}),saveFileSync:t("saveFileSync",(function(e,t){return ra(e,"tempFilePath"),{tempFilePath:e,filePath:t}}),(function(e){return e.savedFilePath})),readFile:e("readFile",{addStandardError:!0,checkParams:{filePath:""}}),readFileSync:t("readFileSync",(function(e,t){ra(e,"filePath");var n={filePath:e};return t&&(ra(t,"encoding"),n.encoding=t),n}),(function(e){return e.data})),writeFile:e("writeFile",{addStandardError:!0,checkParams:{filePath:""},customCheckParams:function(e){if(e.encoding&&!na.includes(e.encoding))return{message:'invalid encoding "'+e.encoding+'"',key:"encoding"}}}),writeFileSync:t("writeFileSync",(function(e,t,n){if(ra(e,"filePath"),n&&-1===na.indexOf(n))throw Ut(new Error('invalid encoding "'+n+'"'),"encoding");return{filePath:e,data:t,encoding:n}}),!1),mkdir:e("mkdir",{addStandardError:!0,checkParams:{dirPath:""}}),mkdirSync:t("mkdirSync",(function(e,t){return void 0===t&&(t=!1),ra(e,"dirPath"),{dirPath:e,recursive:t}}),!1),readdir:e("readdir",{addStandardError:!0,checkParams:{dirPath:""}}),readdirSync:t("readdirSync",(function(e){return ra(e,"dirPath"),{dirPath:e}}),(function(e){return e.files})),rmdir:e("rmdir",{addStandardError:!0,checkParams:{dirPath:""}}),rmdirSync:t("rmdirSync",(function(e,t){return void 0===t&&(t=!1),ra(e,"dirPath"),{dirPath:e,recursive:t}}),!1),access:e("access",{addStandardError:!0,checkParams:{path:""},paramsTransformer:function(e){/^(ttfile|http):\/\/(user|temp)$/.test(e.path)&&(e.path+="/")}}),accessSync:t("accessSync",(function(e){ra(e,"path");return/^(ttfile|http):\/\/(user|temp)$/.test(e)&&(e+="/"),{path:e}}),!1),unlink:e("unlink",{addStandardError:!0,checkParams:{filePath:""}}),unlinkSync:t("unlinkSync",(function(e){return ra(e,"filePath"),{filePath:e}}),!1),stat:e("stat",{addStandardError:!0,checkParams:{path:""},beforeSuccess:function(e){e.stats=e.stat=new oa(e.stat)}}),statSync:t("statSync",(function(e){return ra(e,"path"),{path:e}}),(function(e){return new oa(e.stat)})),rename:e("rename",{addStandardError:!0,checkParams:{oldPath:"",newPath:""}}),renameSync:t("renameSync",(function(e,t){return ra(e,"oldPath"),ra(t,"newPath"),{oldPath:e,newPath:t}}),!1),copyFile:e("copyFile",{addStandardError:!0,checkParams:{srcPath:"",destPath:""}}),copyFileSync:t("copyFileSync",(function(e,t){return ra(e,"srcPath"),ra(t,"destPath"),{srcPath:e,destPath:t}}),!1),unzip:e("unzip",{addStandardError:!0,checkParams:{zipFilePath:"",targetPath:""}}),appendFile:e("appendFile",{addStandardError:!0}),appendFileSync:t("appendFileSync",(function(e,t,n){return{filePath:e,data:t,encoding:n}}),!1,{firstUseErrString:!0}),decryptFile:e("decryptFile",{addStandardError:!0})}}var aa,sa,ca=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",key:"fs",value:function(){return ia.call(this)}},{kind:"method",decorators:[Nr()],key:"getFileSystemManager",value:function(){return this.fs}},{kind:"field",decorators:[Nr()],key:"saveFile",value:function(){return this.fs.saveFile}},{kind:"field",decorators:[Nr()],key:"getFileInfo",value:function(){return null}},{kind:"field",decorators:[Nr()],key:"getSavedFileList",value:function(){return this.fs.getSavedFileList}},{kind:"field",decorators:[Nr()],key:"removeSavedFile",value:function(){return this.fs.removeSavedFile}}]}}),Br),ua=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"getExtConfig",value:function(){return this.createInvokeMethodApi("getExtConfig")}},{kind:"field",decorators:[Nr()],key:"getExtConfigSync",value:function(){return null}}]}}),Br),la=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"makePhoneCall",value:function(){return this.createInvokeMethodApi("makePhoneCall",{addStandardError:!0,checkParams:{phoneNumber:""}})}},{kind:"field",decorators:[Nr()],key:"getPhoneNumber",value:function(){return null}}]}}),Br),da=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"scanCode",value:function(){return this.createInvokeMethodApi("scanCode",{addStandardError:!0,beforeSuccess:function(e){"string"==typeof e.path&&(e.path=e.path.replace(/\.html$/,""),e.path=e.path.replace(/\.html\?/,"?"))}})}}]}}),Br);!function(e){e.NDEF="NDEF",e.A="NFC-A",e.B="NFC-B",e.F="NFC-F",e.V="NFC-V",e.MIFARE_CLASSIC="MIFARE-Classic",e.MIFARE_ULTRALIGHT="MIFARE-Ultralight",e.ISO_DEP="ISO-DEP"}(sa||(sa={}));var fa=new WeakMap;function ha(e,t,n){fa.get(e).invokeMethod(t,Object.assign({tech:e.tech},n))}var pa=function(){function e(e,t){this.tech=void 0,this.tech=e,function(e,t){fa.set(e,t)}(this,t)}var t=e.prototype;return t.connect=function(e){ha(this,"nfcConnect",e)},t.close=function(e){ha(this,"nfcClose",e)},t.setTimeout=function(e){ha(this,"nfcSetTimeout",e)},t.transceive=function(e){ha(this,"nfcTransceive",e)},t.getMaxTransceiveLength=function(e){ha(this,"nfcMaxTransceiveLength",e)},l(e)}(),va=function(e){function t(t){return e.call(this,sa.A,t)||this}_(t,e);var n=t.prototype;return n.getAtqa=function(e){ha(this,"nfcGetAtqa",e)},n.getSak=function(e){ha(this,"nfcGetSak",e)},l(t)}(pa),ga=function(e){function t(t){return e.call(this,sa.V,t)||this}return _(t,e),l(t)}(pa),ma=function(e){function t(t){return e.call(this,sa.B,t)||this}return _(t,e),l(t)}(pa),ya=function(e){function t(t){return e.call(this,sa.ISO_DEP,t)||this}return _(t,e),l(t)}(pa),ka=function(e){function t(t){return e.call(this,sa.MIFARE_CLASSIC,t)||this}return _(t,e),l(t)}(pa),ba=function(e){function t(t){return e.call(this,sa.NDEF,t)||this}_(t,e);var n=t.prototype;return n.readNdefMessage=function(e){var t=e.success;t&&(e.success=function(e){e.messages&&e.messages.length>0&&e.messages.forEach((function(e){e.id&&(e.id=H(e.id)),e.type&&(e.type=H(e.type)),e.payload&&(e.payload=H(e.payload))})),t(e)}),ha(this,"readNdefMessage",e)},n.isEmpty=function(e){return null==e||0===e.length},n.writeNdefMessage=function(e){var t=e.uris,n=e.texts,r=e.records;if(this.isEmpty(t)&&this.isEmpty(n)&&this.isEmpty(r)){Ht("writeNdefMessage",e,void 0,{errString:"Invalid parameter",errno:Ot})}else{if(r&&r.length>0)try{r.forEach((function(e){e.id&&(e.id=q(e.id)),e.type&&(e.type=q(e.type)),e.payload&&(e.payload=q(e.payload))})),e.records=r}catch(t){return void Ht("writeNdefMessage",e,void 0,{errString:"Invalid parameter",errno:Ot})}ha(this,"writeNdefMessage",e)}},l(t)}(pa),wa=((aa={})[sa.A]=va,aa[sa.B]=ma,aa[sa.V]=ga,aa[sa.ISO_DEP]=ya,aa[sa.MIFARE_CLASSIC]=ka,aa[sa.NDEF]=ba,aa),Sa=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",key:"adapter",value:function(){return this.nfcAdapter()}},{kind:"field",key:"instances",value:function(){return{}}},{kind:"method",decorators:[Nr()],key:"getNFCAdapter",value:function(){return this.adapter}},{kind:"method",key:"nfcAdapter",value:function(){var e=this,t=this.createNativeEventApi("nfcFoundDevice"),n=t.on,r=t.off;return{tech:sa,getNfcA:function(){return e.getInstance(sa.A)},getNfcB:function(){return e.getInstance(sa.B)},getNfcV:function(){return e.getInstance(sa.V)},getNdef:function(){return e.getInstance(sa.NDEF)},getMifareClassic:function(){return e.getInstance(sa.MIFARE_CLASSIC)},getIsoDep:function(){return e.getInstance(sa.ISO_DEP)},onDiscovered:n,offDiscovered:r,startDiscovery:this.createInvokeMethodApi("nfcStartDiscovery"),updateAlertMessage:this.createInvokeMethodApi("nfcUpdateAlertMessage"),stopDiscovery:this.createInvokeMethodApi("nfcStopDiscovery")}}},{kind:"method",key:"getInstance",value:function(e){var t=this.instances;return t[e]||(t[e]=new wa[e](this)),t[e]}}]}}),Br),_a=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"startDeviceCredential",value:function(){return this.createInvokeMethodApi("startDeviceCredential",{checkParams:{authContent:"String"}})}}]}}),Br),Ca=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"getTriggerContext",value:function(){return this.createInvokeMethodApi("getTriggerContext")}},{kind:"field",decorators:[Nr()],key:"sendMessageCard",value:function(){return this.createInvokeMethodApi("sendMessageCard")}}]}}),Br),Aa=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"mailto",value:function(){return this.createInvokeMethodApi("mailto")}}]}}),Br),Ia=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"getDeviceID",value:function(){return this.createInvokeMethodApi("getDeviceID")}},{kind:"field",decorators:[Nr()],key:"getLegacyDeviceID",value:function(){return this.createInvokeMethodApi("getLegacyDeviceID")}}]}}),Br),Ma=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"reportBadge",value:function(){return this.createInvokeMethodApi("reportBadge")}},{kind:"field",decorators:[Nr()],key:"updateBadge",value:function(){return this.createInvokeMethodApi("updateBadge")}}]}}),Br),Ea=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Dr((function(){return di}))],key:"downloadFileAPI",value:void 0},{kind:"field",decorators:[Nr()],key:"chooseMedia",value:function(){return this.createInvokeMethodApi("chooseMedia")}},{kind:"method",decorators:[Nr()],key:"getVideoInfo",value:function(e){var t=this;void 0===e&&(e={}),this.beforeInvoke("getVideoInfo",e,{src:""},!0)&&(e.isSupportNetworkURL=Boolean(e.isSupportNetworkURL),/^(http|https):\/\//.test(e.src)?e.isSupportNetworkURL?this.invokeMethod("canIUse",{schema:"getVideoInfo.isSupportNetworkURL"},{beforeAll:function(n){return t.handleCanIUseSuccess(e,n)}}):this.handleNotSupportedNetworkURL(e):this.invokeMethod("getVideoInfo",e,{beforeSuccess:function(t){t.path=e.src}}))}},{kind:"method",key:"handleNotSupportedNetworkURL",value:function(e){var t={errno:Wt,errString:It()};this.beforeInvokeFail("getVideoInfo",e,"path not be supported",t)}},{kind:"method",key:"handleDownloadSuccess",value:function(e,t){e.src=t.tempFilePath,this.invokeMethod("getVideoInfo",e,{beforeSuccess:function(t){t.path=e.src}})}},{kind:"method",key:"handleDownloadFail",value:function(e,t){var n={errno:t.errno||zt,errString:t.errString||At()};this.beforeInvokeFail("getVideoInfo",e,"download video fail",n)}},{kind:"method",key:"handleCanIUseSuccess",value:function(e,t){var n=this;t.data?this.downloadFileAPI.downloadFile({url:e.src,success:function(t){return n.handleDownloadSuccess(e,t)},fail:function(t){return n.handleDownloadFail(e,t)}}):this.handleNotSupportedNetworkURL(e)}}]}}),Br),xa=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"getUserInfoEx",value:function(){return this.createInvokeMethodApi("getUserInfoEx")}}]}}),Br),Pa=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"getStepCount",value:function(){return this.createInvokeMethodApi("getStepCount")}}]}}),Br),Ta=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"getBeacons",value:function(){return this.createInvokeMethodApi("getBeacons")}},{kind:"field",decorators:[Nr()],key:"startBeaconDiscovery",value:function(){return this.createInvokeMethodApi("startBeaconDiscovery")}},{kind:"field",decorators:[Nr()],key:"stopBeaconDiscovery",value:function(){return this.createInvokeMethodApi("stopBeaconDiscovery")}},{kind:"field",decorators:[Nr()],key:"BeaconUpdate",value:function(){return this.createNativeEventApi("beaconUpdate",{offPolicy:"clearAll"})}},{kind:"field",decorators:[Nr()],key:"BeaconServiceChange",value:function(){return this.createNativeEventApi("beaconServiceChange",{offPolicy:"clearAll"})}}]}}),Br),Fa=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"openLingoProfile",value:function(){return this.createInvokeMethodApi("openLingoProfile")}}]}}),Br),La=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"getContainerContext",value:function(){return this.createInvokeMethodApi("getContainerContext")}}]}}),Br),Oa={button:{"1.0.0":[{size:["default","mini"]},{type:["primary","default","warn"]},"plagin","disabled","loading",{"form-type":["submit","reset"]},{"open-type":["share"]},"hover-class","hover-start-time","hover-stay-time","hover-stop-propagation"],"1.14.0":["bindgetphonenumber",{"open-type":["getPhoneNumber"]}]},canvas:{"1.0.0":["canvas-id"]},"checkbox-group":{"1.0.0":["bindchange"]},checkbox:{"1.0.0":["value","disabled","checked","color"]},form:{"1.0.0":["bindsubmit","bindreset"],"1.29.0":["report-submit"]},icon:{"1.0.0":[{type:["success","success_no_circle","info","warn","waiting","cancel","download","search","clear"]},"size","color"]},image:{"1.0.0":["src",{mode:["scaleToFill","aspectFit","aspectFill","widthFix","top","bottom","center","left","right","top left","top right","bottom left","bottom right"]},"lazy-load","binderror","bindload"]},input:{"1.0.0":["value",{type:["text","number","idcard","digit"]},"password","placeholder","placeholder-style","disabled","maxlength","focus","bindinput","bindfocus","bindblur","bindconfirm","cursor-spacing","cursor","selection-start","selection-end"]},label:{"1.0.0":["for"]},navigator:{"1.0.0":["url","delta",{"open-type":["navigate","redirect","switchTab","navigateBack"]},"hover-class","hover-start-time","hover-stay-time","hover-stop-propagation"]},"picker-view":{"1.0.0":["value","indicator-style","mask-style","bindchange"]},"picker-view-column":{"1.0.0":[]},picker:{"1.0.0":["range","range-key","value","bindchange","disabled","bindcancel",{mode:["selector","multiSelector","time","date","region"]}]},"radio-group":{"1.0.0":["bindchange"]},radio:{"1.0.0":["value","checked","disabled","color"]},"rich-text":{"1.0.0":["nodes"]},"scroll-view":{"1.0.0":["scroll-x","scroll-y","upper-threshold","lower-threshold","scroll-top","scroll-left","scroll-into-view","scroll-with-animation","bindscroll","bindscrolltoupper","bindscrolltolower"]},slider:{"1.0.0":["min","max","step","disabled","vaue","color","selected-color","active-color","background-color","block-size","block-color","show-value","bindchange","bindchanging"]},swiper:{"1.0.0":["indicator-dots","indicator-color","indicator-active-color","autoplay","current","current-item-id","interval","duration","circular","vertical","bindchange","display-multiple-items"],"1.20.0":["bindtransition"]},"swiper-item":{"1.0.0":["item-id"]},switch:{"1.0.0":["checked","disabled",{type:["switch","checkbox"]},"bindchange","color"]},text:{"1.0.0":["selectable","space","decode"]},textarea:{"1.0.0":["value","placeholder","placeholder-style","disabled","maxlength","focus","auto-height","fixed","cursor-spacing","cursor","selection-start","selection-end","bindinput","bindfocus","bindblur","bindconfirm","show-confirm-bar"]},view:{"1.0.0":["hover-class","hover-start-time","hover-stay-time","hover-stop-propagation"]},"web-view":{"1.0.0":["src","bindmessage"]},progress:{"1.0.0":["percent","stroke-width","color","active-color","background-color","active",{"active-mode":["backwards","forwards"]}]},video:{"1.0.0":["src","autoplay","poster","bindplay","bindpause","bindended","binderror"],"1.18.0":["bindtimeupdate","bindfullscreenchange"]},ad:{"1.19.0":["unit-id","bindload"],"1.26.2":["binderror"],"1.31.0":["bindclose"],"1.32.1":["ad-intervals"],"1.34.0":["fixed"]},"live-player":{"1.35.0":["src","autoplay","muted","orientation","object-fit","bindstatechange","binderror","bindfullscreenchange","showFullscreenControl"]}},ja={request:{"1.0.0":[{object:["url","data","header",{method:["GET","POST","PUT"]},"dataType","responseType"]},{success:["data","statusCode","header"]}]},uploadFile:{"1.0.0":[{object:["url","filePath","name","header","formData"]},{success:["data","statusCode"]}]},UploadTask:{"1.0.0":["abort",{onProgressUpdate:[{callback:["progress","totalBytesSent","totalBytesExpectedToSend"]}]}]},downloadFile:{"1.0.0":[{object:["url","header"]},{success:["tempFilePath","statusCode"]}]},DownloadTask:{"1.0.0":["abort",{onProgressUpdate:[{callback:["progress","totalBytesWritten","totalBytesExpectedToWrite"]}]}]},connectSocket:{"1.0.0":[{object:["url","header","protocols"]}]},chooseImage:{"1.0.0":[{object:["count","sizeType","sourceType"]},{success:["tempFilePaths","tempFiles"]}]},SocketTask:{"1.0.0":[{send:[{object:["data"]}]},{close:[{object:["code","reason"]}]},"onOpen","onClose","onError","onMessage"]},previewImage:{"1.0.0":[{object:["urls","current"]}]},getImageInfo:{"1.10.0":[{object:["src"]},{success:["width","height","type"]}]},saveImageToPhotosAlbum:{"1.0.0":[{object:["filePath"]}]},createInnerAudioContext:{"1.0.0":[]},innerAudioContext:{"1.0.0":["src","startTime","autoplay","loop","obeyMuteSwitch","duration","currentTime","paused","buffered","volume","play","pause","stop","seek","destory","onCanplay","offCanplay","onPlay","offPlay","onPause","offPause","onStop","offStop","onEnded","offEnded","onTimeUpdate","offTimeUpdate","onError","offError","onWaiting","offWaiting","onSeeking","offSeeking","onSeeked","offSeeked"]},getRecorderManager:{"1.0.0":[]},RecorderManager:{"1.0.0":[{start:[{object:["duration","sampleRate","numberOfChannels","encodeBitRate","frameSize"]}]},"pause","resume","stop","onStart","onPause","onStop","onError"]},chooseVideo:{"1.0.0":[{object:["sourceType","maxDuration","camera","compressed"]},{success:["tempFilePath","duration","size","height","width"]}]},saveVideoToPhotosAlbum:{"1.0.0":[{object:["filePath"]}]},createVideoContext:{"1.18.0":[{object:["id","component"]}]},VideoContext:{"1.18.0":["play","pause","stop","seek","requestFullScreen","exitFullScreen"]},saveFile:{"1.0.0":[{object:["tempFilePath"]},{success:["savedFilePath"]}]},getFileInfo:{"1.15.0":[{object:["filePath"]},{success:["size"]}]},getSavedFileList:{"1.15.0":[{success:["fileList"]}]},FileItem:{"1.15.0":["filePath","size","createTime"]},removeSavedFile:{"1.15.0":[{object:["filePath"]}]},getSavedFileInfo:{"1.15.0":[{object:["filePath"]}]},getFileSystemManager:{"1.15.0":[]},FileSystemManager:{"1.15.0":[{access:[{object:["path"]}]},{saveFile:[{object:["tempFilePath","fillPath"]},{success:["savedFilePath"]}]},{getSavedFileList:[{success:["fileList"]}]},{removeSavedFile:[{object:["filePath"]}]},{copyFile:[{object:["srcPath","destPath"]}]},{getFileInfo:[{object:["fillPath"]},{success:["size"]}]},{getSavedFileInfo:[{object:["filePath"]},{success:["size","createTime"]}]},{mkdir:[{object:["dirPath"]}]},{readdir:[{object:["dirPath"]},{success:["files"]}]},{readFile:[{object:["filePath","encoding"]},{success:["data"]}]},{rename:[{object:["oldPath","newPath"]}]},{rmdir:[{object:["dirPath"]}]},{stat:[{object:["path"]},{success:["stat"]}]},{unlink:[{object:["filePath"]}]},{unzip:[{object:["zipFilePath","targetPath"]}]},{writeFile:[{object:["filePath","data","encoding"]}]}]},Stats:{"1.15.0":["mode","size","lastAccessedTime","lastModifiedTime","isDirectory","isFile"]},getStorage:{"1.0.0":[{object:["key"]},{success:["data"]}]},getStorageSync:{"1.0.0":[]},setStorage:{"1.0.0":[{object:["key","data"]}]},setStorageSync:{"1.0.0":[]},removeStorage:{"1.0.0":[{object:["key"]}]},removeStorageSync:{"1.0.0":[]},clearStorage:{"1.0.0":[]},clearStorageSync:{"1.0.0":[]},getStorageInfo:{"1.0.0":[{success:["keys","currentSize","limitSize"]}]},getStorageInfoSync:{"1.0.0":[]},getLocation:{"1.0.0":[{object:["type"]},{success:["latitude","longitude","altitude","accuracy","verticalAccuracy","horizontalAccuracy","speed","city"]}]},openLocation:{"1.0.0":[{object:["latitude","longitude","scale","name","address"]}]},getSystemInfo:{"1.0.0":[{success:["appName","model","pixelRatio","windowWidth","windowHeight","version","system","platform","brand","screenWidth","screenHeight","SDKVersion"]}]},getSystemInfoSync:{"1.0.0":[]},getNetworkType:{"1.0.0":[{success:["networkType"]}]},getConnectedWifi:{"1.0.0":[{success:["SSID","BSSID","secure","signalStrength"]}]},onNetworkStatusChange:{"1.0.0":[{callback:[{networkType:["wifi","2g","3g","4g","none","unknown"]}]}]},scanCode:{"1.0.0":[{success:["result"]}]},getClipboardData:{"1.0.0":[{success:["data"]}]},setClipboardData:{"1.0.0":[{object:["data"]}]},setKeepScreenOn:{"1.0.0":[{object:["keepScreenOn"]}]},startAccelerometer:{"1.0.0":[]},stopAccelerometer:{"1.0.0":[]},onAccelerometerChange:{"1.0.0":[{callback:["x","y","z"]}]},startCompass:{"1.2.0":[]},stopCompass:{"1.2.0":[]},onCompassChange:{"1.2.0":[{callback:["direction"]}]},vibrateLong:{"1.0.0":[]},vibrateShort:{"1.0.0":[]},showModal:{"1.0.0":[{object:["title","content","showCancel","cancelText","confirmText"]},{success:["confirm","cancel"]}]},showToast:{"1.0.0":[{object:["title","icon","duration"]}]},hideToast:{"1.0.0":[]},showLoading:{"1.1.0":[{object:["title"]}]},hideLoading:{"1.0.0":[]},showActionSheet:{"1.0.0":[{object:["itemList"]},{success:["tapIndex"]}]},setNavigationBarColor:{"1.40.0.0":[{object:["frontColor","backgroundColor"]}]},setNavigationBarTitle:{"1.0.0":[{object:["title"]}]},redirectTo:{"1.0.0":[{object:["url"]}]},reLaunch:{"1.0.0":[{object:["url"]}]},navigateBack:{"1.0.0":[{object:["delta"]}]},navigateTo:{"1.0.0":[{object:["url"]}]},switchTab:{"1.0.0":[{object:["url"]}]},createAnimation:{"1.0.0":[{object:["duration",{timingFunction:["linear","ease","ease-in","ease-in-out","ease-out","step-start","step-end"]},"delay","transformOrigin"]}]},Animation:{"1.0.0":["opacity","backgroundColor","width","height","top","left","bottom","right","rotate","rotateX","rotateY","rotateZ","rotate3d","scale","scaleX","scaleY","scaleZ","scale3d","translate","translateX","translateY","translateZ","translate3d","skew","skewX","skewY","matrix","matrix3d"]},pageScrollTo:{"1.0.0":[{object:["scrollTop","duration"]}]},createCanvasContext:{"1.0.0":[]},canvasToTempFilePath:{"1.0.0":[{object:["canvasId","x","y","width","height","destWidth","destHeight","fileType","quality"]}]},makePhoneCall:{"1.0.0":[{object:["phoneNumber"]}]},requestWXPayment:{"1.0.0":[]},arrayBufferToBase64:{"1.0.0":[]},base64ToArrayBuffer:{"1.0.0":[]},canIUse:{"1.0.0":[]},getPerformance:{"1.0.0":{success:["cpu","fps","memory","timing"]}},getUpdateManager:{"1.9.0":[]},UpdateManager:{"1.0.0":["onUpdateReady","onUpdateFailed","applyUpdate","triggerCheckUpdate",{onCheckForUpdate:[{callback:["hasUpdate"]}]}]},getHostLaunchQuery:{"1.47.0":[{success:["launchQuery"]}]},getHostLaunchQuerySync:{"1.47.0":[{success:["launchQuery"]}]},getExtConfig:{"1.0.0":[{success:["extConfig"]}]},getExtConfigSync:{"1.0.0":[]},getLaunchOptionsSync:{"1.12.0":[{return:["path","scene","query"]}]},exitMiniProgram:{"1.12.0":[]},getMenuButtonLayout:{"1.25.0":[{return:["width","height","top","right","bottom","left"]}]},startPullDownRefresh:{"1.0.0":[]},stopPullDownRefresh:{"1.0.0":[]},showShareMenu:{"1.5.0":[]},hideShareMenu:{"1.5.0":[]},createSelectorQuery:{"1.7.0":[]},SelectorQuery:{"1.7.0":["in","select","selectAll","selectViewport","exec"]},createIntersectionObserver:{"1.10.4":[{object:["thresholds","initialRatio","observeAll"]}]},IntersectionObserver:{"1.10.4":["relativeTo","relativeToViewport","observe","disconnect"]},getUseDuration:{"1.0.0":[]},dealUserRelation:{"1.0.0":[]},login:{"1.0.0":[{object:["force"]},{success:["code","anonymousCode","isLogin"]}]},checkSession:{"1.0.0":[]},getUserInfo:{"1.0.0":[{object:["withCredentials"]},{success:["userInfo","rawData","signature","encryptedData","iv"]}]},requestPayment:{"1.0.0":[{object:["data"]}]},pay:{"1.19.4":[{object:["orderInfo","service","getOrderStatus"]}]},navigateToMiniProgram:{"1.15.0":[{object:["appId","path","extraData",{envVersion:["current","latest"]}]}]},navigateBackMiniProgram:{"1.15.0":[{object:["extraData"]}]},chooseAddress:{"1.0.0":[{success:["errMsg","userName","provinceName","cityName","countyName","detailInfo","telNumber"]}]},getSetting:{"1.3.0":[{success:"authSetting"}]},openSetting:{"1.3.0":[{success:"authSetting"}]},AuthSetting:{"1.3.0":["userInfo","userLocation","address","record","album","camera"]},authorize:{"1.3.0":[{object:"scope"}]},reportAnalytics:{"1.8.0":[]},interactionAnalysis:{"1.22.2":[{object:["type"]},{success:["code"]}]},followOfficialAccount:{"1.30.0":[{success:["errCode"]}]},checkFollowState:{"1.30.0":[{success:["result"]}]},performance:{"1.42.0":["mark"]},showFavoriteGuide:{"1.41.0":[]},showNavigationBarLoading:{"1.48.0":[]},hideNavigationBarLoading:{"1.48.0":[]},hideHomeButton:{"1.48.0":[]},getWifiList:{"1.49.0":[]},onGetWifiList:{"1.49.0":[{callback:["wifiList"]}]},offGetWifiList:{"1.49.0":[{callback:[]}]}};function Na(e,t,n){if(!t)return[];var r=Object.keys(n),o=r.indexOf(t);if(-1===o)return[];var i=n[r[o]];return Object.keys(i).filter((function(t){return function(e,t){var n,r=e.split("."),o=t.split(".");for(n=Math.max(r.length,o.length);r.length<n;)r.push("0");for(;o.length<n;)o.push("0");for(var i=0;i<n;i++){var a=parseInt(r[i]),s=parseInt(o[i]);if(a>s)return 1;if(a<s)return-1}return 0}(t,e)<=0}))}function Da(e,t,n){for(var r,o=0;o<e.length;o++)for(var i=t[e[o]],a=0;a<i.length;a++){var s=i[a];if("string"==typeof s&&s===n){void 0===r&&(r=[]);break}if("object"==typeof s&&s.hasOwnProperty(n)){r=void 0===r?s[n]:r.concat(s[n]);break}}return r}function Ba(e,t){for(var n=0;n<e.length;n++){if("string"==typeof e[n]&&e[n]===t)return[];if("object"==typeof e[n]&&e[n].hasOwnProperty(t))return e[n][t]}}function Ra(e,t,n,r){var o,i=Na(e,t,Oa);if(0===i.length)return!1;if(n&&!(o=Da(i,Oa[t],n)))return!1;return!r||void 0!==Ba(o,r)}function Wa(e,t,n,r,o){var i,a,s=Na(e,t,ja);if(0===s.length)return!1;if(n&&!(i=Da(s,ja[t],n)))return!1;return!(r&&void 0===(a=Ba(i,r))||o&&void 0===Ba(a,o))}var za,Ua,Va=(za=new Map,function(e){if(za.has(e))return za.get(e);var t=!1;return this.invokeMethod("canIUse",{schema:e},{beforeSuccess:function(n){t=n.data,za.set(e,t)},beforeFail:function(e){t=!1}}),t});function qa(e){if(void 0===e&&(e=""),"string"!=typeof e)throw new dt("canIUse: schema should be string");Ua||(Ua=this.systemInfo.getSystemInfoSync().SDKVersion);var t=e.split(".");return!!Ra.apply(void 0,[Ua].concat(t))||Wa.apply(void 0,[Ua].concat(t))||Va.call(this,e)}var Ha=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Dr((function(){return Ur}))],key:"systemInfo",value:void 0},{kind:"field",decorators:[Nr()],key:"canIUse",value:function(){return qa}}]}}),Br),Ja=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"requestAccess",value:function(){return this.createInvokeMethodApi("requestAccess")}}]}}),Br),Ka=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"openMyAI",value:function(){return this.createInvokeMethodApi("openMyAI")}}]}}),Br),Ga=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"addAppToTab",value:function(){return this.createInvokeMethodApi("addAppToTab")}},{kind:"field",decorators:[Nr()],key:"removeAppFromTab",value:function(){return this.createInvokeMethodApi("removeAppFromTab")}},{kind:"field",decorators:[Nr()],key:"checkAppExistInTab",value:function(){return this.createInvokeMethodApi("checkAppExistInTab")}}]}}),Br),Qa=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",key:"inited",value:function(){return!1}},{kind:"field",key:"buf",value:void 0},{kind:"field",decorators:[Nr()],key:"getStorage",value:function(){var e=this;return this.createInvokeMethodApi("getStorage",{addStandardError:!0,checkParams:{key:""},beforeSuccess:function(t,n){var r,o,i=t;(i.data=tn(i.data,i.dataType),r=null==n?void 0:n.get("key"))&&(null==(o=e.getStorageBuf())||o.set(r,i.data));delete i.dataType},beforeInvokeHook:function(t,n){var r,o,i=t.key;if(null!=(r=e.getStorageBuf())&&r.has(i))return null==(o=e.getStorageBuf())||null==o.getString?void 0:o.getString(i);null==n||n.set("key",i)}})}},{kind:"field",decorators:[Nr()],key:"getStorageSync",value:function(){var e=this;return function(t){var n,r;if(e.beforeInvoke("getStorageSync",t,""))return(r=null==(n=e.getStorageBuf())||null==n.get?void 0:n.get(t))||e.invokeMethod("getStorageSync",{key:t},{beforeAll:function(e){void 0===e&&(e={}),r=tn(e.data,e.dataType)},beforeSuccess:function(){var n;null==(n=e.getStorageBuf())||n.set(t,r)}}),r}}},{kind:"field",decorators:[Nr()],key:"setStorage",value:function(){var e=this;return this.createInvokeMethodApi("setStorage",{paramsTransformer:function(e,t){var n=e.key,r=e.data,o=en(r);return null==t||t.set("data",r),null==t||t.set("key",n),Object.assign({},e,{key:n,data:o.data,dataType:o.dataType})},beforeSuccess:function(t,n){var r,o,i,a,s=t.currentSize;(null==(r=e.getStorageBuf())||null==r.setCurrentSize||r.setCurrentSize(s),(o=null==n?void 0:n.get("key"))&&(i=null==n?void 0:n.get("data")))&&(null==(a=e.getStorageBuf())||null==a.set||a.set(o,i))}})}},{kind:"field",decorators:[Nr()],key:"setStorageSync",value:function(){var e=this;return function(t,n){if(void 0===n&&(n=""),e.beforeInvoke("setStorageSync",t,"")){var r,o,i=en(n),a=i.data,s=i.dataType,c=!1,u="";if(e.invokeMethod("setStorageSync",{key:t,data:a,dataType:s,fail:function(e){void 0===e&&(e={}),u=e.errMsg,r=e.errString,o=e.errno,c=!0}},{beforeSuccess:function(r){var o,i,a=r.currentSize;(null==(o=e.getStorageBuf())||null==o.set||o.set(t,n),mt(a))&&(null==(i=e.getStorageBuf())||null==i.setCurrentSize||i.setCurrentSize(a))}}),c){var l=new ft(u);throw l.errString=r,l.errno=o,l}}}}},{kind:"field",decorators:[Nr()],key:"removeStorage",value:function(){return this.createInvokeMethodApi("removeStorage",{addStandardError:!0,checkParams:{key:""}})}},{kind:"field",decorators:[Nr()],key:"removeStorageSync",value:function(){var e=this;return function(t){e.beforeInvoke("removeStorageSync",t,"")&&e.invokeMethod("removeStorageSync",{key:t},{beforeSuccess:function(n){var r,o,i=n.currentSize;mt(i)&&(null==(o=e.getStorageBuf())||null==o.setCurrentSize||o.setCurrentSize(i));null==(r=e.getStorageBuf())||null==r.remove||r.remove(t)}})}}},{kind:"field",decorators:[Nr()],key:"clearStorage",value:function(){var e=this;return this.createInvokeMethodApi("clearStorage",{beforeSuccess:function(t){var n,r,o=t.currentSize;mt(o)&&(null==(r=e.getStorageBuf())||null==r.setCurrentSize||r.setCurrentSize(o));null==(n=e.getStorageBuf())||null==n.clear||n.clear()}})}},{kind:"field",decorators:[Nr()],key:"clearStorageSync",value:function(){var e=this;return function(){e.invokeMethod("clearStorageSync",{},{beforeSuccess:function(t){var n,r=t.currentSize;mt(r)&&(null==(n=e.getStorageBuf())||null==n.setCurrentSize||n.setCurrentSize(r))}})}}},{kind:"field",decorators:[Nr()],key:"getStorageInfo",value:function(){var e=this;return this.createInvokeMethodApi("getStorageInfo",{beforeInvokeHook:function(){var t=e.getStorageBuf();if(t)return Object.assign({},t.storageInfo,{errMsg:""})}})}},{kind:"field",decorators:[Nr()],key:"getStorageInfoSync",value:function(){var e=this;return function(){var t,n;return(n=null==(t=e.getStorageBuf())?void 0:t.storageInfo)||e.invokeMethod("getStorageInfoSync",{},{beforeAll:function(e){n=e,delete e.errMsg}}),n}}},{kind:"method",key:"getStorageBuf",value:function(){return this.inited||(this.buf=this.initBuf()),this.buf}},{kind:"method",key:"initBuf",value:function(){this.inited=!0}}]}}),Br),Za=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"startMFA",value:function(){return this.createInvokeMethodApi("startMFA",{addStandardError:!0,checkExtendParams:{mfaScope:{type:"String",required:!0}}})}},{kind:"field",decorators:[Nr()],key:"checkMFA",value:function(){return this.createInvokeMethodApi("checkMFA",{addStandardError:!0,checkExtendParams:{mfaScope:{type:"String",required:!0},mfaToken:{type:"String",required:!0}}})}},{kind:"field",decorators:[Nr()],key:"startThirdPartyMFA",value:function(){return this.createInvokeMethodApi("startThirdPartyMFA",{addStandardError:!0,checkExtendParams:{mfaKey:{type:"String",required:!0}}})}}]}}),Br),Ya=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"grantScreenShot",value:function(){return this.createInvokeMethodApi("grantScreenShot")}}]}}),Br),$a=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"searchPOI",value:function(){return this.createInvokeMethodApi("searchPOI")}}]}}),Br),Xa=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"MemoryWarning",value:function(){var e=this;return this.createNativeEventApi("onMemoryWarning",{whenListenerExisted:function(){e.invokeMethod("onMemoryWarning")},whenListenerEmptied:function(){}})}}]}}),Br),es=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"method",decorators:[Nr()],key:"showLoading",value:function(e){void 0===e&&(e={});var t={icon:"loading",duration:864e5};e=Object.assign(e,t),this.beforeInvoke("showLoading",e,{title:"String"})&&this.invokeMethod("showToast",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace("showToast","showLoading")}})}},{kind:"method",decorators:[Nr()],key:"hideLoading",value:function(e){void 0===e&&(e={}),this.invokeMethod("hideToast",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace("hideToast","hideLoading")}})}}]}}),Br),ts=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"ServerBadgePush",value:function(){return this.createNativeEventApi("serverBadgePushObserved")}},{kind:"field",decorators:[Nr()],key:"startServerBadgePush",value:function(){return this.createInvokeMethodApi("onServerBadgePush")}},{kind:"field",decorators:[Nr()],key:"stopServerBadgePush",value:function(){return this.createInvokeMethodApi("offServerBadgePush")}}]}}),Br),ns=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"lwClosePage",value:function(){return this.createInvokeMethodApi("tt.navigation.closePage")}}]}}),Br),rs=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"lwOpenChat",value:function(){return this.createInvokeMethodApi("tt.chat.open")}}]}}),Br),os=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"lwOpenProfile",value:function(){return this.createInvokeMethodApi("tt.user.openProfile")}},{kind:"field",decorators:[Nr()],key:"lwGetUserInfo",value:function(){return this.createInvokeMethodApi("tt.user.getUserInfo")}}]}}),Br),is=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"lwShowToast",value:function(){return this.createInvokeMethodApi("tt.interaction.showToast")}},{kind:"field",decorators:[Nr()],key:"lwHideToast",value:function(){return this.createInvokeMethodApi("tt.interaction.hideToast")}}]}}),Br),as=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"showMoreItemPanel",value:function(){return this.createInvokeMethodApi("showMoreItemPanel")}}]}}),Br),ss=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"shareScreenshot",value:function(){return this.createInvokeMethodApi("shareScreenshot")}}]}}),Br),cs=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"ContainerVisibilityChange",value:function(){var e=this;return this.createNativeEventApi("onContainerVisibilityChange",{whenListenerExisted:function(){e.invokeMethod("onContainerVisibilityChange")},whenListenerEmptied:function(){e.invokeMethod("offContainerVisibilityChange")}})}}]}}),Br),us=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"setLongPressMenuItems",value:function(){return this.createInvokeMethodApi("setLongPressMenuItems")}},{kind:"field",decorators:[Nr()],key:"LongPressMenuItemClick",value:function(){return this.createNativeEventApi("onLongPressMenuItemClick",{onPolicy:"latest"})}}]}}),Br),ls=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"showWebPopoverMenu",value:function(){return this.createInvokeMethodApi("showWebPopoverMenu")}},{kind:"field",decorators:[Nr()],key:"hideWebPopoverMenu",value:function(){return this.createInvokeMethodApi("hideWebPopoverMenu")}},{kind:"field",decorators:[Nr()],key:"WebPopoverMenuSelected",value:function(){return this.createNativeEventApi("onWebPopoverMenuSelected",{onPolicy:"latest"})}},{kind:"field",decorators:[Nr()],key:"WebPopoverMenuDismiss",value:function(){return this.createNativeEventApi("onWebPopoverMenuDismiss",{onPolicy:"latest"})}}]}}),Br),ds=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"notifySecurityAlert",value:function(){return this.createInvokeMethodApi("notifySecurityAlert")}}]}}),Br),fs=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"purchase",value:function(){return this.createInvokeMethodApi("purchase")}}]}}),Br),hs=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"queryProductDetail",value:function(){return this.createInvokeMethodApi("queryProductDetail")}}]}}),Br),ps=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"getAPIInvokeCountBy",value:function(){return this.createInvokeMethodApi("getAPIInvokeCountBy")}}]}}),Br),vs=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"canGoBack",value:function(){return this.createInvokeMethodApi("canGoBack")}}]}}),Br),gs=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"canGoForward",value:function(){return this.createInvokeMethodApi("canGoForward")}}]}}),Br),ms=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"getAppStoreCountry",value:function(){return this.createInvokeMethodApi("getAppStoreCountry")}}]}}),Br),ys=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"FontScaleChange",value:function(){var e=this;return this.createNativeEventApi("onFontScaleChange",{onPolicy:"latest",whenListenerExisted:function(){e.invokeMethod("onFontScaleChange")},whenListenerEmptied:function(){e.invokeMethod("offFontScaleChange")}})}}]}}),Br),ks=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"requestWebContainerOrientation",value:function(){return this.createInvokeMethodApi("requestWebContainerOrientation")}},{kind:"field",decorators:[Nr()],key:"WebContainerOrientationChange",value:function(){var e=this;return this.createNativeEventApi("onWebContainerOrientationChange",{onPolicy:"latest",whenListenerExisted:function(){e.invokeMethod("onWebContainerOrientationChange")},whenListenerEmptied:function(){e.invokeMethod("offWebContainerOrientationChange")}})}}]}}),Br);function bs(e){void 0===e&&(e={}),wr("getBlockActionSourceDetail",e)}var ws=Lr("vibrateShort"),Ss=Lr("vibrateLong");function _s(e){void 0===e&&(e={}),e.sourceType=e.sourceType||["album","camera"],e.camera=e.camera||["front","back"],"boolean"!=typeof e.compressed&&(e.compressed=!0),wr("chooseVideo",e)}function Cs(e){void 0===e&&(e={}),wr("saveVideoToPhotosAlbum",e,{})}new(function(){function e(){}var t=e.prototype;return t.destroy=function(){},t.hide=function(){},t.show=function(){},l(e)}());var As=Lr("getSetting"),Is=Lr("openSetting");function Ms(e){var t=e.errCode===uo.Cancelled||e.errMsg.startsWith("uploadFile:fail Canceled"),n=t?Ke:Je,r=t?"cancel":e.resultType,o=Date.now()-e.bizInvokeTime,i={request_trace:e.uploadTaskId,request_url:"string"==typeof e.url?ln(e.url):vt(e.url),request_biz_invoke_time:e.bizInvokeTime,error_code:e.errCode?e.errCode:0,error_msg:e.errMsg||"",errno:e.errno,err_string:e.errString,duration:o,result_type:r,request_version:"v2",api_name:"uploadFile",request_method:"string"==typeof e.method?e.method:vt(e.method)};et(Be,n).setPlatform("TeaSlardar").addMap(i).flush()}var Es=new So.EventEmitter2,xs=new Map;function Ps(e,t,n){return function(r){var o=r.payload,i=r.errCode,a=r.errno,s=r.errString,c=r.errMsg,u=null;if("string"==typeof o)try{u=JSON.parse(o)}catch(e){c="uploadFile:fail sdk parse payload error",B.error("[js-sdk-uploadFile] biz callback payload json parse error")}var l=u?Object.assign({trace:e.uploadTaskId,errMsg:c},u):{trace:e.uploadTaskId,errMsg:c};if(void 0!==a&&(l.errno=a),void 0!==s&&(l.errString=s),"success"===n&&u)"function"==typeof e.success&&e.success(l);else{var d=void 0===i?l:Object.assign({},l,{errCode:i});"function"==typeof e.fail&&e.fail(d)}"function"==typeof e.complete&&e.complete(l),Es.removeAllListeners(e.uploadTaskId),Ms({resultType:n,errMsg:c,bizInvokeTime:t,errCode:i,errno:a,errString:s,uploadTaskId:e.uploadTaskId,url:e.url,method:e.method})}}Sr("onUploadFileProgress",(function(e){void 0===e&&(e={});var t=e,n=t.uploadTaskId,r=t.progress,o=t.totalBytesSent,i=t.totalBytesExpectedToSend;if(n){var a=xs.get(n);if((a||0===a)&&r<a)return;xs.set(n,r),Es.emit(n,{progress:r,totalBytesSent:o,totalBytesExpectedToSend:i})}}));var Ts=new WeakMap,Fs=l((function e(t){var n=this;this.requestVersion="v2",this.requestId=void 0,this.abortController=void 0,this.uploadInH5Context=r(a.mark((function e(t,o,i){var s;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=Object.assign({},t,{uploadTaskId:o}),e.next=3,n.isUploadUseH5Impl();case 3:e.sent?wr("readFile",{filePath:s.filePath,success:function(){var e=r(a.mark((function e(t){var r,c,u,l,d,f,h,p,v;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new FormData,c=0,(u=To(s.filePath))?(l=Lo((g=void 0,-1===(g=(a=u).lastIndexOf("."))?"":a.slice(g+1).toLowerCase())),d=new Blob([t.data],{type:l}),c+=d.size,r.append(s.name,d,u)):(f=new Blob([t.data],{type:Lo("")}),c+=f.size,r.append(s.name,f)),s.formData&&Object.keys(s.formData).forEach((function(e){var t=s.formData[e];r.append(e,t)})),void 0===n.abortController&&(n.abortController=new AbortController),e.next=8,fetch(s.url,{method:"POST",body:r,headers:s.header,signal:n.abortController.signal});case 8:return h=e.sent,e.next=11,h.text();case 11:p=e.sent,v=JSON.stringify({data:p,statusCode:h.status}),Es.emit(o,{progress:100,totalBytesSent:c,totalBytesExpectedToSend:c}),Ps(s,i,"success")({payload:v,errMsg:"uploadFile:ok"});case 15:case"end":return e.stop()}var a,g}),e)})));return function(t){return e.apply(this,arguments)}}(),fail:Ps(s,i,"fail")}):Mr("uploadFile",t,xt(),{errno:Lt,errString:xt()});case 5:case"end":return e.stop()}}),e)}))),this.isUploadUseH5Impl=r(a.mark((function t(){return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e.sUploadUseH5Impl&&(e.sUploadUseH5Impl=new Promise((function(e,t){wr("getFilterFeatureGating",{fg_name:"calculated_fg_web_upload_h5",success:function(t){e(t.fg_value)},fail:function(t){B.error("getFilterFeatureGating upload err:",JSON.stringify(t)),e(!1)}})}))),t.abrupt("return",e.sUploadUseH5Impl);case 2:case"end":return t.stop()}}),t)}))),this.abort=r(a.mark((function e(){var t,r;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,n.isUploadUseH5Impl();case 3:e.sent&&(n.abortController=null!=(t=n.abortController)?t:new AbortController,n.abortController.abort()),e.next=9;break;case 7:r=Ts.get(n),wr("uploadFileAbort",{payload:JSON.stringify({uploadTaskId:r})});case 9:case"end":return e.stop()}}),e)}))),this.onProgressUpdate=function(e){var t=Ts.get(n);Es.on(t,(function(t){"function"==typeof e&&Xt(e,"at UploadTask.onProgressUpdate callback function")(t)}))};var o=an();this.requestId=o,Ts.set(this,o);var i=Date.now();this.uploadInH5Context(t,o,i)}));function Ls(e){return void 0===e&&(e={}),function(e){void 0===e&&(e={});for(var t="",n="",r=["url","filePath","name"],o=0;o<r.length;o++){var i=r[o],a=vt(e[i]),s=vt("");if(a!==s){t="param."+i+" should pass "+s+", not "+a,n=bt(i);break}}if(t||Qt(e.url)||(t='invalid url "'+e.url+'"',n=kt("url")),!t&&("string"!=typeof e.method&&e.method||0===e.method)&&(t="param.method should pass string, not "+typeof e.method,n=bt("method")),t)return Ms({resultType:"fail",errMsg:"uploadFile:fail "+t,bizInvokeTime:Date.now(),errCode:uo.InvalidParam,errno:Ot,errString:n,uploadTaskId:"",url:e.url,method:e.method}),void Mr("uploadFile",e,t,{errno:Ot,errString:n});var c=Object.assign({},e);"object"!=typeof c.header&&void 0!==c.header&&(B.warn("uploadFile: header must be an object"),delete c.header),"object"!=typeof e.formData&&void 0!==e.formData&&(B.warn("uploadFile: formData must be an object"),delete c.formData),c.header=c.header?Zt(c.header):{},c.formData=c.formData?Zt(c.formData):{},["success","fail","complete"].forEach((function(e){var t=c[e];"function"==typeof t&&(c[e]=Xt(t,"at api uploadFile "+e+" callback function"))}));try{return new Fs(c)}catch(t){Ms({resultType:"fail",errMsg:"uploadFile:fail create UploadFile instant catch error",bizInvokeTime:Date.now(),errCode:uo.InternalError,errno:Ft,errString:yt(),uploadTaskId:"",url:e.url,method:e.method}),Mr("uploadFile",e,t.message||"create UploadFile instant catch error",{errno:Ft,errString:yt()})}}(e)}function Os(e){var t=e.value,n=e.success,r=e.fail;return new Promise((function(e,o){wr("setScreenBrightness",{value:t},{afterSuccess:function(t){e(n?n(t):t)},afterCancel:function(e){o(r?r(e):e)},afterFail:function(e){o(r?r(e):e)}})}))}function js(e){var t=e.success,n=e.fail;return new Promise((function(e,r){wr("getScreenBrightness",{},{afterSuccess:function(n){e(t?t(n):n)},afterCancel:function(e){r(n?n(e):e)},afterFail:function(e){r(n?n(e):e)}})}))}function Ns(e){void 0===e&&(e={}),void 0===e.keepScreenOn&&(e.keepScreenOn=!0),Ir("setKeepScreenOn",e,{keepScreenOn:!0},!0)&&wr("setKeepScreenOn",e)}Fs.sUploadUseH5Impl=void 0;var Ds=Lr("getTenantAppScopes"),Bs=Lr("applyTenantAppScope"),Rs=new So,Ws={8e3:[16e3,48e3],11025:[16e3,48e3],12e3:[24e3,64e3],16e3:[24e3,96e3],22050:[32e3,128e3],24e3:[32e3,128e3],32e3:[48e3,192e3],44100:[64e3,32e4],48e3:[64e3,32e4]},zs=Object.keys(Ws).map((function(e){return parseInt(e,10)}));function Us(e){wr("operateRecorder",Object.assign({},e))}Sr("onRecorderStateChange",(function(e){void 0===e&&(e={});var t=e.state;delete e.state,Rs.emit("onRecorderStateChange_"+t,e)}));var Vs={start:function(e){void 0===e&&(e={});var t=Object.assign({format:"aac",sampleRate:8e3,encodeBitRate:48e3,numberOfChannels:2,duration:6e4},e,{operationType:"start",fail:function(e){Rs.emit("onRecorderStateChange_error",e)}});if(-1===zs.indexOf(t.sampleRate))throw new Error('invalid sampleRate "'+t.sampleRate+'", sampleRate should be one of '+JSON.stringify(Object.keys(Ws)));Us(t)},pause:function(){Us({operationType:"pause",fail:function(e){Rs.emit("onRecorderStateChange_error",e)}})},resume:function(){Us({operationType:"resume",fail:function(e){Rs.emit("onRecorderStateChange_error",e)}})},stop:function(){Us({operationType:"stop",fail:function(e){Rs.emit("onRecorderStateChange_error",e)}})},getState:function(e){void 0===e&&(e={}),function(e){wr("getRecorderState",Object.assign({},e))}(e)},onStart:function(e){Rs.removeAllListeners("onRecorderStateChange_start"),Rs.on("onRecorderStateChange_start",(function(t){"function"==typeof e&&Xt(e,"at recorderManager.onStart callback function")(t)}))},onResume:function(e){Rs.removeAllListeners("onRecorderStateChange_resume"),Rs.on("onRecorderStateChange_resume",(function(t){"function"==typeof e&&Xt(e,"at recorderManager.onResume callback function")(t)}))},onPause:function(e){Rs.removeAllListeners("onRecorderStateChange_pause"),Rs.on("onRecorderStateChange_pause",(function(t){"function"==typeof e&&Xt(e,"at recorderManager.onPause callback function")(t)}))},onStop:function(e){Rs.removeAllListeners("onRecorderStateChange_stop"),Rs.on("onRecorderStateChange_stop",(function(t){"function"==typeof e&&Xt(e,"at recorderManager.onStop callback function")(t)}))},onFrameRecorded:function(e){Rs.removeAllListeners("onRecorderStateChange_frameRecorded"),Rs.on("onRecorderStateChange_frameRecorded",(function(t){if("function"==typeof e){var n=t.frameBuffer;"string"==typeof n&&(t.frameBuffer=H(n)),Xt(e,"at recorderManager.onFrameRecorded callback function")(t)}}))},onError:function(e){Rs.removeAllListeners("onRecorderStateChange_error"),Rs.on("onRecorderStateChange_error",(function(t){"function"==typeof e&&Xt(e,"at recorderManager.onError callback function")(t)}))}};function qs(){return Vs}var Hs=Lr("requestAuthCode"),Js=[Ur,Vr,zr,qr,Yr,$r,mi,yi,bi,Xr,no,oo,ao,so,lo,ho,po,vo,mo,yo,ko,bo,wo,di,hi,vi,wi,Si,_i,Ci,Mi,Ei,xi,Pi,Ti,ji,Ni,Di,Bi,Ri,Ji,Ki,Gi,Qi,Zi,Xi,ea,ta,ca,ua,la,da,Sa,_a,Ca,Aa,Ia,Ma,Ea,xa,Pa,Ta,Fa,La,Ha,Ja,Ka,Ga,Qa,Za,Ya,$a,Xa,es,ts,ns,rs,os,is,as,ss,ds,cs,us,ls,fs,hs,ps,vs,gs,ms,ys,ks],Ks=Object.freeze({__proto__:null,apis:Js,getBlockActionSourceDetail:bs,vibrateLong:Ss,vibrateShort:ws,chooseVideo:_s,saveVideoToPhotosAlbum:Cs,getSetting:As,openSetting:Is,uploadFile:Ls,setKeepScreenOn:Ns,getTenantAppScopes:Ds,applyTenantAppScope:Bs,getRecorderManager:qs,requestAuthCode:Hs,getScreenBrightness:js,setScreenBrightness:Os}),Gs=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"print",value:function(){return this.createInvokeMethodApi("print",{checkParams:{url:""}})}}]}}),Br),Qs=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"field",decorators:[Nr()],key:"notifyIPAddressChange",value:function(){return this.createInvokeMethodApi("notifyIPAddressChange")}}]}}),Br),Zs=mr(null,(function(e,t){return{F:function(t){function n(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,e(Z(n)),n}return _(n,t),l(n)}(t),d:[{kind:"method",decorators:[Nr()],key:"setWindowSize",value:function(e){void 0===e&&(e={});var t=Pt(e,{windowWidth:{type:"Number",required:!1},windowHeight:{type:"Number",required:!1},x:{type:"Number",required:!1},y:{type:"Number",required:!1}});t?this.beforeInvokeFail("setWindowSize",e,t):this.invokeMethod("setWindowSize",e)}}]}}),Br),Ys=[].concat(Js,[to,io,Gs,fo,Qs,Zs]),$s=Object.freeze({__proto__:null,apis:Ys,getBlockActionSourceDetail:bs,vibrateLong:Ss,vibrateShort:ws,chooseVideo:_s,saveVideoToPhotosAlbum:Cs,getSetting:As,openSetting:Is,uploadFile:Ls,setKeepScreenOn:Ns,getTenantAppScopes:Ds,applyTenantAppScope:Bs,getRecorderManager:qs,requestAuthCode:Hs,getScreenBrightness:js,setScreenBrightness:Os}),Xs=/(Android|Mobile|iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)?Ks:$s,ec=/iPhone|iPad|iPod|iOS/i.test(navigator.userAgent),tc={};for(var nc in Xs)"apis"===nc?function(){var e=new Wr({appKey:"h5sdk",bridge:Er,useNewDownloadAPI:!1,getJSSDKVersion:function(){return"undefined"!=typeof __JSSDK_VERSION__?__JSSDK_VERSION__:{}}},Xs[nc]);_e(e),Object.assign(tc,e.exports);var t=[];Array.from(e.instance.values()).forEach((function(e){null!=e&&e.composeSafariCache&&t.push(e)})),ec&&window.addEventListener("pageshow",(function(e){var n={persisted:e.persisted,navigationType:window.performance.navigation.type};t.forEach((function(e){var t=null==e?void 0:e.composeSafariCache();Object.assign(n,t)})),wr("pageshow",n)}))}():tc[nc]=Xs[nc];var rc=function(e){for(var t=!1,n=0;n<e.length;n++){var r=e[n];if("META"===r.nodeName&&r.hasAttribute("lk-config")){t=!0;break}}return t};!function(){var e=[],t=null,n=function(){qn.invoke("monitorReport",{monitorEvents:e}),e=[],clearTimeout(t),t=null},r=new Me({report:function(r){var o=r.name,i=r.metrics,a=void 0===i?{}:i,s=r.categories,c=void 0===s?{}:s,u=a.monitor_level;e.push({name:o,metrics:a,categories:c}),e.length>=20||u>=ne.error?n():t||(t=setTimeout((function(){n()}),4e3))},log:function(e){}});Ee.setup(r)}(),window.dispatchEvent(new CustomEvent("WebViewJSBridgeReady"));var oc={biz:Gn,device:Xn,appCenter:tr};ur(oc,cr);var ic,ac,sc,cc=null,uc=[],lc=[];if(window.ttJSBridge=null,g.versions.mobileFeishu||g.versions.PCFeishu){(sc=null==tc?void 0:tc.updateMeta)(),new MutationObserver((function(e){(function(e){for(var t=!1,n=0;n<e.length;n++){var r=e[n];if("childList"===r.type){var o,i;if(null!=(o=r.addedNodes)&&o.length){var a=rc(r.addedNodes);if(t=a,a)break}if(null!=(i=r.removedNodes)&&i.length){var s=rc(r.removedNodes);if(t=s,s)break}}if("attributes"===r.type&&"META"===r.target.nodeName&&r.target.hasAttribute("lk-config")){t=!0;break}}return t})(e)&&sc()})).observe(document.head,{childList:!0,attributes:!0,subtree:!0,attributeFilter:["name","content","lk-config"]});var dc={setConfig:function(e){Object.assign(lr,e)},config:function(e){var t={appId:e.appId,timestamp:e.timestamp,nonceStr:e.nonceStr,signature:e.signature,jsApiList:e.jsApiList};return function(e){e}(e.appId),cc=new Promise(r(a.mark((function n(r,o){return a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:"string"==typeof g.versions.larkVersion&&b(g.versions.larkVersion,"3.9.0")>=0?Vn.invoke("config",t,{onSuccess:function(t){uc.forEach((function(e){return e()})),uc.length=0,r(t),"function"==typeof e.onSuccess&&e.onSuccess(t)},onFail:function(t){o(t),"function"==typeof e.onFail&&e.onFail(t),lc.forEach((function(e){"function"==typeof e&&e(t)}))}}):r();case 1:case"end":return n.stop()}}),n)}))))},ready:(ac=r(a.mark((function e(t){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ar({api:oc,browser:g,build:"cdn",SDK:dc});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),k(null==e.t0?void 0:e.t0.message,!0);case 8:if(!cc){e.next=18;break}return e.prev=9,e.next=12,cc;case 12:e.next=16;break;case 14:e.prev=14,e.t1=e.catch(9);case 16:e.next=19;break;case 18:k("please invoke h5sdk.config before invoke h5sdk.ready，otherwise the interface call may fail",!0);case 19:t();case 20:case"end":return e.stop()}}),e,null,[[0,5],[9,14]])}))),function(e){return ac.apply(this,arguments)}),error:(ic=r(a.mark((function e(t){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:lc.push(t);case 1:case"end":return e.stop()}}),e)}))),function(e){return ic.apply(this,arguments)}),updateMeta:function(){null==tc||tc.updateMeta()},addReadySuccessCallback:function(e){uc.push(e)}};ar({api:oc,browser:g,build:"cdn",SDK:dc}),window.lark?Object.assign(window.lark,dc):window.lark=dc,window.h5sdk?Object.assign(window.h5sdk,dc):window.h5sdk=dc,window.tt?Object.assign(window.tt,tc):window.tt=tc,window.ttJSBridge=qn}}));
